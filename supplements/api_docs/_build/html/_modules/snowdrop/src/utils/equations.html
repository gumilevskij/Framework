<!DOCTYPE html>

<html lang="en" data-content_root="../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>snowdrop.src.utils.equations &#8212; Python Platform 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=61cd365c" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css?v=12dfc556" />
    <script src="../../../../_static/documentation_options.js?v=f2a433a1"></script>
    <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for snowdrop.src.utils.equations</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Created on Wed May 16 16:30:50 2018</span>
<span class="sd">@author: agoumilevski</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">sympy</span> <span class="k">as</span> <span class="nn">sy</span>  
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>

<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
<span class="n">working_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">path</span> <span class="o">+</span> <span class="s2">&quot;/../../..&quot;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">working_dir</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">snowdrop.src.misc.termcolor</span> <span class="kn">import</span> <span class="n">cprint</span>
    
<span class="n">mp1</span> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span> <span class="n">mp2</span> <span class="o">=</span> <span class="kc">None</span>
        
<span class="n">delimiters</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;^&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span>
<span class="n">regexPattern</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">,</span> <span class="n">delimiters</span><span class="p">))</span>
      

<div class="viewcode-block" id="findVar">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.findVar">[docs]</a>
<span class="k">def</span> <span class="nf">findVar</span><span class="p">(</span><span class="n">txt</span><span class="p">,</span><span class="n">line</span><span class="p">,</span><span class="n">shocks</span><span class="o">=</span><span class="p">[]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse text string and returns name, value of a variable.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;//DO &quot;</span> <span class="ow">in</span> <span class="n">line</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s2">&quot;*/&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
        <span class="c1">#arr = txt.split(&#39; &#39;)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; |;|,&#39;</span><span class="p">,</span><span class="n">txt</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">ind1</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">ind2</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">,</span><span class="n">ind1</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ind1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">ind2</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">var</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">ind1</span><span class="p">:</span><span class="n">ind2</span><span class="p">]</span>
                    <span class="n">j</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">name</span> <span class="o">=</span> <span class="n">var</span><span class="p">[:</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="n">var</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">j</span><span class="p">:]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        <span class="n">isShock</span> <span class="o">=</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">shocks</span>
                        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                            <span class="n">var</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;dzero&#39;</span><span class="p">,</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
                            <span class="n">var</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">split</span><span class="p">())</span> 
                            <span class="n">var</span> <span class="o">=</span> <span class="n">var</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
                            <span class="k">return</span> <span class="n">name</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="n">isShock</span>
    <span class="k">return</span> <span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">False</span></div>

    
    
<div class="viewcode-block" id="replaceEq">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.replaceEq">[docs]</a>
<span class="k">def</span> <span class="nf">replaceEq</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span><span class="n">arr</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">old_var</span><span class="p">,</span><span class="n">new_var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replace variables in equation.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param eq: Equation.</span>
<span class="sd">        :type eq: str.</span>
<span class="sd">        :param arr: Symbols of an equation.</span>
<span class="sd">        :type arr: list.</span>
<span class="sd">        :param var: Variable name.</span>
<span class="sd">        :type var: str.</span>
<span class="sd">        :param old_var: Old variable name.</span>
<span class="sd">        :type old_var: str.</span>
<span class="sd">        :param new_var: New variable name.</span>
<span class="sd">        :type new_var: str.</span>
<span class="sd">        :return: New equation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_eq</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="c1">#eq.replace(old_var,new_var) </span>
    <span class="n">ind1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">beg</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
        <span class="n">ind</span>  <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">ind1</span><span class="p">)</span>
        <span class="n">ind1</span> <span class="o">=</span> <span class="n">ind</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;)&quot;</span> <span class="ow">in</span> <span class="n">eq</span><span class="p">[</span><span class="n">ind</span><span class="p">:]:</span>
            <span class="n">ind2</span> <span class="o">=</span> <span class="mi">1</span><span class="o">+</span><span class="n">eq</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">,</span><span class="n">ind1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ind2</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">eq</span><span class="p">)</span> <span class="ow">and</span> <span class="n">eq</span><span class="p">[</span><span class="n">ind</span><span class="p">:</span><span class="n">ind2</span><span class="p">]</span> <span class="o">==</span> <span class="n">old_var</span><span class="p">:</span>
                <span class="n">end</span> <span class="o">=</span> <span class="n">ind</span>
                <span class="n">new_eq</span> <span class="o">+=</span> <span class="n">eq</span><span class="p">[</span><span class="n">beg</span><span class="p">:</span><span class="n">end</span><span class="p">]</span> <span class="o">+</span> <span class="n">new_var</span>
                <span class="n">beg</span> <span class="o">=</span> <span class="n">end</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">old_var</span><span class="p">)</span>
        
    <span class="k">if</span> <span class="n">beg</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">new_eq</span> <span class="o">=</span> <span class="n">eq</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new_eq</span> <span class="o">+=</span> <span class="n">eq</span><span class="p">[</span><span class="n">beg</span><span class="p">:]</span>
            
    <span class="k">return</span> <span class="n">new_eq</span></div>



<span class="c1"># def _fixEquation(eq):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     Replace exponent ** operator with power() function.</span>
    
<span class="c1">#     https://stackoverflow.com/questions/37077052/changing-operator-to-power-function-using-parsing</span>
    
<span class="c1">#     Parameters:</span>
<span class="c1">#         :param eq: Equation.</span>
<span class="c1">#         :type eq: str.</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     from pyparsing import Regex,Word,Forward,Combine,infixNotation</span>
<span class="c1">#     from pyparsing import Optional,opAssoc,oneOf</span>
<span class="c1">#     from pyparsing import alphas,alphanums</span>
    
<span class="c1">#     # define some basic operand expressions</span>
<span class="c1">#     number = Regex(r&#39;\d+(\.\d*)?([Ee][+-]?\d+)?&#39;)</span>
<span class="c1">#     ident = Word(alphas+&#39;_&#39;, alphanums+&#39;_&#39;)</span>
    
<span class="c1">#     # forward declare our overall expression, since a slice could </span>
<span class="c1">#     # contain an arithmetic expression</span>
<span class="c1">#     expr = Forward()</span>
<span class="c1">#     slice_ref = &#39;[&#39; + expr + &#39;]&#39;</span>
    
<span class="c1">#     # define our arithmetic operand</span>
<span class="c1">#     operand = number | Combine(ident + Optional(slice_ref))</span>
    
<span class="c1">#     # parse actions to convert parsed items</span>
<span class="c1">#     def convert_to_pow(tokens):</span>
<span class="c1">#         tmp = tokens[0][:]</span>
<span class="c1">#         ret = tmp.pop(-1)</span>
<span class="c1">#         tmp.pop(-1)</span>
<span class="c1">#         while tmp:</span>
<span class="c1">#             base = tmp.pop(-1)</span>
<span class="c1">#             # hack to handle &#39;**&#39; precedence ahead of &#39;-&#39;</span>
<span class="c1">#             if base.startswith(&#39;-&#39;):</span>
<span class="c1">#                 ret = &#39;-pow(%s,%s)&#39; % (base[1:], ret)</span>
<span class="c1">#             else:</span>
<span class="c1">#                 ret = &#39;pow(%s,%s)&#39; % (base, ret)</span>
<span class="c1">#             if tmp:</span>
<span class="c1">#                 tmp.pop(-1)</span>
<span class="c1">#         return ret</span>
    
<span class="c1">#     def unary_as_is(tokens):</span>
<span class="c1">#         return &#39;(%s)&#39; % &#39;&#39;.join(tokens[0])</span>
    
<span class="c1">#     def as_is(tokens):</span>
<span class="c1">#         return &#39;%s&#39; % &#39;&#39;.join(tokens[0])</span>
    
<span class="c1">#     # simplest infixNotation - may need to add a few more operators, but start with this for now</span>
<span class="c1">#     arith_expr = infixNotation( operand,</span>
<span class="c1">#         [</span>
<span class="c1">#         (&#39;-&#39;, 1, opAssoc.RIGHT, as_is),</span>
<span class="c1">#         (&#39;**&#39;, 2, opAssoc.LEFT, convert_to_pow),</span>
<span class="c1">#         (&#39;-&#39;, 1, opAssoc.RIGHT, unary_as_is),</span>
<span class="c1">#         (oneOf(&quot;* /&quot;), 2, opAssoc.LEFT, as_is),</span>
<span class="c1">#         (oneOf(&quot;+ -&quot;), 2, opAssoc.LEFT, as_is),</span>
<span class="c1">#         ])</span>
    
<span class="c1">#     # now assign into forward-declared expr</span>
<span class="c1">#     expr &lt;&lt;= arith_expr.setParseAction(lambda t: &#39;(%s)&#39; % &#39;&#39;.join(t))</span>
    
<span class="c1">#     eq = expr.transformString(eq)[1:-1]</span>
<span class="c1">#     return eq</span>

<div class="viewcode-block" id="fixEquation">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.fixEquation">[docs]</a>
<span class="k">def</span> <span class="nf">fixEquation</span><span class="p">(</span><span class="n">eq</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replace exponent ** operator with power() function.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param eq: Equation.</span>
<span class="sd">        :type eq: str.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;**&quot;</span> <span class="ow">in</span> <span class="n">eq</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">eq</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">while</span> <span class="p">(</span><span class="s2">&quot;**&quot;</span> <span class="ow">in</span> <span class="n">eq</span><span class="p">):</span>
            <span class="n">eq</span> <span class="o">=</span> <span class="n">fixExpression</span><span class="p">(</span><span class="n">eq</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">eq</span></div>

    
    
<div class="viewcode-block" id="fixExpression">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.fixExpression">[docs]</a>
<span class="k">def</span> <span class="nf">fixExpression</span><span class="p">(</span><span class="n">eq</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replace exponent ** operator with power() function.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param eq: Equation.</span>
<span class="sd">        :type eq: str.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">copy</span>
    <span class="kn">from</span> <span class="nn">ast</span> <span class="kn">import</span> <span class="n">Pow</span><span class="p">,</span><span class="n">Name</span><span class="p">,</span><span class="n">parse</span><span class="p">,</span><span class="n">copy_location</span>
    <span class="kn">from</span> <span class="nn">ast</span> <span class="kn">import</span> <span class="n">Call</span><span class="p">,</span><span class="n">NodeTransformer</span><span class="p">,</span><span class="n">Load</span>
    <span class="kn">from</span> <span class="nn">snowdrop.src.preprocessor.codegen</span> <span class="kn">import</span> <span class="n">to_source</span>  

    <span class="k">class</span> <span class="nc">ExponentTransformer</span><span class="p">(</span><span class="n">NodeTransformer</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">visit_BinOp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">op</span><span class="p">,</span> <span class="n">Pow</span><span class="p">):</span>
                <span class="n">new_node</span> <span class="o">=</span> <span class="n">Call</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">Name</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;pow&#39;</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=</span><span class="n">Load</span><span class="p">()),</span>
                                <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">left</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">right</span><span class="p">],</span>
                                <span class="n">keywords</span> <span class="o">=</span> <span class="p">[],</span>
                                <span class="n">starargs</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span> <span class="kc">None</span>
                                <span class="p">)</span>
                <span class="n">copy_location</span><span class="p">(</span><span class="n">new_node</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">new_node</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">generic_visit</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">node</span>       

    <span class="k">if</span>  <span class="s2">&quot;**&quot;</span> <span class="ow">in</span> <span class="n">eq</span><span class="p">:</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">eq</span><span class="p">)</span>
        <span class="n">syntax_tree</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">cp</span><span class="p">)</span>
        <span class="n">et</span> <span class="o">=</span> <span class="n">ExponentTransformer</span><span class="p">()</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">et</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">syntax_tree</span><span class="p">)</span>
        <span class="n">eq</span> <span class="o">=</span> <span class="n">to_source</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">eq</span></div>

      
    
<div class="viewcode-block" id="fixEquations">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.fixEquations">[docs]</a>
<span class="k">def</span> <span class="nf">fixEquations</span><span class="p">(</span><span class="n">eqs</span><span class="p">,</span><span class="n">endog</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">tagBeg</span><span class="o">=</span><span class="s2">&quot;(&quot;</span><span class="p">,</span><span class="n">tagEnd</span><span class="o">=</span><span class="s2">&quot;)&quot;</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replace curly brackets in lead/lag variables expressions.</span>
<span class="sd">    </span>
<span class="sd">    Adds new equations and new variables if leads/lags greater than one.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param eqs: List of equations.None</span>
<span class="sd">        :type eqs: list.</span>
<span class="sd">        :param endog: List of engogenous variables.</span>
<span class="sd">        :type endog: list.</span>
<span class="sd">        :param params: List of parameters names.</span>
<span class="sd">        :type params: list.</span>
<span class="sd">        :param tagBeg: The beginning tag of lead/lag variable.</span>
<span class="sd">        :type tagBeg: str.</span>
<span class="sd">        :param tagEnd: The ending tag of lead/lag variable.</span>
<span class="sd">        :type tagEnd: str.</span>
<span class="sd">        :param b: Flag.  If False it converts equations to a form that have variable </span>
<span class="sd">                  with leads and lags of no more than one.</span>
<span class="sd">               If True it converts equations to a form that have variable </span>
<span class="sd">                  with leads of no more than one and no lags.</span>
<span class="sd">        :type b: Bool.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">b</span><span class="p">:</span>
        <span class="n">eqs</span> <span class="o">=</span> <span class="n">modifyEquations</span><span class="p">(</span><span class="n">eqs</span><span class="o">=</span><span class="n">eqs</span><span class="p">,</span><span class="n">variables</span><span class="o">=</span><span class="n">endog</span><span class="p">)</span>
        

    <span class="n">ex_leads</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">ex_lags</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">leads</span> <span class="o">=</span> <span class="p">{};</span> <span class="n">lags</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">eq_leads</span> <span class="o">=</span> <span class="p">{};</span> <span class="n">eq_lags</span> <span class="o">=</span> <span class="p">{};</span> <span class="n">par_leads</span> <span class="o">=</span> <span class="p">{};</span> <span class="n">par_lags</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">mod_eqs</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">new_endog</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">mod_endog</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">eq</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eqs</span><span class="p">):</span>
        <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">eq</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">,</span><span class="n">eq</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">endog</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">eq</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="n">tagBeg</span><span class="p">,</span><span class="n">ind</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">ind1</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span><span class="n">eq</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="n">tagBeg</span><span class="p">,</span><span class="n">ind</span><span class="p">))</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="n">ind2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ind1</span><span class="p">,</span><span class="n">eq</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">tagEnd</span><span class="p">,</span><span class="n">ind1</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">ind1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">ind2</span> <span class="o">&gt;</span> <span class="n">ind1</span><span class="p">:</span>
                    <span class="n">lead_lag</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind1</span><span class="p">:</span><span class="n">ind2</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                    <span class="n">ex_var</span> <span class="o">=</span> <span class="n">v</span> <span class="o">+</span> <span class="n">tagBeg</span> <span class="o">+</span> <span class="n">lead_lag</span> <span class="o">+</span> <span class="n">tagEnd</span>
                    <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[-+]?\d+&quot;</span><span class="p">,</span><span class="n">lead_lag</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">i_lead_lag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lead_lag</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">i_lead_lag</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                                <span class="n">mod_var</span> <span class="o">=</span> <span class="n">v</span> <span class="o">+</span> <span class="s2">&quot;_plus_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i_lead_lag</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                                <span class="n">new_endog</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mod_var</span><span class="p">)</span>
                                <span class="n">mod_endog</span><span class="p">[</span><span class="n">ex_var</span><span class="p">]</span> <span class="o">=</span> <span class="n">mod_var</span>
                            <span class="k">elif</span> <span class="n">i_lead_lag</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span> 
                                <span class="n">mod_var</span> <span class="o">=</span> <span class="n">v</span> <span class="o">+</span> <span class="s2">&quot;_minus_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="n">i_lead_lag</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                                <span class="n">new_endog</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mod_var</span><span class="p">)</span>
                                <span class="n">mod_endog</span><span class="p">[</span><span class="n">ex_var</span><span class="p">]</span> <span class="o">=</span> <span class="n">mod_var</span>
                            <span class="k">if</span> <span class="n">i_lead_lag</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                                <span class="n">ex_leads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">i_lead_lag</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                                <span class="n">ex_lags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">i_lead_lag</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">eq_leads</span><span class="p">:</span>
                                    <span class="n">eq_leads</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">v</span><span class="p">,</span><span class="n">i_lead_lag</span><span class="p">])</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">eq_leads</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[</span><span class="n">v</span><span class="p">,</span><span class="n">i_lead_lag</span><span class="p">]]</span> 
                                <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">leads</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                                    <span class="n">leads</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">leads</span><span class="p">[</span><span class="n">v</span><span class="p">],</span><span class="n">i_lead_lag</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">leads</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">i_lead_lag</span>
                            <span class="k">if</span> <span class="n">i_lead_lag</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">eq_lags</span><span class="p">:</span>
                                    <span class="n">eq_lags</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">v</span><span class="p">,</span><span class="n">i_lead_lag</span><span class="p">])</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">eq_lags</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[</span><span class="n">v</span><span class="p">,</span><span class="n">i_lead_lag</span><span class="p">]]</span>
                                <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">lags</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>  
                                    <span class="n">lags</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">i_lead_lag</span><span class="p">,</span><span class="n">lags</span><span class="p">[</span><span class="n">v</span><span class="p">])</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">lags</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">i_lead_lag</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="k">pass</span>
                        
            <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
                <span class="n">ind1</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span><span class="n">eq</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="n">tagBeg</span><span class="p">,</span><span class="n">ind</span><span class="p">))</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="n">ind2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ind1</span><span class="p">,</span><span class="n">eq</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">tagEnd</span><span class="p">,</span><span class="n">ind1</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">ind1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">ind2</span> <span class="o">&gt;</span> <span class="n">ind1</span><span class="p">:</span>
                    <span class="n">lead_lag</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind1</span><span class="p">:</span><span class="n">ind2</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                    <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[-+]?\d+&quot;</span><span class="p">,</span><span class="n">lead_lag</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">i_lead_lag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lead_lag</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">i_lead_lag</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">par_leads</span><span class="p">:</span>
                                    <span class="n">par_leads</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">v</span><span class="p">,</span><span class="n">i_lead_lag</span><span class="p">])</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">par_leads</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[</span><span class="n">v</span><span class="p">,</span><span class="n">i_lead_lag</span><span class="p">]]</span> 
                            <span class="k">if</span> <span class="n">i_lead_lag</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">par_lags</span><span class="p">:</span>
                                    <span class="n">par_lags</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">v</span><span class="p">,</span><span class="n">i_lead_lag</span><span class="p">])</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">par_lags</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[</span><span class="n">v</span><span class="p">,</span><span class="n">i_lead_lag</span><span class="p">]]</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="k">pass</span>            
     
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">eq</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eqs</span><span class="p">):</span>
        <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">);</span>   
        
        <span class="c1"># Replace lead/lag variables in equations</span>
        <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">eq_leads</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">eq_leads</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                <span class="n">k</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">x</span>
                <span class="n">new_var</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;_plus_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;(+1)&quot;</span>
                <span class="n">old_var</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;(+&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">eq</span><span class="p">)</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
                <span class="n">eq</span> <span class="o">=</span> <span class="n">replaceEq</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span><span class="n">arr</span><span class="p">,</span><span class="n">var</span><span class="o">=</span><span class="n">k</span><span class="p">,</span><span class="n">old_var</span><span class="o">=</span><span class="n">old_var</span><span class="p">,</span><span class="n">new_var</span><span class="o">=</span><span class="n">new_var</span><span class="p">)</span>
                <span class="n">old_var</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>  
                <span class="c1">#eq = eq.replace(old_var,new_var) </span>
                <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">eq</span><span class="p">)</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
                <span class="n">eq</span> <span class="o">=</span> <span class="n">replaceEq</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span><span class="n">arr</span><span class="p">,</span><span class="n">var</span><span class="o">=</span><span class="n">k</span><span class="p">,</span><span class="n">old_var</span><span class="o">=</span><span class="n">old_var</span><span class="p">,</span><span class="n">new_var</span><span class="o">=</span><span class="n">new_var</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">eq_lags</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">eq_lags</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                <span class="n">k</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">x</span>  
                <span class="n">new_var</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;_minus_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;(-1)&quot;</span>
                <span class="n">old_var</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;(-&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="n">j</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">eq</span><span class="p">)</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
                <span class="n">eq</span> <span class="o">=</span> <span class="n">replaceEq</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span><span class="n">arr</span><span class="p">,</span><span class="n">var</span><span class="o">=</span><span class="n">k</span><span class="p">,</span><span class="n">old_var</span><span class="o">=</span><span class="n">old_var</span><span class="p">,</span><span class="n">new_var</span><span class="o">=</span><span class="n">new_var</span><span class="p">)</span>
        
        <span class="c1"># Make sure parameters don&#39;t have leads/lags</span>
        <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">par_leads</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">par_leads</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                <span class="n">k</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">x</span>
                <span class="n">new_var</span> <span class="o">=</span> <span class="n">k</span>
                <span class="n">old_var</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;(+&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">eq</span><span class="p">)</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
                <span class="n">eq</span> <span class="o">=</span> <span class="n">replaceEq</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span><span class="n">arr</span><span class="p">,</span><span class="n">var</span><span class="o">=</span><span class="n">k</span><span class="p">,</span><span class="n">old_var</span><span class="o">=</span><span class="n">old_var</span><span class="p">,</span><span class="n">new_var</span><span class="o">=</span><span class="n">new_var</span><span class="p">)</span>
                <span class="n">old_var</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>  
                <span class="c1">#eq = eq.replace(old_var,new_var) </span>
                <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">eq</span><span class="p">)</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
                <span class="n">eq</span> <span class="o">=</span> <span class="n">replaceEq</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span><span class="n">arr</span><span class="p">,</span><span class="n">var</span><span class="o">=</span><span class="n">k</span><span class="p">,</span><span class="n">old_var</span><span class="o">=</span><span class="n">old_var</span><span class="p">,</span><span class="n">new_var</span><span class="o">=</span><span class="n">new_var</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">par_lags</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">par_lags</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                <span class="n">k</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">x</span>  
                <span class="n">new_var</span> <span class="o">=</span> <span class="n">k</span>
                <span class="n">old_var</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;(-&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="n">j</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">eq</span><span class="p">)</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
                <span class="n">eq</span> <span class="o">=</span> <span class="n">replaceEq</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span><span class="n">arr</span><span class="p">,</span><span class="n">var</span><span class="o">=</span><span class="n">k</span><span class="p">,</span><span class="n">old_var</span><span class="o">=</span><span class="n">old_var</span><span class="p">,</span><span class="n">new_var</span><span class="o">=</span><span class="n">new_var</span><span class="p">)</span>
            
        <span class="n">mod_eqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">eq</span><span class="p">)</span>

    <span class="n">map_new_endog</span> <span class="o">=</span> <span class="p">{}</span>    
    <span class="c1"># Add new variables</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">leads</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">v</span><span class="p">):</span>
            <span class="n">var</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;_plus_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">new_endog</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">map_new_endog</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">map_new_endog</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">map_new_endog</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
            
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">lags</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="n">v</span><span class="p">):</span>
            <span class="n">var</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;_minus_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">new_endog</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">map_new_endog</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">map_new_endog</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">map_new_endog</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
    
    <span class="n">new_endog</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">new_endog</span><span class="p">)),</span><span class="n">key</span><span class="o">=</span><span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">)</span>
                    
    <span class="c1"># Add new equations</span>
    <span class="n">new_eqs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">leads</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">v</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">var1</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;(+1)&quot;</span>
                <span class="n">var2</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;_plus_1&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">var1</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;_plus_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;(+1)&quot;</span>
                <span class="n">var2</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;_plus_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
            <span class="n">new_eqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var2</span> <span class="o">+</span> <span class="s2">&quot; = &quot;</span> <span class="o">+</span> <span class="n">var1</span><span class="p">)</span>
                
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">lags</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="n">v</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">var1</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;(-1)&quot;</span>
                <span class="n">var2</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;_minus_1&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">var1</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;_minus_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;(-1)&quot;</span>
                <span class="n">var2</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;_minus_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">i</span><span class="p">)</span>
            <span class="n">new_eqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var2</span> <span class="o">+</span> <span class="s2">&quot; = &quot;</span> <span class="o">+</span> <span class="n">var1</span><span class="p">)</span>
    
    <span class="n">new_eqs</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">new_eqs</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">)</span>
    <span class="n">mod_eqs</span> <span class="o">=</span> <span class="n">mod_eqs</span> <span class="o">+</span> <span class="n">new_eqs</span> 
            
    <span class="k">return</span> <span class="n">mod_eqs</span><span class="p">,</span> <span class="n">new_endog</span><span class="p">,</span> <span class="n">map_new_endog</span><span class="p">,</span> <span class="n">leads</span><span class="p">,</span> <span class="n">lags</span></div>



<div class="viewcode-block" id="modifyEquations">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.modifyEquations">[docs]</a>
<span class="k">def</span> <span class="nf">modifyEquations</span><span class="p">(</span><span class="n">eqs</span><span class="p">,</span><span class="n">variables</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Modify equations so that the new equations do not have lags, but only leads variables.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param eqs: List of equations.</span>
<span class="sd">        :type eqs: list.</span>
<span class="sd">        :param eqs: List of variables.</span>
<span class="sd">        :type eqs: list.</span>
<span class="sd">        :return: New equations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">delimiters</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;^&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span>
    <span class="n">regexPattern</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">,</span> <span class="n">delimiters</span><span class="p">))</span>
    <span class="n">delimiters_</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;^&quot;</span> <span class="p">,</span> <span class="s2">&quot;=&quot;</span>
    <span class="n">regexPattern_</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">,</span> <span class="n">delimiters_</span><span class="p">))</span>
    
    <span class="n">mod_eqs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">eq</span> <span class="ow">in</span> <span class="n">eqs</span><span class="p">:</span>
        <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">eq_</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;(1)&quot;</span><span class="p">,</span><span class="s2">&quot;(+1)&quot;</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern_</span><span class="p">,</span><span class="n">eq_</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
        <span class="n">max_lead</span><span class="p">,</span><span class="n">min_lag</span><span class="p">,</span><span class="n">var_lead</span><span class="p">,</span><span class="n">var_lag</span><span class="p">,</span><span class="n">mp</span> <span class="o">=</span> <span class="n">getMaxLeadAndLag</span><span class="p">(</span><span class="n">eq</span><span class="o">=</span><span class="n">eq_</span><span class="p">,</span><span class="n">arr</span><span class="o">=</span><span class="n">arr</span><span class="p">,</span><span class="n">variables</span><span class="o">=</span><span class="n">variables</span><span class="p">,</span><span class="n">var_lead</span><span class="o">=</span><span class="p">{},</span><span class="n">var_lag</span><span class="o">=</span><span class="p">{})</span>
        <span class="k">if</span> <span class="n">min_lag</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">mod_eqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">eq</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_eq</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_eq</span><span class="p">)</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">new_eq</span><span class="p">)</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\((\s?[+-]?\d+\s?)\)&quot;</span><span class="p">,</span><span class="n">new_eq</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">match</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
                <span class="n">m</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="n">min_lag</span>
                <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
                    <span class="n">old_var</span> <span class="o">=</span> <span class="n">v</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="n">e</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
                    <span class="n">new_var</span> <span class="o">=</span> <span class="n">v</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
                    <span class="c1"># Replace lead/lag variables </span>
                    <span class="k">if</span> <span class="n">old_var</span> <span class="ow">in</span> <span class="n">new_eq</span><span class="p">:</span>
                        <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">new_eq</span><span class="p">)</span>
                        <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
                        <span class="n">new_eq</span> <span class="o">=</span> <span class="n">replaceEq</span><span class="p">(</span><span class="n">new_eq</span><span class="p">,</span><span class="n">arr</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="n">old_var</span><span class="p">,</span><span class="n">new_var</span><span class="p">)</span>
                        
            <span class="c1"># Replace variables that are not leads/lags variables</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>  
                <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
                    <span class="n">i</span> <span class="o">=</span> <span class="n">new_eq</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
                    <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">size</span><span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">new_eq</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span>
                        <span class="n">new_eq</span> <span class="o">=</span> <span class="n">new_eq</span><span class="p">[:</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="n">min_lag</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span> <span class="o">+</span> <span class="n">new_eq</span><span class="p">[</span><span class="n">j</span><span class="p">:]</span>
                        
            <span class="c1"># Replace variables that are not leads/lags variables</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">eq</span><span class="p">:</span>
                    <span class="n">new_eq</span> <span class="o">=</span> <span class="n">new_eq</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="s2">&quot;(0)&quot;</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                        
            <span class="n">mod_eqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_eq</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">mod_eqs</span></div>



<div class="viewcode-block" id="getMaxLeadAndLag">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getMaxLeadAndLag">[docs]</a>
<span class="k">def</span> <span class="nf">getMaxLeadAndLag</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span><span class="n">arr</span><span class="p">,</span><span class="n">variables</span><span class="p">,</span><span class="n">var_lead</span><span class="o">=</span><span class="p">{},</span><span class="n">var_lag</span><span class="o">=</span><span class="p">{},</span><span class="n">m</span><span class="o">=</span><span class="p">{},</span><span class="n">max_lead</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">min_lag</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">tagBeg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">tagEnd</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return leads and lags and a map of leads and lags of variables in equation.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param eq: Equation.</span>
<span class="sd">        :type eq: str.</span>
<span class="sd">        :param var_lead: Lead variables.</span>
<span class="sd">        :type var_lead: Dictionary.</span>
<span class="sd">        :param var_lag: Lag variables.</span>
<span class="sd">        :type var_lag: Dictionary.</span>
<span class="sd">        :param m: Dictionary of variables frequencies in equations.</span>
<span class="sd">        :type m: Dictionary.</span>
<span class="sd">        :param max_lead: Initial max lead.</span>
<span class="sd">        :type max_lead: int.</span>
<span class="sd">        :param min_lag: Initial min lag.</span>
<span class="sd">        :type min_lag: int.</span>
<span class="sd">        :param variables: List of variables.</span>
<span class="sd">        :type var_lag: list.</span>
<span class="sd">        :return: Max lead and minimum lag of variables in equation.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">tagBeg</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">tagEnd</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tagBeg</span> <span class="o">=</span> <span class="s2">&quot;(&quot;</span>
        <span class="n">tagEnd</span> <span class="o">=</span> <span class="s2">&quot;)&quot;</span>
        
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="n">ind</span><span class="p">:]</span>
            <span class="k">if</span> <span class="n">eq</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="n">tagBeg</span><span class="p">):</span>
                <span class="n">ind1</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind1</span><span class="p">:]</span>
                <span class="n">ind2</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">tagEnd</span><span class="p">)</span>
                <span class="n">e</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[:</span><span class="n">ind2</span><span class="p">]</span>
                <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind2</span><span class="p">:]</span>
                <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[-+]?\d+&quot;</span><span class="p">,</span><span class="n">e</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">var</span> <span class="o">=</span> <span class="n">v</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="n">e</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
                    <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">m</span><span class="p">:</span>
                        <span class="n">m</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">m</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">var_lead</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="n">var_lead</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">var_lead</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">elif</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">var_lag</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="n">var_lag</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">var_lag</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">):]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">):]</span>
            
        <span class="n">max_lead</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_lead</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
        <span class="n">min_lag</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">min_lag</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">max_lead</span><span class="p">,</span><span class="n">min_lag</span><span class="p">,</span><span class="n">var_lead</span><span class="p">,</span><span class="n">var_lag</span><span class="p">,</span><span class="n">m</span></div>



<div class="viewcode-block" id="getMaxLeadsLags">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getMaxLeadsLags">[docs]</a>
<span class="k">def</span> <span class="nf">getMaxLeadsLags</span><span class="p">(</span><span class="n">eqs</span><span class="p">,</span><span class="n">variables</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return maximum leads and minimum lags of variables in equations.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param eqs: Model equations.</span>
<span class="sd">        :type eqs: list.</span>
<span class="sd">        :param variables: List of variables.</span>
<span class="sd">        :type variables: list.</span>
<span class="sd">        :return: Maximum leads and minimum lags of equations</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">var_lead</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">var_lag</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">m</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">max_lead</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">min_lag</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="n">delimiters</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;^&quot;</span> <span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span>
    <span class="n">regexPattern</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">,</span> <span class="n">delimiters</span><span class="p">))</span>
    
    <span class="k">for</span> <span class="n">eq</span> <span class="ow">in</span> <span class="n">eqs</span><span class="p">:</span>  
        <span class="n">eq_</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;(1)&quot;</span><span class="p">,</span><span class="s2">&quot;(+1)&quot;</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">eq_</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
        <span class="n">max_lead</span><span class="p">,</span><span class="n">min_lag</span><span class="p">,</span><span class="n">var_lead</span><span class="p">,</span><span class="n">var_lag</span><span class="p">,</span><span class="n">m</span> <span class="o">=</span> <span class="n">getMaxLeadAndLag</span><span class="p">(</span><span class="n">eq_</span><span class="p">,</span><span class="n">arr</span><span class="p">,</span><span class="n">variables</span><span class="p">,</span><span class="n">var_lead</span><span class="p">,</span><span class="n">var_lag</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">max_lead</span><span class="p">,</span><span class="n">min_lag</span><span class="p">)</span>
      
    <span class="n">np_eqs</span> <span class="o">=</span> <span class="p">[]</span>    
    <span class="n">np_var</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">eq</span> <span class="ow">in</span> <span class="n">eqs</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;=&#39;</span> <span class="ow">in</span> <span class="n">eq</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[:</span><span class="n">ind</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">left</span> <span class="ow">in</span> <span class="n">np_var</span> <span class="ow">and</span> <span class="n">right</span> <span class="ow">in</span> <span class="n">var_lead</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">np_eqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">eq</span><span class="p">)</span>
        
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">var_lead</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">eq</span> <span class="ow">in</span> <span class="n">np_eqs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">eq</span><span class="p">:</span>
               <span class="n">var_lead</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
               
    <span class="c1"># n_fwd_looking_var = 0</span>
    <span class="c1"># for k in var_lead:</span>
    <span class="c1">#     v = var_lead[k]</span>
    <span class="c1">#     ind1 = k.find(&#39;(&#39;)</span>
    <span class="c1">#     ind2 = k.find(&#39;)&#39;)</span>
    <span class="c1">#     n = k[1+ind1:ind2]</span>
    <span class="c1">#     if v &gt; 0:</span>
    <span class="c1">#         n_fwd_looking_var += 1</span>
            
    <span class="c1"># n_bkwd_looking_var = 0</span>
    <span class="c1"># for k in var_lag:</span>
    <span class="c1">#     v = var_lag[k]</span>
    <span class="c1">#     ind1 = k.find(&#39;(&#39;)</span>
    <span class="c1">#     ind2 = k.find(&#39;)&#39;)</span>
    <span class="c1">#     n = k[1+ind1:ind2]</span>
    <span class="c1">#     if v &gt; 0:</span>
    <span class="c1">#         n_bkwd_looking_var += 1</span>
            
    <span class="n">n_fwd_looking_var</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">var_lead</span><span class="p">)</span>
    <span class="n">n_bkwd_looking_var</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">var_lag</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="n">max_lead</span><span class="p">,</span><span class="n">min_lag</span><span class="p">,</span><span class="n">n_fwd_looking_var</span><span class="p">,</span><span class="n">n_bkwd_looking_var</span><span class="p">,</span><span class="n">var_lead</span><span class="p">,</span><span class="n">var_lag</span></div>

    

<div class="viewcode-block" id="getStateVariables">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getStateVariables">[docs]</a>
<span class="k">def</span> <span class="nf">getStateVariables</span><span class="p">(</span><span class="n">eqs</span><span class="p">,</span><span class="n">variables</span><span class="p">,</span><span class="n">shocks</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">min_lag</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return state variables and equations ordering numbers that these state variables belong to.</span>
<span class="sd">    </span>
<span class="sd">    State variables are variables that appear in equaions at the previous period and </span>
<span class="sd">    possibly at the current period.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param eqs: Model equations.</span>
<span class="sd">        :type eqs: list.</span>
<span class="sd">        :param variables: List of variables.</span>
<span class="sd">        :type variables: list.</span>
<span class="sd">        :param shocks: List of shock variables.</span>
<span class="sd">        :type shocks: list.</span>
<span class="sd">        :param min_lag: Maximum lag of endogenous variables.</span>
<span class="sd">        :type min_lag: int.</span>
<span class="sd">        :return: State variables and equations numbers.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">state_vars</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">eqs_number</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">delimiters</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;^&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span>
    <span class="n">regexPattern</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">,</span> <span class="n">delimiters</span><span class="p">))</span>
    <span class="n">delimiters_</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;^&quot;</span> <span class="p">,</span> <span class="s2">&quot;=&quot;</span>
    <span class="n">regexPattern_</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">,</span> <span class="n">delimiters_</span><span class="p">))</span>
    
        
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">eq</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eqs</span><span class="p">):</span>
        <span class="c1"># Get lagged variables </span>
        <span class="n">eq_</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;(1)&quot;</span><span class="p">,</span><span class="s2">&quot;(+1)&quot;</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern_</span><span class="p">,</span><span class="n">eq_</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
        <span class="n">lead_var</span><span class="p">,</span><span class="n">lag_var</span> <span class="o">=</span> <span class="n">getMaxLeadAndLag</span><span class="p">(</span><span class="n">eq_</span><span class="p">,</span><span class="n">arr</span><span class="p">,</span><span class="n">variables</span><span class="p">,</span><span class="n">var_lead</span><span class="o">=</span><span class="p">{},</span><span class="n">var_lag</span><span class="o">=</span><span class="p">{})[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">lead_variables</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">lead_var</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">lag_variables</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">lag_var</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">lead_variables</span><span class="p">:</span>
            <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">lag_variables</span><span class="p">:</span>
            <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">eq</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
        <span class="n">b</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">b</span><span class="p">:</span>
            <span class="c1">#print(1+i,lag_variables)</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">lag_variables</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">min_lag</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="s2">&quot;(&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">min_lag</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;)&quot;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">)</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:</span><span class="n">ind</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">state_vars</span><span class="p">:</span>
                            <span class="n">state_vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">eqs_number</span><span class="p">:</span>
                            <span class="n">eqs_number</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                   
    <span class="k">return</span> <span class="n">state_vars</span><span class="p">,</span> <span class="n">eqs_number</span></div>

    

<div class="viewcode-block" id="getVariablesRowsAndColumns">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getVariablesRowsAndColumns">[docs]</a>
<span class="k">def</span> <span class="nf">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return equations rows and columns of variables.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param lead_lags: Variables leads and lags.</span>
<span class="sd">        :type lead_lags: list.</span>
<span class="sd">        :param rows: List of rows.</span>
<span class="sd">        :type rows: list.</span>
<span class="sd">        :param columns: List of columns.</span>
<span class="sd">        :type columns: list.</span>
<span class="sd">        :param include: Comma separated list of variables to include.</span>
<span class="sd">        :type include: str.</span>
<span class="sd">        :param exclude: Comma separated list of variables to exclude.</span>
<span class="sd">        :type exclude: str.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Rows</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">Columns</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">include</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">includeList</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="s1">&#39;,&#39;</span> <span class="ow">in</span> <span class="n">include</span><span class="p">:</span>
        <span class="n">includeList</span> <span class="o">=</span> <span class="n">include</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">includeList</span> <span class="o">=</span> <span class="p">[</span><span class="n">include</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">excludeList</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="s1">&#39;,&#39;</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
        <span class="n">excludeList</span> <span class="o">=</span> <span class="n">exclude</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">excludeList</span> <span class="o">=</span> <span class="p">[</span><span class="n">exclude</span><span class="p">]</span>
    
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">rows</span><span class="p">):</span>
        <span class="n">LL</span> <span class="o">=</span> <span class="p">[</span><span class="n">lead_lags</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="o">==</span><span class="n">row</span><span class="p">]</span>
        <span class="n">R</span> <span class="o">=</span> <span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="o">==</span><span class="n">row</span><span class="p">]</span>
        <span class="n">C</span> <span class="o">=</span> <span class="p">[</span><span class="n">columns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="o">==</span><span class="n">row</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">include</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">Rows</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>
            <span class="n">Columns</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">include</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">LL</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">includeList</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">Rows</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">R</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ind</span><span class="p">])</span>
                <span class="n">Columns</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">C</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ind</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">include</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">LL</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">excludeList</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">Rows</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">R</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ind</span><span class="p">])</span>
                <span class="n">Columns</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">C</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ind</span><span class="p">])</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">include</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">LL</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">includeList</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">excludeList</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">Rows</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">R</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ind</span><span class="p">])</span>
                <span class="n">Columns</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">C</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ind</span><span class="p">])</span>
                
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">Rows</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">Columns</span><span class="p">))</span></div>

    

<div class="viewcode-block" id="getIncidenceMap">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getIncidenceMap">[docs]</a>
<span class="k">def</span> <span class="nf">getIncidenceMap</span><span class="p">(</span><span class="n">endog</span><span class="p">,</span><span class="n">model</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">eqs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">tagBeg</span><span class="o">=</span><span class="s2">&quot;(&quot;</span><span class="p">,</span><span class="n">tagEnd</span><span class="o">=</span><span class="s2">&quot;)&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get maps of variables rows and columns.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param model: Model.</span>
<span class="sd">        :type model: `Model` object.</span>
<span class="sd">        :param endog: List of endogenous variables.</span>
<span class="sd">        :type endog: list.</span>
<span class="sd">        :param eqs: List of equations.</span>
<span class="sd">        :type eqs: list.</span>
<span class="sd">        :param tagBeg: The beginning tag of lead/lag variable.</span>
<span class="sd">        :type tagBeg: str.</span>
<span class="sd">        :param tagEnd: The ending tag of lead/lag variable.</span>
<span class="sd">        :type tagEnd: str.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">eqs</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">functions_src</span><span class="p">[</span><span class="s2">&quot;f_dynamic_txt&quot;</span><span class="p">]</span>
        <span class="n">eqs</span> <span class="o">=</span> <span class="n">eqs</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;__m1_&quot;</span><span class="p">,</span><span class="s2">&quot;(-1)&quot;</span><span class="p">)</span>
        <span class="n">eqs</span> <span class="o">=</span> <span class="n">eqs</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;__p1_&quot;</span><span class="p">,</span><span class="s2">&quot;(1)&quot;</span><span class="p">)</span>
        <span class="n">eqs</span> <span class="o">=</span> <span class="n">eqs</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">,</span><span class="s2">&quot;(0)&quot;</span><span class="p">)</span>
        <span class="n">eqs</span> <span class="o">=</span> <span class="n">eqs</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">eqs</span> <span class="o">=</span> <span class="n">eqs</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        
    <span class="n">delimiters</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;^&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span>
    <span class="n">regexPattern</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">,</span> <span class="n">delimiters</span><span class="p">))</span>
      
    <span class="n">m</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">eqs</span><span class="p">)</span>
            
    <span class="k">for</span> <span class="n">row</span><span class="p">,</span><span class="n">eqtn</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eqs</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;=&quot;</span> <span class="ow">in</span> <span class="n">eqtn</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">eqtn</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">)</span>
            <span class="n">eq</span> <span class="o">=</span> <span class="n">eqtn</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">i</span><span class="p">:]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">eq</span> <span class="o">=</span> <span class="n">eqtn</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">eq</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[-+]?\d+&quot;</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="c1"># skip integer tokens</span>
            <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">endog</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                    <span class="n">eq</span>  <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="n">ind</span><span class="p">:]</span>
                    <span class="n">col</span> <span class="o">=</span> <span class="n">endog</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">eq</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="n">tagBeg</span><span class="p">):</span>
                        <span class="n">ind1</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="n">tagBeg</span><span class="p">)</span>
                        <span class="n">ind2</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">tagEnd</span><span class="p">,</span><span class="n">ind1</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">ind1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">ind2</span> <span class="o">&gt;</span> <span class="n">ind1</span><span class="p">:</span>
                            <span class="n">lead_lag</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">+</span><span class="n">ind1</span><span class="p">:</span><span class="n">ind2</span><span class="p">]</span>
                            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[-+]?\d+&quot;</span><span class="p">,</span><span class="n">lead_lag</span><span class="p">)</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="k">try</span><span class="p">:</span>
                                    <span class="n">i_lead_lag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lead_lag</span><span class="p">)</span>
                                    <span class="k">if</span> <span class="n">i_lead_lag</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                        <span class="n">col</span> <span class="o">+=</span> <span class="n">n</span>
                                    <span class="k">elif</span> <span class="n">i_lead_lag</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                                        <span class="n">col</span> <span class="o">+=</span> <span class="mi">2</span><span class="o">*</span><span class="n">n</span>
                                    <span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">i_lead_lag</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">)</span>
                                    <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">m</span><span class="p">:</span>
                                        <span class="n">m</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                                    <span class="n">m</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                                <span class="k">except</span><span class="p">:</span>
                                    <span class="k">pass</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">)</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">m</span><span class="p">:</span>
                                <span class="n">m</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                            <span class="n">m</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> 
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">m</span><span class="p">:</span>
                            <span class="n">m</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="n">m</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">):]</span>
            
    <span class="k">return</span> <span class="n">m</span></div>

    
    
<div class="viewcode-block" id="getTopology">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getTopology">[docs]</a>
<span class="k">def</span> <span class="nf">getTopology</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="n">tagBeg</span><span class="o">=</span><span class="s2">&quot;(&quot;</span><span class="p">,</span><span class="n">tagEnd</span><span class="o">=</span><span class="s2">&quot;)&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get maps of variables rows and columns.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param model: The Model object.</span>
<span class="sd">        :type model: instance of class Model.</span>
<span class="sd">        :param tagBeg: The beginning tag of lead/lag variable.</span>
<span class="sd">        :type tagBeg: str.</span>
<span class="sd">        :param tagEnd: The ending tag of lead/lag variable.</span>
<span class="sd">        :type tagEnd: str.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">model</span><span class="o">.</span><span class="n">Topology</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">mp</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Topology</span>
    <span class="k">else</span><span class="p">:</span>    
        <span class="n">mp</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">endog</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">symbols</span><span class="p">[</span><span class="s2">&quot;variables&quot;</span><span class="p">]</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">getIncidenceMap</span><span class="p">(</span><span class="n">endog</span><span class="o">=</span><span class="n">endog</span><span class="p">,</span><span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span><span class="n">tagBeg</span><span class="o">=</span><span class="n">tagBeg</span><span class="p">,</span><span class="n">tagEnd</span><span class="o">=</span><span class="n">tagEnd</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">m</span><span class="p">:</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
            <span class="n">lst</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;+</span><span class="si">{0}</span><span class="s2">:</span><span class="si">{1}</span><span class="s2">,</span><span class="si">{2}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">:</span><span class="si">{1}</span><span class="s2">,</span><span class="si">{2}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="n">mp</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">lst</span>    
            
        <span class="n">model</span><span class="o">.</span><span class="n">Topology</span> <span class="o">=</span> <span class="n">mp</span>
        
    <span class="k">return</span> <span class="n">mp</span></div>



<div class="viewcode-block" id="getLeadLagIncidence">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getLeadLagIncidence">[docs]</a>
<span class="k">def</span> <span class="nf">getLeadLagIncidence</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build lead-lag incidence matrix.</span>
<span class="sd">    </span>
<span class="sd">    This matrix has three rows and variable number of columns (it is the same as number variables).</span>
<span class="sd">    The first row lists positions of variables in the model equations for lag variables, the second -</span>
<span class="sd">    position of current variables, and the third - position of lead variables.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        :param model: The Model object.</span>
<span class="sd">        :type model: instance of class Model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">lead_lag_incidence</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">symbols</span><span class="p">[</span><span class="s2">&quot;variables&quot;</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
        <span class="n">lead_lag_incidence</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="n">n</span><span class="p">))</span>
        <span class="n">lead_lag_incidence</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        
        <span class="n">mp</span> <span class="o">=</span> <span class="n">getTopology</span><span class="p">(</span><span class="n">model</span><span class="p">)</span> 
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">mp</span><span class="p">:</span>
            <span class="n">col</span> <span class="o">=</span> <span class="n">variables</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">mp</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                <span class="n">lead_lag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                <span class="n">row</span> <span class="o">=</span> <span class="n">lead_lag</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="n">var_col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:])</span>
                <span class="n">lead_lag_incidence</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">var_col</span>
      
        <span class="n">model</span><span class="o">.</span><span class="n">lead_lag_incidence</span> <span class="o">=</span> <span class="n">lead_lag_incidence</span>
        
    <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">lead_lag_incidence</span></div>

    

<div class="viewcode-block" id="getVarRowsIncidence">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getVarRowsIncidence">[docs]</a>
<span class="k">def</span> <span class="nf">getVarRowsIncidence</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return variables rows incidence.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        :param model: The Model object.</span>
<span class="sd">        :type model: instance of class Model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">row_incidence</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="n">mp</span> <span class="o">=</span> <span class="n">getTopology</span><span class="p">(</span><span class="n">model</span><span class="p">)</span> 
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">mp</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">mp</span><span class="p">:</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">mp</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
            <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
            <span class="n">var_row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
            <span class="n">var_col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:])</span> <span class="o">%</span> <span class="n">n</span>
            <span class="k">if</span> <span class="n">var_col</span> <span class="ow">in</span> <span class="n">row_incidence</span><span class="p">:</span>
                <span class="n">rows</span> <span class="o">=</span> <span class="n">row_incidence</span><span class="p">[</span><span class="n">var_col</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">var_row</span><span class="p">]</span>
                <span class="n">row_incidence</span><span class="p">[</span><span class="n">var_col</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">rows</span><span class="p">)))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">row_incidence</span><span class="p">[</span><span class="n">var_col</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">var_row</span><span class="p">]</span>
  
    <span class="n">model</span><span class="o">.</span><span class="n">var_rows_incidence</span> <span class="o">=</span> <span class="n">row_incidence</span>
    <span class="k">return</span> <span class="n">row_incidence</span></div>



<div class="viewcode-block" id="getTopologyOfVariables">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getTopologyOfVariables">[docs]</a>
<span class="k">def</span> <span class="nf">getTopologyOfVariables</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="n">tagBeg</span><span class="o">=</span><span class="s2">&quot;(&quot;</span><span class="p">,</span><span class="n">tagEnd</span><span class="o">=</span><span class="s2">&quot;)&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Define different types of endogenous variables.</span>
<span class="sd">    </span>
<span class="sd">    This function defines topology of variables described in Sebastien Villemot&#39;s paper:</span>
<span class="sd">    &quot;Solving rational expectations model at first order: What Dynare does&quot;</span>
<span class="sd">    Please see https://www.dynare.org/wp-repo/dynarewp002.pdf</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param model: The Model object.</span>
<span class="sd">        :type model: instance of class Model.</span>
<span class="sd">        :param tagBeg: The beginning tag of lead/lag variable.</span>
<span class="sd">        :type tagBeg: str.</span>
<span class="sd">        :param tagEnd: The ending tag of lead/lag variable.</span>
<span class="sd">        :type tagEnd: str.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">state</span> <span class="o">=</span> <span class="p">{};</span> <span class="n">static</span> <span class="o">=</span> <span class="p">{};</span> <span class="n">mixed</span> <span class="o">=</span> <span class="p">{};</span> <span class="n">dynamic</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">backward</span> <span class="o">=</span> <span class="p">{};</span> <span class="n">purely_backward</span> <span class="o">=</span> <span class="p">{};</span> <span class="n">forward</span> <span class="o">=</span> <span class="p">{};</span> <span class="n">purely_forward</span> <span class="o">=</span> <span class="p">{}</span>
        
    <span class="n">mp</span> <span class="o">=</span> <span class="n">getTopology</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="n">tagBeg</span><span class="p">,</span><span class="n">tagEnd</span><span class="p">)</span> 
        
    <span class="n">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">mp</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">mp</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="n">lead_lags</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">rows</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
            <span class="n">lead_lags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
            <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
            <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">]))</span>
            <span class="n">columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]))</span>
        
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">max_lead</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">model</span><span class="o">.</span><span class="n">min_lag</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;-1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s1">&#39;+1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">purely_backward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;-1,0&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;-1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span> <span class="ow">and</span> <span class="s1">&#39;0:&#39;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">backward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;-1,0&#39;</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="s1">&#39;+1&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;+1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s1">&#39;-1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">purely_forward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;+1,0&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;+1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span> <span class="ow">and</span> <span class="s1">&#39;0:&#39;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">forward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;+1,0&#39;</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;+1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span> <span class="ow">and</span> <span class="s1">&#39;-1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">mixed</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;+1,0,-1&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;-1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span> <span class="ow">and</span> <span class="s1">&#39;0:&#39;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">state</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;-1,0&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;0:&#39;</span> <span class="ow">in</span> <span class="n">vals</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s1">&#39;+1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s1">&#39;-1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">static</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dynamic</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
                
        <span class="k">elif</span> <span class="n">model</span><span class="o">.</span><span class="n">max_lead</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">model</span><span class="o">.</span><span class="n">min_lag</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">purely_forward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">forward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="s1">&#39;-1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s1">&#39;0:&#39;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">purely_backward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;-1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">backward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;-1,0&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;-1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span> <span class="ow">and</span> <span class="s1">&#39;0:&#39;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">state</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">mixed</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;-1,0&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;0:&#39;</span> <span class="ow">in</span> <span class="n">vals</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s1">&#39;-1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">static</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dynamic</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;-1,0&#39;</span><span class="p">)</span>
                
        <span class="k">elif</span> <span class="n">model</span><span class="o">.</span><span class="n">max_lead</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">model</span><span class="o">.</span><span class="n">min_lag</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">purely_backward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">backward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="s1">&#39;+1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s1">&#39;0:&#39;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">purely_forward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;+1&#39;</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;+1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">forward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;+1,0&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;+1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span> <span class="ow">and</span> <span class="s1">&#39;0:&#39;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">state</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">mixed</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;+1,0&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;0:&#39;</span> <span class="ow">in</span> <span class="n">vals</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s1">&#39;+1:&#39;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="n">static</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dynamic</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">getVariablesRowsAndColumns</span><span class="p">(</span><span class="n">lead_lags</span><span class="o">=</span><span class="n">lead_lags</span><span class="p">,</span><span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;+1,0&#39;</span><span class="p">)</span>
                
        <span class="k">elif</span> <span class="n">model</span><span class="o">.</span><span class="n">max_lead</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">model</span><span class="o">.</span><span class="n">min_lag</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span> <span class="n">cprint</span><span class="p">(</span><span class="s2">&quot;Model does not have leads or lags... Skipping variables topology definition!&quot;</span><span class="p">,</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>
            <span class="n">purely_backward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span> <span class="n">backward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span> <span class="n">purely_forward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>  <span class="o">=</span> <span class="kc">None</span><span class="p">;</span> <span class="n">forward</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">mixed</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span> <span class="n">state</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span> <span class="n">static</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span> <span class="n">dynamic</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>  <span class="o">=</span> <span class="kc">None</span>
                
    <span class="n">backward</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">purely_backward</span><span class="p">,</span> <span class="o">**</span><span class="n">mixed</span><span class="p">}</span>
    <span class="c1">#forward = {**purely_forward, **mixed}         </span>
          
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">state</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;static&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">static</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;mixed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mixed</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;dynamic&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dynamic</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;backward&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">backward</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;purely_backward&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">purely_backward</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;forward&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">forward</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;purely_forward&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">purely_forward</span>
    
    <span class="k">return</span> <span class="n">model</span></div>

    

<div class="viewcode-block" id="getLeadVariables">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getLeadVariables">[docs]</a>
<span class="k">def</span> <span class="nf">getLeadVariables</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">endog</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a list of lead endogenous variables.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param m: Map of variables names and row and column position in Jacobian matrix.</span>
<span class="sd">        :type m: dict.</span>
<span class="sd">        :param endog: List of endogenous variables.</span>
<span class="sd">        :type endog: list.</span>
<span class="sd">        :return: List of lead endogenous variables.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">lst</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">m</span><span class="p">:</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                
    <span class="n">lst</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">lst</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">lst</span></div>



<div class="viewcode-block" id="getRowsColumns">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getRowsColumns">[docs]</a>
<span class="k">def</span> <span class="nf">getRowsColumns</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span><span class="n">n2</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">exclRows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">exclColumns</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find rows number and columns number for endogenous variables.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param m: Map of variables names and lead/lags values and equations row and column numbers.</span>
<span class="sd">        :type m: dict.</span>
<span class="sd">        :param exclRows: Rows to exclude.</span>
<span class="sd">        :type exclRows: list.</span>
<span class="sd">        :param exclColumns: Columns to exclude.</span>
<span class="sd">        :type exclColumns: list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Columns</span> <span class="o">=</span> <span class="nb">set</span><span class="p">();</span> <span class="n">Rows</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>    
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">m</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">m</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">rows</span><span class="p">,</span><span class="n">columns</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="n">Rows</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">c</span> <span class="o">&gt;=</span> <span class="n">n1</span> <span class="ow">and</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">n2</span><span class="p">:</span>
                    <span class="n">Columns</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">c</span><span class="o">-</span><span class="n">n1</span><span class="p">)</span>
        
    <span class="k">if</span> <span class="ow">not</span> <span class="n">exclRows</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">Rows</span> <span class="o">-=</span> <span class="nb">set</span><span class="p">(</span><span class="n">exclRows</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">exclColumns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">Columns</span> <span class="o">-=</span> <span class="nb">set</span><span class="p">(</span><span class="n">exclColumns</span><span class="p">)</span>
        
    <span class="n">Rows</span>    <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Rows</span><span class="p">);</span>    <span class="n">Rows</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="n">Columns</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Columns</span><span class="p">);</span> <span class="n">Columns</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    
    <span class="k">return</span> <span class="n">Rows</span><span class="p">,</span><span class="n">Columns</span></div>


    
<div class="viewcode-block" id="getColumns">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getColumns">[docs]</a>
<span class="k">def</span> <span class="nf">getColumns</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">exclRows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">exclColumns</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find columns number for endogenous variables.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param m: Map of variables names and lead/lags values and equations row and column numbers.</span>
<span class="sd">        :type m: dict.</span>
<span class="sd">        :param exclRows: Rows to exclude.</span>
<span class="sd">        :type exclRows: list.</span>
<span class="sd">        :param exclColumns: Columns to exclude.</span>
<span class="sd">        :type exclColumns: list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mp</span> <span class="o">=</span> <span class="p">{}</span>  
    <span class="n">excl_rows</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">exclRows</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">exclRows</span>
    <span class="n">excl_columns</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">exclColumns</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">exclColumns</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">m</span><span class="p">:</span>
        <span class="n">rows</span><span class="p">,</span><span class="n">columns</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">r</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span><span class="n">columns</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">excl_rows</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">excl_columns</span> <span class="ow">and</span> <span class="n">c</span> <span class="o">&gt;=</span> <span class="n">n</span> <span class="ow">and</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">mp</span><span class="p">:</span>
                    <span class="n">mp</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="o">-</span><span class="n">n</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">mp</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">-</span><span class="n">n</span><span class="p">]</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">positions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ind</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
            <span class="n">positions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">mp</span><span class="p">,</span><span class="n">positions</span></div>



<div class="viewcode-block" id="topology">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.topology">[docs]</a>
<span class="k">def</span> <span class="nf">topology</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find rows number and columns number for different types of endogenous variables.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param model: The Model object.</span>
<span class="sd">        :type model: instance of class Model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">getTopologyOfVariables</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
    <span class="n">static</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;static&quot;</span><span class="p">]</span> 
    <span class="n">state</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span>
    <span class="n">dynamic</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;dynamic&quot;</span><span class="p">]</span>
    <span class="n">mixed</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;mixed&quot;</span><span class="p">]</span>
    <span class="n">backward</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;backward&quot;</span><span class="p">]</span> 
    <span class="n">purely_backward</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;purely_backward&quot;</span><span class="p">]</span>
    <span class="n">forward</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;forward&quot;</span><span class="p">]</span>
    <span class="n">purely_forward</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;purely_forward&quot;</span><span class="p">]</span>
    <span class="n">variables</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">symbols</span><span class="p">[</span><span class="s2">&quot;variables&quot;</span><span class="p">]</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
    
    <span class="c1">###  ------------------------------- Find rows and columns of:</span>
    <span class="c1"># static endogenous variables</span>
    <span class="n">static_rows</span><span class="p">,</span><span class="n">static_columns</span> <span class="o">=</span> <span class="n">getRowsColumns</span><span class="p">(</span><span class="n">n1</span><span class="o">=</span><span class="n">n</span><span class="p">,</span><span class="n">n2</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="n">static</span><span class="p">)</span>
    <span class="c1"># state endogenous variables</span>
    <span class="n">state_rows</span><span class="p">,</span><span class="n">state_columns</span> <span class="o">=</span> <span class="n">getRowsColumns</span><span class="p">(</span><span class="n">n1</span><span class="o">=</span><span class="n">n</span><span class="p">,</span><span class="n">n2</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="n">state</span><span class="p">,</span><span class="n">exclRows</span><span class="o">=</span><span class="n">static_rows</span><span class="p">,</span><span class="n">exclColumns</span><span class="o">=</span><span class="n">static_columns</span><span class="p">)</span>
    <span class="c1"># dynamic endogenous variables</span>
    <span class="n">dynamic_rows</span><span class="p">,</span><span class="n">dynamic_columns</span> <span class="o">=</span> <span class="n">getRowsColumns</span><span class="p">(</span><span class="n">n1</span><span class="o">=</span><span class="n">n</span><span class="p">,</span><span class="n">n2</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="n">dynamic</span><span class="p">,</span><span class="n">exclRows</span><span class="o">=</span><span class="n">static_rows</span><span class="p">,</span><span class="n">exclColumns</span><span class="o">=</span><span class="n">static_columns</span><span class="p">)</span>
    <span class="c1"># mixed endogenous variables</span>
    <span class="n">mixed_rows</span><span class="p">,</span><span class="n">mixed_columns</span> <span class="o">=</span> <span class="n">getRowsColumns</span><span class="p">(</span><span class="n">n1</span><span class="o">=</span><span class="n">n</span><span class="p">,</span><span class="n">n2</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="n">mixed</span><span class="p">,</span><span class="n">exclRows</span><span class="o">=</span><span class="n">static_rows</span><span class="p">,</span><span class="n">exclColumns</span><span class="o">=</span><span class="n">static_columns</span><span class="p">)</span>
    <span class="c1"># backward endogenous variables</span>
    <span class="n">backward_rows</span><span class="p">,</span><span class="n">backward_columns</span> <span class="o">=</span> <span class="n">getRowsColumns</span><span class="p">(</span><span class="n">n1</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="p">,</span><span class="n">n2</span><span class="o">=</span><span class="mi">3</span><span class="o">*</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="n">backward</span><span class="p">,</span><span class="n">exclRows</span><span class="o">=</span><span class="n">static_rows</span><span class="p">,</span><span class="n">exclColumns</span><span class="o">=</span><span class="n">static_columns</span><span class="p">)</span>
    <span class="c1"># purely backward endogenous variables</span>
    <span class="n">purely_backward_rows</span><span class="p">,</span><span class="n">purely_backward_columns</span> <span class="o">=</span> <span class="n">getRowsColumns</span><span class="p">(</span><span class="n">n1</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="p">,</span><span class="n">n2</span><span class="o">=</span><span class="mi">3</span><span class="o">*</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="n">purely_backward</span><span class="p">,</span><span class="n">exclRows</span><span class="o">=</span><span class="n">static_rows</span><span class="p">,</span><span class="n">exclColumns</span><span class="o">=</span><span class="n">static_columns</span><span class="p">)</span>
    <span class="c1"># foreward endogenous variables</span>
    <span class="n">forward_rows</span><span class="p">,</span><span class="n">forward_columns</span> <span class="o">=</span> <span class="n">getRowsColumns</span><span class="p">(</span><span class="n">n1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">n2</span><span class="o">=</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="n">forward</span><span class="p">,</span><span class="n">exclRows</span><span class="o">=</span><span class="n">static_rows</span><span class="p">,</span><span class="n">exclColumns</span><span class="o">=</span><span class="n">static_columns</span><span class="p">)</span>
    <span class="c1"># purely foreward endogenous variables</span>
    <span class="n">purely_forward_rows</span><span class="p">,</span><span class="n">purely_forward_columns</span> <span class="o">=</span> <span class="n">getRowsColumns</span><span class="p">(</span><span class="n">n1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">n2</span><span class="o">=</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="n">purely_forward</span><span class="p">,</span><span class="n">exclRows</span><span class="o">=</span><span class="n">static_rows</span><span class="p">,</span><span class="n">exclColumns</span><span class="o">=</span><span class="n">static_columns</span><span class="p">)</span>
    
    <span class="c1">#model.n_fwd_looking_var = len(forward_rows)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;static_rows&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">static_rows</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;state_rows&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">state_rows</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;state_columns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">state_columns</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;static_rows&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">static_rows</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;static_columns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">static_columns</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;dynamic_rows&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dynamic_rows</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;dynamic_columns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dynamic_columns</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;forward_rows&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">forward_rows</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;forward_columns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">forward_columns</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;purely_forward_rows&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">purely_forward_rows</span>   
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;purely_forward_columns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">purely_forward_columns</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;backward_rows&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">backward_rows</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;backward_columns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">backward_columns</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;purely_backward_columns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">purely_backward_columns</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;mixed_columns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mixed_columns</span>
    <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;mixed_rows&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mixed_rows</span>
    
    <span class="n">debug</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">snowdrop.src.misc.termcolor</span> <span class="kn">import</span> <span class="n">cprint</span>
        <span class="n">cprint</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">cprint</span><span class="p">(</span><span class="s1">&#39;state_columns: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">state_columns</span><span class="p">),</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
        <span class="n">cprint</span><span class="p">(</span><span class="s1">&#39;static_columns: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">static_columns</span><span class="p">),</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
        <span class="n">cprint</span><span class="p">(</span><span class="s1">&#39;static_rows: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">static_rows</span><span class="p">),</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
        <span class="n">cprint</span><span class="p">(</span><span class="s1">&#39;dynamic_columns: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dynamic_columns</span><span class="p">),</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
        <span class="n">cprint</span><span class="p">(</span><span class="s1">&#39;forward_columns: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">forward_columns</span><span class="p">),</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
        <span class="n">cprint</span><span class="p">(</span><span class="s1">&#39;purely_forward_columns: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">purely_forward_columns</span><span class="p">),</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
        <span class="n">cprint</span><span class="p">(</span><span class="s1">&#39;backward_columns: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">backward_columns</span><span class="p">),</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
        <span class="n">cprint</span><span class="p">(</span><span class="s1">&#39;purely_backward_columns: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">purely_backward_columns</span><span class="p">),</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
        <span class="n">cprint</span><span class="p">(</span><span class="s1">&#39;mixed_columns: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mixed_columns</span><span class="p">),</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
              
    <span class="k">return</span> <span class="n">model</span>             </div>

               
 
<div class="viewcode-block" id="getForwardBackwardRowsColumns">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getForwardBackwardRowsColumns">[docs]</a>
<span class="k">def</span> <span class="nf">getForwardBackwardRowsColumns</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return row and column numbers of forward and backward endogenous variables.&quot;&quot;&quot;</span> 
    <span class="n">var</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">symbols</span><span class="p">[</span><span class="s2">&quot;variables&quot;</span><span class="p">]</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
      
    <span class="n">rowsForward</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;forward_rows&quot;</span><span class="p">]</span>
    <span class="n">colsForward</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">topology</span><span class="p">[</span><span class="s2">&quot;forward_columns&quot;</span><span class="p">]</span>
    <span class="n">rowsBackward</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rowsForward</span><span class="p">]</span>
    <span class="n">colsBackward</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">colsForward</span><span class="p">]</span>  
    
    <span class="k">return</span> <span class="n">rowsBackward</span><span class="p">,</span><span class="n">colsBackward</span><span class="p">,</span><span class="n">rowsForward</span><span class="p">,</span><span class="n">colsForward</span></div>



<div class="viewcode-block" id="getStableUnstableVariables">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getStableUnstableVariables">[docs]</a>
<span class="k">def</span> <span class="nf">getStableUnstableVariables</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return stable and unstable endogenous variables.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param model: Model object.</span>
<span class="sd">        :type model: Model.</span>
<span class="sd">        :returns: Array of starting values</span>
<span class="sd">    &quot;&quot;&quot;</span> 
    <span class="n">unstableColumns</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">unstableRows</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">var_unstable</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">variables</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">symbols</span><span class="p">[</span><span class="s2">&quot;variables&quot;</span><span class="p">]</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
    <span class="n">mp</span> <span class="o">=</span> <span class="n">getTopology</span><span class="p">(</span><span class="n">model</span><span class="p">)</span> 
    
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">mp</span><span class="p">:</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">mp</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;+&quot;</span> <span class="ow">in</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                <span class="n">lead</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">lead</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                    <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:])</span> <span class="o">%</span> <span class="n">n</span>
                    <span class="n">unstableRows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
                    <span class="n">unstableColumns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
                    <span class="n">var_unstable</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
    
    <span class="n">unstableColumns</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">unstableColumns</span><span class="p">)</span>
    <span class="n">unstableRows</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">unstableRows</span><span class="p">)</span>
    <span class="n">stableColumns</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">unstableColumns</span><span class="p">]</span>   
    <span class="n">stableRows</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">unstableRows</span><span class="p">]</span>  
    <span class="n">n_stable</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">stableColumns</span><span class="p">)</span>
    <span class="n">n_unstable</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">unstableColumns</span><span class="p">)</span>
    <span class="n">var_stable</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">var_unstable</span><span class="p">]</span>
        
    <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of stable variables </span><span class="si">{0}</span><span class="s2">:&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n_stable</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Stable variables: &quot;</span><span class="p">,</span><span class="nb">sorted</span><span class="p">(</span><span class="n">var_stable</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of unstable variables </span><span class="si">{0}</span><span class="s2">:&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n_unstable</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unstable variables: &quot;</span><span class="p">,</span><span class="nb">sorted</span><span class="p">(</span><span class="n">var_unstable</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">()</span>
    
    <span class="k">return</span> <span class="n">var_stable</span><span class="p">,</span><span class="n">var_unstable</span><span class="p">,</span><span class="n">stableColumns</span><span class="p">,</span><span class="n">stableRows</span><span class="p">,</span><span class="n">unstableColumns</span><span class="p">,</span><span class="n">unstableRows</span></div>



<div class="viewcode-block" id="getVariablesOrder">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getVariablesOrder">[docs]</a>
<span class="k">def</span> <span class="nf">getVariablesOrder</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return stable and unstable endogenous variables.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param model: Model object.</span>
<span class="sd">        :type model: Model.</span>
<span class="sd">        :returns: Array of starting values</span>
<span class="sd">    &quot;&quot;&quot;</span> 
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
    
    <span class="n">variables</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">symbols</span><span class="p">[</span><span class="s2">&quot;variables&quot;</span><span class="p">]</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
    <span class="n">mp</span> <span class="o">=</span> <span class="n">getTopology</span><span class="p">(</span><span class="n">model</span><span class="p">)</span> 
    
    <span class="n">meas_var</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">symbols</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;measurement_variables&quot;</span><span class="p">,[])</span>
    <span class="n">measCol</span><span class="o">=</span><span class="p">[];</span> <span class="n">measRow</span><span class="o">=</span><span class="p">[];</span><span class="n">staticCol</span><span class="o">=</span><span class="p">[];</span> <span class="n">staticRow</span><span class="o">=</span><span class="p">[];</span> <span class="n">backwardCol</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">forwardCol</span><span class="o">=</span><span class="p">[];</span> <span class="n">forwardRow</span><span class="o">=</span><span class="p">[];</span> <span class="n">mixedCol</span><span class="o">=</span><span class="p">[];</span> <span class="n">mixedRow</span><span class="o">=</span><span class="p">[];</span> <span class="n">backwardRow</span><span class="o">=</span><span class="p">[]</span>
    
    <span class="c1">### First pass</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">mp</span><span class="p">:</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">mp</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">meas_var</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                <span class="n">lead_lag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:])</span> <span class="o">%</span> <span class="n">n</span>
                <span class="n">measCol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
                <span class="n">measRow</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="s2">&quot;-&quot;</span> <span class="ow">in</span> <span class="n">x</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s2">&quot;+&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                <span class="n">lead_lag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:])</span> <span class="o">%</span> <span class="n">n</span>
                <span class="n">staticCol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
                <span class="n">staticRow</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">&quot;-&quot;</span> <span class="ow">in</span> <span class="n">x</span> <span class="ow">and</span> <span class="s2">&quot;+&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                <span class="n">lead_lag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:])</span> <span class="o">%</span> <span class="n">n</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">lead_lag</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">mixedCol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
                    <span class="n">mixedRow</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">&quot;-&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                <span class="n">lead_lag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:])</span> <span class="o">%</span> <span class="n">n</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">lead_lag</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">backwardCol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
                    <span class="n">backwardRow</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">&quot;+&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>    
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                <span class="n">lead_lag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:])</span> <span class="o">%</span> <span class="n">n</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">lead_lag</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">forwardCol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
                    <span class="n">forwardRow</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    
    <span class="n">measCol</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">measCol</span><span class="p">))</span>
    <span class="n">measRow</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">measRow</span><span class="p">))</span>
    <span class="n">staticCol</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">staticCol</span><span class="p">))</span>
    <span class="n">staticRow</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">staticRow</span><span class="p">))</span>
    <span class="n">backwardCol</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">backwardCol</span><span class="p">))</span>
    <span class="n">backwardRow</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">backwardRow</span><span class="p">))</span>
    <span class="n">mixedCol</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">mixedCol</span><span class="p">))</span>
    <span class="n">mixedRow</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">mixedRow</span><span class="p">))</span>
    <span class="n">forwardCol</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">forwardCol</span><span class="p">))</span>
    <span class="n">forwardRow</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">forwardRow</span><span class="p">))</span>
        
    <span class="n">meas_var</span> <span class="o">=</span> <span class="p">[</span><span class="n">variables</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">measCol</span><span class="p">]</span>
    <span class="n">backward_var</span> <span class="o">=</span> <span class="p">[</span><span class="n">variables</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">backwardCol</span><span class="p">]</span>
    <span class="n">static_var</span> <span class="o">=</span> <span class="p">[</span><span class="n">variables</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">staticCol</span><span class="p">]</span>
    <span class="n">mixed_var</span> <span class="o">=</span> <span class="p">[</span><span class="n">variables</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">mixedCol</span><span class="p">]</span>
    <span class="n">forward_var</span> <span class="o">=</span> <span class="p">[</span><span class="n">variables</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">forwardCol</span><span class="p">]</span>
    <span class="n">varOrder</span> <span class="o">=</span> <span class="n">meas_var</span><span class="o">+</span><span class="n">static_var</span><span class="o">+</span><span class="n">backward_var</span><span class="o">+</span><span class="n">mixed_var</span><span class="o">+</span><span class="n">forward_var</span>
    
    <span class="c1"># Make sure row numbers for different group of variables do not everlap.</span>
    <span class="n">staticRow</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">staticRow</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">measRow</span><span class="p">]</span>
    <span class="n">backwardRow</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">backwardRow</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">measRow</span><span class="p">]</span>
    <span class="n">mixedRow</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">mixedRow</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">measRow</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">backwardRow</span><span class="p">]</span>
    <span class="n">forwardRow</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">forwardRow</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">measRow</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">backwardRow</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">mixedRow</span><span class="p">]</span>
        
    <span class="n">columns</span> <span class="o">=</span> <span class="n">measCol</span><span class="o">+</span><span class="n">staticCol</span><span class="o">+</span><span class="n">backwardCol</span><span class="o">+</span><span class="n">mixedCol</span><span class="o">+</span><span class="n">forwardCol</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">measRow</span><span class="o">+</span><span class="n">staticRow</span><span class="o">+</span><span class="n">backwardRow</span><span class="o">+</span><span class="n">mixedRow</span><span class="o">+</span><span class="n">forwardRow</span><span class="p">)</span>
    <span class="n">missed_rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">]</span>
    
    <span class="c1"># Second pass</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">mp</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">mp</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;-&quot;</span> <span class="ow">in</span> <span class="n">x</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s2">&quot;+&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                    <span class="n">lead_lag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                    <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                    <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:])</span> <span class="o">%</span> <span class="n">n</span>
                    <span class="k">if</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">missed_rows</span><span class="p">:</span>
                        <span class="n">staticCol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
                        <span class="n">staticRow</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s2">&quot;-&quot;</span> <span class="ow">in</span> <span class="n">x</span> <span class="ow">and</span> <span class="s2">&quot;+&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                    <span class="n">lead_lag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                    <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                    <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:])</span> <span class="o">%</span> <span class="n">n</span>
                    <span class="k">if</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">missed_rows</span><span class="p">:</span>
                        <span class="n">mixedCol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
                        <span class="n">mixedRow</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s2">&quot;-&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                    <span class="n">lead_lag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                    <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                    <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:])</span> <span class="o">%</span> <span class="n">n</span>
                    <span class="k">if</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">missed_rows</span><span class="p">:</span>
                        <span class="n">backwardCol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
                        <span class="n">backwardRow</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s2">&quot;+&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>    
                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                    <span class="n">lead_lag</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                    <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[:</span><span class="n">ind</span><span class="p">])</span>
                    <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:])</span> <span class="o">%</span> <span class="n">n</span>
                    <span class="k">if</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">missed_rows</span><span class="p">:</span>
                        <span class="n">forwardCol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
                        <span class="n">forwardRow</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        
    <span class="n">staticRow</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">staticRow</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">measRow</span><span class="p">]</span>
    <span class="n">backwardRow</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">backwardRow</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">measRow</span><span class="p">]</span>
    <span class="n">mixedRow</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">mixedRow</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">measRow</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">backwardRow</span><span class="p">]</span>
    <span class="n">forwardRow</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">forwardRow</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">measRow</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">backwardRow</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">mixedRow</span><span class="p">]</span>
    
    <span class="n">colOrder</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">measCol</span><span class="o">+</span><span class="n">staticCol</span><span class="o">+</span><span class="n">backwardCol</span><span class="o">+</span><span class="n">mixedCol</span><span class="o">+</span><span class="n">forwardCol</span><span class="p">))</span>
    <span class="n">rowOrder</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">staticCol</span><span class="o">+</span><span class="n">measCol</span><span class="o">+</span><span class="n">backwardCol</span><span class="o">+</span><span class="n">mixedCol</span><span class="o">+</span><span class="n">forwardCol</span><span class="p">))</span>
    
    <span class="n">invColOrder</span> <span class="o">=</span> <span class="p">[</span><span class="n">colOrder</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
    <span class="n">invRowOrder</span> <span class="o">=</span> <span class="p">[</span><span class="n">rowOrder</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
    
    <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Ordered variables:&quot;</span><span class="p">,</span><span class="n">varOrder</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Measurement variables:&quot;</span><span class="p">,</span><span class="n">meas_var</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Static variables:&quot;</span><span class="p">,</span><span class="n">static_var</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Backward variables:&quot;</span><span class="p">,</span><span class="n">backward_var</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Mixed variables:&quot;</span><span class="p">,</span><span class="n">mixed_var</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Forward variables:&quot;</span><span class="p">,</span><span class="n">forward_var</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">()</span>
        <span class="n">missed_var</span> <span class="o">=</span> <span class="p">[</span><span class="n">variables</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rowOrder</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">missed_var</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Missed variables:&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">missed_var</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">()</span>
        <span class="c1"># testColOrder = np.all(np.array([colOrder[i] for i in invColOrder]) == np.arange(n))</span>
        <span class="c1"># testRowOrder = np.all(np.array([rowOrder[i] for i in invRowOrder]) == np.arange(n))</span>
        <span class="c1"># print(&quot;Test column order:&quot;,testColOrder)</span>
        <span class="c1"># print(&quot;Test row order:&quot;,testRowOrder)</span>
           
    <span class="n">n_static</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">staticCol</span><span class="p">)</span>
    <span class="n">n_meas</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">measCol</span><span class="p">)</span>
    <span class="n">mf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n_static</span><span class="p">,</span><span class="n">n_static</span><span class="o">+</span><span class="n">n_meas</span><span class="p">)</span>
    
    <span class="n">Z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n_meas</span><span class="p">,</span><span class="n">n</span><span class="p">))</span>
    <span class="n">Z</span><span class="p">[:,</span><span class="n">n_static</span><span class="p">:</span><span class="n">n_static</span><span class="o">+</span><span class="n">n_meas</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="n">n_meas</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">Z</span><span class="p">,</span> <span class="n">mf</span><span class="p">,</span> <span class="n">colOrder</span><span class="p">,</span> <span class="n">rowOrder</span><span class="p">,</span> <span class="n">invColOrder</span><span class="p">,</span> <span class="n">invRowOrder</span></div>



<span class="n">arr</span> <span class="o">=</span> <span class="kc">None</span>
<div class="viewcode-block" id="check_presence">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.check_presence">[docs]</a>
<span class="k">def</span> <span class="nf">check_presence</span><span class="p">(</span><span class="n">symb</span><span class="p">,</span><span class="n">equations</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if symbol is defined in equations.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        symb : str</span>
<span class="sd">            Symbol.</span>
<span class="sd">        equations : str</span>
<span class="sd">            Equations.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if symbol is defined in equations and False otherwise</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># global arr</span>
    <span class="c1"># if arr is None:</span>
    <span class="c1">#     delimiters = &quot; &quot;, &quot;,&quot;, &quot;;&quot;, &quot;*&quot;, &quot;/&quot;, &quot;:&quot;, &quot;+&quot;, &quot;-&quot;, &quot;^&quot;, &quot;{&quot;, &quot;}&quot;, &quot;(&quot;, &quot;)&quot;,&quot;[&quot;,&quot;]&quot;</span>
    <span class="c1">#     regexPattern = &#39;|&#39;.join(map(re.escape, delimiters))</span>
    <span class="c1">#     arr = re.split(regexPattern,equations)</span>
    <span class="c1">#     arr = list(filter(None,arr))</span>
    
    <span class="n">b</span> <span class="o">=</span> <span class="n">symb</span> <span class="ow">in</span> <span class="n">equations</span>
    
    <span class="k">return</span> <span class="n">b</span></div>



<div class="viewcode-block" id="getMap">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getMap">[docs]</a>
<span class="k">def</span> <span class="nf">getMap</span><span class="p">(</span><span class="n">endog</span><span class="p">,</span><span class="n">equations</span><span class="p">,</span><span class="n">eqLabels</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>   
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get dictionary of row numbers as keys, and equation labels and endogenous variables as values.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param endog: Endogenous variables.</span>
<span class="sd">        :type edog: list.</span>
<span class="sd">        :param equations: Equations.</span>
<span class="sd">        :type equations: list.</span>
<span class="sd">        :param eqLabels: Equations labels.</span>
<span class="sd">        :type eqLables: list.</span>
<span class="sd">        :return: Dictionary with rows numbers as keys, and equation label</span>
<span class="sd">                 and an array of equation endogenous variables as values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">re</span>
    <span class="k">global</span> <span class="n">mp1</span><span class="p">,</span> <span class="n">mp2</span>
    
    <span class="k">if</span> <span class="ow">not</span> <span class="n">mp1</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">mp2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">mp1</span><span class="p">,</span> <span class="n">mp2</span>
    
    <span class="n">mp1</span> <span class="o">=</span> <span class="p">{};</span> <span class="n">mp2</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">delimiters</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;^&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span><span class="s2">&quot;=&quot;</span>
    <span class="n">regexPattern</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">,</span> <span class="n">delimiters</span><span class="p">))</span>
    
    <span class="k">for</span> <span class="n">row</span><span class="p">,</span><span class="n">eqtn</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">equations</span><span class="p">):</span>
        <span class="n">eq</span>  <span class="o">=</span> <span class="n">eqtn</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">eqLabels</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">eqLabels</span><span class="p">):</span>
            <span class="n">var</span> <span class="o">=</span> <span class="n">eqLabels</span><span class="p">[</span><span class="n">row</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;=&quot;</span> <span class="ow">in</span> <span class="n">eq</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
            <span class="n">lhs</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[:</span><span class="n">ind</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ind</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">lhs</span><span class="p">)</span>
                <span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">arr</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">endog</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">var</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">endog</span><span class="p">:</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">eq</span><span class="p">)</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">arr</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">endog</span><span class="p">]</span>
            <span class="n">lst</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
                <span class="n">ind1</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">eq</span><span class="p">[</span><span class="nb">min</span><span class="p">(</span><span class="n">ind1</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">eq</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span>
                    <span class="n">ind2</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">,</span><span class="n">ind1</span><span class="p">)</span>
                    <span class="n">numbr</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="n">ind1</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="n">ind2</span><span class="p">]</span>
                    <span class="n">num</span> <span class="o">=</span> <span class="n">numbr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;+&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">num</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
                        <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">v</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">numbr</span><span class="p">)))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">v</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
                    <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind2</span><span class="p">:]</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">v</span><span class="o">==</span><span class="n">var</span><span class="p">:</span>
                    <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">v</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
                    <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="n">ind1</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">):]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="n">ind1</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">):]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">mp1</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="n">lst</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">mp2</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="nb">set</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span>
            
    <span class="k">return</span> <span class="n">mp1</span><span class="p">,</span><span class="n">mp2</span></div>



<div class="viewcode-block" id="getRHS">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getRHS">[docs]</a>
<span class="k">def</span> <span class="nf">getRHS</span><span class="p">(</span><span class="n">eqs</span><span class="p">,</span><span class="n">variables</span><span class="p">,</span><span class="n">eqLabels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return right-hand-side of equations.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        :param eqs: Model equations.</span>
<span class="sd">        :type eqs: list.</span>
<span class="sd">        :param variables: Endogenous variables.</span>
<span class="sd">        :type variables: list.</span>
<span class="sd">        :param eqLabels: Labels of equations.</span>
<span class="sd">        :type eqLabels: list.</span>
<span class="sd">        :returns: Right hand side terms.</span>
<span class="sd">    &quot;&quot;&quot;</span> 
    <span class="kn">import</span> <span class="nn">re</span>
    <span class="n">delimiters</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span><span class="s2">&quot;+&quot;</span><span class="p">,</span><span class="s2">&quot;-&quot;</span><span class="p">,</span><span class="s2">&quot;*&quot;</span><span class="p">,</span><span class="s2">&quot;/&quot;</span><span class="p">,</span><span class="s2">&quot;(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">,</span><span class="s2">&quot;__&quot;</span>
    <span class="n">regexPattern</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">,</span> <span class="n">delimiters</span><span class="p">))</span>
    
    <span class="n">rhs_eqs</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">endog</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">eqs</span><span class="p">)</span>
        
    <span class="k">if</span> <span class="n">b</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Right-hand-side equations</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">eq</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eqs</span><span class="p">):</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">left</span>  <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">right</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">right</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span><span class="p">:</span>
                    <span class="n">right</span> <span class="o">=</span> <span class="n">left</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">right</span> <span class="o">=</span> <span class="n">eq</span>
            <span class="n">rhs_eqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
    
    <span class="k">else</span><span class="p">:</span>
                
        <span class="kn">from</span> <span class="nn">snowdrop.src.preprocessor.symbolic</span> <span class="kn">import</span> <span class="n">stringify</span>
        <span class="kn">from</span> <span class="nn">snowdrop.src.preprocessor.function_compiler_sympy</span> <span class="kn">import</span> <span class="n">normalize_equations</span>
        
        <span class="n">lst_eqs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">eq</span> <span class="ow">in</span> <span class="n">eqs</span><span class="p">:</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">right</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">lst_eqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">left</span> <span class="o">+</span> <span class="s2">&quot; - (&quot;</span> <span class="o">+</span> <span class="n">right</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lst_eqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">left</span><span class="p">)</span>
        
        <span class="n">syms</span> <span class="o">=</span> <span class="p">[(</span><span class="n">v</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">]</span> \
             <span class="o">+</span> <span class="p">[(</span><span class="n">v</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">]</span> \
             <span class="o">+</span> <span class="p">[(</span><span class="n">v</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">]</span>
        <span class="n">vv</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">syms</span><span class="p">]</span>
        <span class="n">eqs_sym</span> <span class="o">=</span> <span class="n">normalize_equations</span><span class="p">(</span><span class="n">lst_eqs</span><span class="p">,</span><span class="n">vv</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
     
        <span class="n">ii</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">eqtn</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eqs</span><span class="p">):</span>
            <span class="n">eq</span> <span class="o">=</span> <span class="n">eqtn</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
            <span class="n">bRow</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">right</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">arr2</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">left</span><span class="p">)</span>
                <span class="n">arr2</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">arr2</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">]</span>
                <span class="n">var</span> <span class="o">=</span> <span class="n">arr2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">bRow</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">elif</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="n">left</span> <span class="ow">or</span> <span class="s2">&quot;)&quot;</span> <span class="ow">in</span> <span class="n">left</span> <span class="ow">or</span> <span class="s2">&quot;+&quot;</span> <span class="ow">in</span> <span class="n">left</span> <span class="ow">or</span> <span class="s2">&quot;-&quot;</span> <span class="ow">in</span> <span class="n">left</span> <span class="ow">or</span> <span class="s2">&quot;*&quot;</span> <span class="ow">in</span> <span class="n">left</span> <span class="ow">or</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">left</span> <span class="ow">or</span> <span class="s2">&quot;^&quot;</span> <span class="ow">in</span> <span class="n">left</span> <span class="p">:</span>
                    <span class="n">bRow</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">right</span> <span class="o">=</span> <span class="n">eq</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">eqLabels</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">eqLabels</span><span class="p">)</span> <span class="ow">and</span> <span class="n">eqLabels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
                    <span class="n">var</span> <span class="o">=</span> <span class="n">eqLabels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> 
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">var</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">endog</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
                
            <span class="k">if</span> <span class="n">bRow</span><span class="p">:</span> 
                <span class="k">if</span> <span class="n">ii</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Started conversion of equations.&quot;</span><span class="p">)</span>
                <span class="n">ii</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">max_lead</span> <span class="o">=</span> <span class="mi">0</span>  
                <span class="k">while</span> <span class="n">var</span><span class="o">+</span><span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="n">eq</span><span class="p">:</span>
                    <span class="n">ind1</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">var</span><span class="o">+</span><span class="s2">&quot;(&quot;</span><span class="p">)</span>
                    <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind1</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="p">):]</span>
                    <span class="k">if</span> <span class="s2">&quot;)&quot;</span> <span class="ow">in</span> <span class="n">eq</span><span class="p">:</span>
                        <span class="n">ind2</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
                        <span class="n">numbr</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">eq</span><span class="p">[:</span><span class="n">ind2</span><span class="p">])</span>
                        <span class="n">max_lead</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_lead</span><span class="p">,</span><span class="n">numbr</span><span class="p">)</span>
                
                <span class="n">x</span> <span class="o">=</span> <span class="n">stringify</span><span class="p">((</span><span class="n">var</span><span class="p">,</span><span class="n">max_lead</span><span class="p">))</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">sy</span><span class="o">.</span><span class="n">symbols</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">debug</span><span class="p">:</span> 
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="s2">:  </span><span class="si">{</span><span class="n">eqs_sym</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2"> = 0&quot;</span><span class="p">)</span>
                <span class="n">sol</span> <span class="o">=</span> <span class="n">sy</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">eqs_sym</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">s</span><span class="p">)</span>
               
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">rhs</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">sol</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="k">if</span> <span class="n">debug</span><span class="p">:</span> 
                        <span class="n">cprint</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">rhs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;blue&quot;</span><span class="p">)</span>
                    <span class="n">rhs_eqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">normalize_equations</span><span class="p">([</span><span class="n">rhs</span><span class="p">],</span><span class="n">vv</span><span class="p">,</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">rhs_eqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">rhs_eqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">normalize_equations</span><span class="p">([</span><span class="n">right</span><span class="p">],</span><span class="n">vv</span><span class="p">,</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">ii</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Converted </span><span class="si">{</span><span class="n">ii</span><span class="si">}</span><span class="s2"> equations.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">rhs_eqs</span><span class="p">,</span><span class="n">endog</span></div>



<span class="c1"># def replaceEquation(eq,var):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     Replaces lead/lag variables in equations with equivalent representation.</span>
<span class="c1">#     For eaxmple: var(-1) -&gt; var__m1_ ; var(1) -&gt; var__p1_  ; var( -&gt; var__.</span>
    
<span class="c1">#     Parameters:</span>
<span class="c1">#         :param eq: Model equation.</span>
<span class="c1">#         :type eq: str.</span>
<span class="c1">#         :param var: Variables.</span>
<span class="c1">#         :type var: list.</span>
<span class="c1">#         :returns: Normalized equation.</span>
<span class="c1">#     &quot;&quot;&quot; </span>
<span class="c1">#     delimiters = &quot; &quot;, &quot;,&quot;, &quot;;&quot;, &quot;*&quot;, &quot;/&quot;, &quot;:&quot;, &quot;+&quot;, &quot;-&quot;, &quot;^&quot;, &quot;=&quot;, &quot;{&quot;, &quot;}&quot;, &quot;(&quot;, &quot;)&quot;, &quot;[&quot;, &quot;]&quot;</span>
<span class="c1">#     regexPattern = &#39;|&#39;.join(map(re.escape, delimiters))</span>
    
<span class="c1">#     arr = re.split(regexPattern,eq)</span>
<span class="c1">#     arr = list(filter(None,arr))</span>
<span class="c1">#     new_eq = &quot;&quot;</span>
<span class="c1">#     ind = 0; ind1 = 0; beg = 0</span>
<span class="c1">#     for v in arr:</span>
<span class="c1">#         if v in var:</span>
<span class="c1">#             ind  = eq.index(v,ind1)</span>
<span class="c1">#             ind1 = ind+len(v)</span>
<span class="c1">#             if ind1 &lt; len(eq):</span>
<span class="c1">#                 end = ind</span>
<span class="c1">#                 if eq[ind1] == &quot;(&quot;:</span>
<span class="c1">#                     ind2 = eq.index(&quot;)&quot;,ind1)</span>
<span class="c1">#                     shift = eq[1+ind1:ind2]</span>
<span class="c1">#                     new_eq += eq[beg:end] + v + \</span>
<span class="c1">#                         (&quot;__m&quot; + str(abs(int(shift))) + &quot;_&quot; if &quot;-&quot; in shift else &quot;__p&quot; + str(abs(int(shift))) + &quot;_&quot;)</span>
<span class="c1">#                     beg = end + len(v) + (ind2-ind1+1)</span>
<span class="c1">#                 else:</span>
<span class="c1">#                     new_eq += eq[beg:end] + v + &quot;__&quot;</span>
<span class="c1">#                     beg = end + len(v)</span>
<span class="c1">#             else:</span>
<span class="c1">#                 ind1 = ind+len(v)</span>
<span class="c1">#                 new_eq += eq[beg:ind1] + &quot;__&quot;</span>
<span class="c1">#                 beg = ind1</span>
<span class="c1">#                 end = beg + 2</span>
                
<span class="c1">#         # else:</span>
<span class="c1">#         #     end = ind</span>
<span class="c1">#         #     ind1 = end + len(v)</span>
            
<span class="c1">#     if beg == 0:</span>
<span class="c1">#         new_eq = eq</span>
<span class="c1">#     else:</span>
<span class="c1">#         rest = eq[beg:]</span>
<span class="c1">#         arr = re.split(regexPattern,rest)</span>
<span class="c1">#         arr = list(filter(None,arr))</span>
<span class="c1">#         br = False</span>
<span class="c1">#         for v in arr:</span>
<span class="c1">#             if v in var:</span>
<span class="c1">#                 ind  = rest.index(v)</span>
<span class="c1">#                 new_eq += rest[:ind]</span>
<span class="c1">#                 new_eq += rest + &quot;__&quot;</span>
<span class="c1">#                 br = True</span>
<span class="c1">#                 break</span>
<span class="c1">#         if not br:</span>
<span class="c1">#             new_eq += rest</span>
            
<span class="c1">#     return new_eq</span>
            
            
<div class="viewcode-block" id="get_steady_state_equations">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.get_steady_state_equations">[docs]</a>
<span class="k">def</span> <span class="nf">get_steady_state_equations</span><span class="p">(</span><span class="n">eqs</span><span class="p">,</span><span class="n">endog</span><span class="p">,</span><span class="n">params</span><span class="p">,</span><span class="n">shocks</span><span class="o">=</span><span class="p">[],</span><span class="n">exog</span><span class="o">=</span><span class="p">[]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build steady state equations.</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    eqs : list</span>
<span class="sd">        Dynamic equations.</span>
<span class="sd">    endog : list</span>
<span class="sd">        Endogenous variables that exclude added auxillary variables.</span>
<span class="sd">    params : list</span>
<span class="sd">        Parameters.</span>
<span class="sd">    shocks : list</span>
<span class="sd">        Shocks names.</span>
<span class="sd">    exog : list</span>
<span class="sd">        Exogenous variables.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    ss_equations : list.</span>
<span class="sd">        Transformed equations with removed time subscript.</span>
<span class="sd">    &quot;&quot;&quot;</span>  
    <span class="n">delimiters</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span><span class="s2">&quot;^&quot;</span>
    <span class="n">regexPattern</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">,</span> <span class="n">delimiters</span><span class="p">))</span>
    
    <span class="n">ss_equations</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">eqtn</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eqs</span><span class="p">):</span>
        <span class="n">eq</span> <span class="o">=</span> <span class="n">eqtn</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">eq</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">arr</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">endog</span> <span class="ow">or</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">params</span> <span class="ow">or</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">shocks</span> <span class="ow">or</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">exog</span><span class="p">]</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># Replace lead/lag variables or shocks with current values</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">eq</span><span class="p">[</span><span class="n">ind</span><span class="p">:]:</span>
                <span class="n">ind1</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">ind</span><span class="p">)</span>
                <span class="n">k</span> <span class="o">=</span> <span class="n">ind1</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="k">if</span> <span class="mi">1</span><span class="o">+</span><span class="n">k</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">eq</span><span class="p">)</span> <span class="ow">and</span> <span class="n">eq</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span> <span class="ow">and</span> <span class="s2">&quot;)&quot;</span> <span class="ow">in</span> <span class="n">eq</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">k</span><span class="p">:]:</span>
                    <span class="n">ind2</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">,</span><span class="n">ind1</span><span class="p">)</span>
                    <span class="n">num</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">k</span><span class="p">:</span><span class="n">ind2</span><span class="p">]</span>
                    <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[-+]?\d+&quot;</span><span class="p">,</span><span class="n">num</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">v</span><span class="o">+</span><span class="s2">&quot;(&quot;</span><span class="o">+</span><span class="n">num</span><span class="o">+</span><span class="s2">&quot;)&quot;</span> <span class="ow">in</span> <span class="n">eq</span><span class="p">:</span>
                        <span class="n">eq</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="s2">&quot;(&quot;</span><span class="o">+</span><span class="n">num</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">ind1</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> 
                
        <span class="n">ss_equations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">eq</span><span class="p">)</span>
        
    <span class="c1">#print(&quot;get_steady_state_equations:&quot;,&quot;(-1)&quot; in &quot;\n&quot;.join(ss_equations))</span>
    <span class="c1">#ind = [i for i,x in enumerate(ss_equations) if &quot;(-1)&quot; in x]</span>
    
    <span class="k">return</span> <span class="n">ss_equations</span></div>

        
 
<div class="viewcode-block" id="aggregateEqs">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.aggregateEqs">[docs]</a>
<span class="k">def</span> <span class="nf">aggregateEqs</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span><span class="n">aggregation</span><span class="p">,</span><span class="n">freq</span><span class="p">,</span><span class="n">aggr_freq</span><span class="p">,</span><span class="n">m_aggr</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build aggregated equations and endogenous variables for M/Q/A frequencies.&quot;&quot;&quot;</span>
    <span class="n">new_eqs</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">new_vars</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">new_exog_vars</span> <span class="o">=</span> <span class="p">[]</span>
            
    <span class="c1"># Add aggregation equations</span>
    <span class="k">for</span> <span class="n">v</span><span class="p">,</span><span class="n">aggr</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span><span class="n">aggregation</span><span class="p">):</span> 
        <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">m_aggr</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">freq</span> <span class="o">==</span> <span class="s2">&quot;monthly&quot;</span> <span class="ow">and</span> <span class="n">aggr_freq</span> <span class="o">==</span> <span class="s2">&quot;quarterly&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">aggr</span> <span class="o">==</span> <span class="s2">&quot;sum&quot;</span><span class="p">:</span>
                    <span class="n">newEq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED[t] - (</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-1)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-2)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-3)])&quot;</span>
                <span class="k">elif</span> <span class="n">aggr</span> <span class="o">==</span> <span class="s2">&quot;mean&quot;</span><span class="p">:</span>
                    <span class="n">newEq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED[t] - (</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-1)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-2)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-3)])/3&quot;</span>
                <span class="k">elif</span> <span class="n">aggr</span> <span class="o">==</span> <span class="s2">&quot;geomean&quot;</span><span class="p">:</span>
                    <span class="n">newEq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED[t] - (</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-1)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-2)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-3)])**(1/3.)&quot;</span>
                <span class="k">elif</span> <span class="n">aggr</span> <span class="o">==</span> <span class="s2">&quot;first&quot;</span><span class="p">:</span>
                    <span class="n">newEq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED[t] - </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-3)]&quot;</span>
                <span class="k">elif</span> <span class="n">aggr</span> <span class="o">==</span> <span class="s2">&quot;last&quot;</span><span class="p">:</span>
                    <span class="n">newEq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED[t] - </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-1)]&quot;</span>
            <span class="k">elif</span> <span class="n">freq</span> <span class="o">==</span> <span class="s2">&quot;quarterly&quot;</span> <span class="ow">and</span> <span class="n">aggr_freq</span> <span class="o">==</span> <span class="s2">&quot;annual&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">aggr</span> <span class="o">==</span> <span class="s2">&quot;sum&quot;</span><span class="p">:</span>
                    <span class="n">newEq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED[t] - (</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-1)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-2)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-3)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-4)])&quot;</span>
                <span class="k">elif</span> <span class="n">aggr</span> <span class="o">==</span> <span class="s2">&quot;mean&quot;</span><span class="p">:</span>
                    <span class="n">newEq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED[t] - (</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-1)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-2)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-3)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-4)])/4&quot;</span>
                <span class="k">elif</span> <span class="n">aggr</span> <span class="o">==</span> <span class="s2">&quot;geomean&quot;</span><span class="p">:</span>
                    <span class="n">newEq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED[t] - (</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-1)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-2)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-3)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-4)])**(1/4.)&quot;</span>
                <span class="k">elif</span> <span class="n">aggr</span> <span class="o">==</span> <span class="s2">&quot;first&quot;</span><span class="p">:</span>
                    <span class="n">newEq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED[t] - </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-4)]&quot;</span>
                <span class="k">elif</span> <span class="n">aggr</span> <span class="o">==</span> <span class="s2">&quot;last&quot;</span><span class="p">:</span>
                    <span class="n">newEq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-1)]&quot;</span>
            <span class="k">elif</span> <span class="n">freq</span> <span class="o">==</span> <span class="s2">&quot;monthly&quot;</span> <span class="ow">and</span> <span class="n">aggr_freq</span> <span class="o">==</span> <span class="s2">&quot;annual&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">aggr</span> <span class="o">==</span> <span class="s2">&quot;sum&quot;</span><span class="p">:</span>
                    <span class="n">newEq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED[t] - (</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-1)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-2)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-3)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-4)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-5)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-6)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-7)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-8)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-9)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-10)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-11)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-12)])&quot;</span>
                <span class="k">elif</span> <span class="n">aggr</span> <span class="o">==</span> <span class="s2">&quot;mean&quot;</span><span class="p">:</span>
                    <span class="n">newEq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED[t] - (</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-1)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-2)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-3)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-4)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-5)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-6)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-7)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-8)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-9)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-10)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-11)]+</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-12)])/12&quot;</span>
                <span class="k">elif</span> <span class="n">aggr</span> <span class="o">==</span> <span class="s2">&quot;geomean&quot;</span><span class="p">:</span>
                    <span class="n">newEq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED[t] - (</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-1)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-2)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-3)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-4)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-5)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-6)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-7)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-8)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-9)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-10)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-11)]*</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-12)])**(1/12.)&quot;</span>
                <span class="k">elif</span> <span class="n">aggr</span> <span class="o">==</span> <span class="s2">&quot;first&quot;</span><span class="p">:</span>
                    <span class="n">newEq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED[t] - </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-12)]&quot;</span>
                <span class="k">elif</span> <span class="n">aggr</span> <span class="o">==</span> <span class="s2">&quot;last&quot;</span><span class="p">:</span>
                    <span class="n">newEq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t] = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED[t] - </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[max(0,t-1)]&quot;</span>
            <span class="n">new_eqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newEq</span><span class="p">)</span>
            <span class="n">new_vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SHK_</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">[t]&quot;</span><span class="p">)</span>
            <span class="n">new_exog_vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">_AGGREGATED&quot;</span><span class="p">)</span>
                    
    <span class="k">return</span> <span class="n">new_eqs</span><span class="p">,</span><span class="n">new_vars</span><span class="p">,</span><span class="n">new_exog_vars</span> </div>

            
       
<div class="viewcode-block" id="processFormulas">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.processFormulas">[docs]</a>
<span class="k">def</span> <span class="nf">processFormulas</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">formulas</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">formula</span> <span class="ow">in</span> <span class="n">formulas</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">formula</span> <span class="o">==</span> <span class="s2">&quot;pch&quot;</span> <span class="ow">or</span> <span class="n">formula</span> <span class="o">==</span> <span class="s2">&quot;pchy&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;100*(</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">(-1)-1)&quot;</span>
    <span class="k">return</span> <span class="n">v</span></div>



<div class="viewcode-block" id="transformEq">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.transformEq">[docs]</a>
<span class="k">def</span> <span class="nf">transformEq</span><span class="p">(</span><span class="n">eqtn</span><span class="p">,</span><span class="n">var</span><span class="p">,</span><span class="n">formulas</span><span class="o">=</span><span class="p">[],</span><span class="n">b</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replace endogenous variables v in equations as following,  v -&gt; v*scale and build steady state equations.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    eqtn : str</span>
<span class="sd">        Equation.</span>
<span class="sd">    var : list</span>
<span class="sd">        Endogenous variables.</span>
<span class="sd">    formula : str, optional</span>
<span class="sd">        Formula, for example, percentage change &#39;pchy&#39;. The default is None.</span>
<span class="sd">    b : bool, optional</span>
<span class="sd">        If True normalize equation, i.e. replace variables lead/lag with var__p/m# substring. The default is None.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    New equation and new steady-state equation.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">br1</span> <span class="o">=</span> <span class="s2">&quot;(&quot;</span><span class="p">;</span> <span class="n">br2</span> <span class="o">=</span> <span class="s2">&quot;)&quot;</span>
    <span class="n">eq</span> <span class="o">=</span> <span class="n">eqtn</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;{&quot;</span><span class="p">,</span><span class="s2">&quot;(&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">eq</span><span class="p">)</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
    <span class="n">new_eq</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span> <span class="n">ss_eq</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    
    <span class="n">ind1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">beg</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)):</span>
        <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">var</span><span class="o">+</span><span class="n">formulas</span><span class="p">:</span>
                <span class="n">ind</span>  <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">ind1</span><span class="p">)</span>
                <span class="n">ind1</span> <span class="o">=</span> <span class="n">ind</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ind1</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">eq</span><span class="p">):</span>
                    <span class="n">end</span> <span class="o">=</span> <span class="n">ind</span>
                    <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">formulas</span> <span class="ow">and</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="n">eq</span><span class="p">[</span><span class="n">ind</span><span class="p">:</span><span class="n">ind</span><span class="o">+</span><span class="mi">5</span><span class="p">]:</span>
                        <span class="n">vn</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">expr</span> <span class="o">=</span> <span class="n">processFormulas</span><span class="p">(</span><span class="n">vn</span><span class="p">,</span><span class="n">formulas</span><span class="p">)</span>
                        <span class="n">new_eq</span> <span class="o">+=</span> <span class="n">eq</span><span class="p">[</span><span class="n">beg</span><span class="p">:</span><span class="n">end</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="n">expr</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
                        <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="n">ind1</span> <span class="o">+=</span> <span class="mi">2</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">vn</span><span class="p">)</span>
                        <span class="n">beg</span> <span class="o">=</span> <span class="n">ind1</span>
                    <span class="k">elif</span> <span class="n">eq</span><span class="p">[</span><span class="n">ind1</span><span class="p">]</span> <span class="o">==</span> <span class="n">br1</span><span class="p">:</span>
                        <span class="n">ind2</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">br2</span><span class="p">,</span><span class="n">ind1</span><span class="p">)</span>
                        <span class="n">shift</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind1</span><span class="p">:</span><span class="n">ind2</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">b</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">new_eq</span> <span class="o">+=</span> <span class="n">eq</span><span class="p">[</span><span class="n">beg</span><span class="p">:</span><span class="n">end</span><span class="p">]</span> <span class="o">+</span> <span class="n">v</span> <span class="o">+</span> <span class="n">br1</span> <span class="o">+</span> <span class="n">shift</span> <span class="o">+</span> <span class="n">br2</span>
                        <span class="k">elif</span> <span class="n">b</span><span class="p">:</span>
                            <span class="k">if</span> <span class="s2">&quot;-&quot;</span> <span class="ow">in</span> <span class="n">shift</span><span class="p">:</span>
                                <span class="n">tmp</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;__m</span><span class="si">{</span><span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">shift</span><span class="p">))</span><span class="si">}</span><span class="s2">_&quot;</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">tmp</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;__p</span><span class="si">{</span><span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">shift</span><span class="p">))</span><span class="si">}</span><span class="s2">_&quot;</span>
                            <span class="n">new_eq</span> <span class="o">+=</span> <span class="n">eq</span><span class="p">[</span><span class="n">beg</span><span class="p">:</span><span class="n">end</span><span class="p">]</span> <span class="o">+</span> <span class="n">v</span> <span class="o">+</span> <span class="n">tmp</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">tmp</span> <span class="o">=</span> <span class="s2">&quot;[t&quot;</span> <span class="o">+</span> <span class="n">eq</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind1</span><span class="p">:</span><span class="n">ind2</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span>
                            <span class="n">new_eq</span> <span class="o">+=</span> <span class="n">eq</span><span class="p">[</span><span class="n">beg</span><span class="p">:</span><span class="n">end</span><span class="p">]</span> <span class="o">+</span> <span class="n">v</span> <span class="o">+</span> <span class="n">tmp</span>
                        <span class="n">beg</span> <span class="o">=</span> <span class="n">end</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">ind2</span><span class="o">-</span><span class="n">ind1</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">b</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">new_eq</span> <span class="o">+=</span> <span class="n">eq</span><span class="p">[</span><span class="n">beg</span><span class="p">:</span><span class="n">end</span><span class="p">]</span> <span class="o">+</span> <span class="n">v</span>
                        <span class="k">elif</span> <span class="n">b</span><span class="p">:</span>
                            <span class="n">new_eq</span> <span class="o">+=</span> <span class="n">eq</span><span class="p">[</span><span class="n">beg</span><span class="p">:</span><span class="n">end</span><span class="p">]</span> <span class="o">+</span> <span class="n">v</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">new_eq</span> <span class="o">+=</span> <span class="n">eq</span><span class="p">[</span><span class="n">beg</span><span class="p">:</span><span class="n">end</span><span class="p">]</span> <span class="o">+</span> <span class="n">v</span> <span class="o">+</span> <span class="s2">&quot;[t]&quot;</span>
                        <span class="n">beg</span> <span class="o">=</span> <span class="n">end</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                    
    <span class="k">if</span> <span class="n">beg</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">new_eq</span> <span class="o">=</span> <span class="n">eq</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">rest</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="n">beg</span><span class="p">:]</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">rest</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
        <span class="n">br</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">var</span><span class="p">:</span>
                <span class="n">ind</span>  <span class="o">=</span> <span class="n">rest</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="n">new_eq</span> <span class="o">+=</span> <span class="n">rest</span><span class="p">[:</span><span class="n">ind</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">b</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">new_eq</span> <span class="o">+=</span> <span class="n">rest</span><span class="p">[</span><span class="n">ind</span><span class="p">:]</span>
                <span class="k">elif</span> <span class="n">b</span><span class="p">:</span>
                    <span class="n">new_eq</span> <span class="o">+=</span> <span class="n">rest</span><span class="p">[</span><span class="n">ind</span><span class="p">:]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_eq</span> <span class="o">+=</span> <span class="n">rest</span><span class="p">[</span><span class="n">ind</span><span class="p">:]</span> <span class="o">+</span> <span class="s2">&quot;[t]&quot;</span>
                <span class="n">br</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">br</span><span class="p">:</span>
            <span class="n">new_eq</span> <span class="o">+=</span> <span class="n">rest</span>

    <span class="c1"># # Steady state equations</span>
    <span class="c1"># arr = re.split(regexPattern,eq)</span>
    <span class="c1"># arr = list(filter(None,arr))</span>
    <span class="c1"># ind1 = 0; beg = 0; j = -1</span>
    <span class="c1"># for i in range(len(arr)):</span>
    <span class="c1">#     j += 1</span>
    <span class="c1">#     if j &lt; len(arr)-1:</span>
    <span class="c1">#         v = arr[j]</span>
    <span class="c1">#         if v in var+formulas:</span>
    <span class="c1">#             ind  = eq.index(v,ind1)</span>
    <span class="c1">#             ind1 = ind+len(v)</span>
    <span class="c1">#             if ind1 &lt; len(eq):</span>
    <span class="c1">#                 end = ind</span>
    <span class="c1">#                 if v in formulas and &quot;(&quot; in eq[ind:ind+5]:</span>
    <span class="c1">#                     vn = arr[i+1]</span>
    <span class="c1">#                     ss_eq += eq[beg:end] + &quot;0&quot;</span>
    <span class="c1">#                     j += 1</span>
    <span class="c1">#                     ind1 += 2 + len(vn)</span>
    <span class="c1">#                     beg = ind1</span>
    <span class="c1">#                 elif ind1 &lt; len(eq):</span>
    <span class="c1">#                     if eq[ind1] == br1:</span>
    <span class="c1">#                         ind2 = eq.index(br2,ind1)</span>
    <span class="c1">#                         shift = eq[1+ind1:ind2]</span>
    <span class="c1">#                         ss_eq += eq[beg:end] + v</span>
    <span class="c1">#                         beg = end + len(v) + (ind2-ind1+1)</span>
    <span class="c1">#                     else:</span>
    <span class="c1">#                         ss_eq += eq[beg:end] + v</span>
    <span class="c1">#                         beg = end + len(v)</span>
    <span class="c1"># if beg == 0:</span>
    <span class="c1">#     ss_eq = eq</span>
    <span class="c1"># else:</span>
    <span class="c1">#     rest = eq[beg:]</span>
    <span class="c1">#     arr = re.split(regexPattern,rest)</span>
    <span class="c1">#     arr = list(filter(None,arr))</span>
    <span class="c1">#     br = False</span>
    <span class="c1">#     for v in arr:</span>
    <span class="c1">#         ind  = rest.index(v)</span>
    <span class="c1">#         ss_eq += rest[:ind]</span>
    <span class="c1">#         if b is None:</span>
    <span class="c1">#             ss_eq += rest[ind:]</span>
    <span class="c1">#         else:</span>
    <span class="c1">#             ss_eq += rest[ind:]  + &quot;__&quot;</span>
    <span class="c1">#         br = True</span>
    <span class="c1">#         break</span>
    <span class="c1">#     if not br:</span>
    <span class="c1">#         ss_eq += rest</span>
            

    <span class="c1"># Transform equation</span>
    <span class="k">if</span> <span class="n">b</span><span class="p">:</span>
        <span class="n">new_eq</span> <span class="o">=</span> <span class="n">normalizeEq</span><span class="p">(</span><span class="n">new_eq</span><span class="p">,</span><span class="n">var</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">new_eq</span></div>



<div class="viewcode-block" id="normalizeEq">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.normalizeEq">[docs]</a>
<span class="k">def</span> <span class="nf">normalizeEq</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span><span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Normalize equation such that it has the form: var = F(var,...).&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="n">Symbol</span><span class="p">,</span><span class="n">solve</span>

    <span class="n">ind</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">)</span>
    <span class="n">lhs</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[:</span><span class="n">ind</span><span class="p">]</span>
    <span class="n">rhs</span> <span class="o">=</span> <span class="n">eq</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span>
    <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">in</span> <span class="n">lhs</span> <span class="ow">or</span> <span class="s2">&quot;)&quot;</span> <span class="ow">in</span> <span class="n">lhs</span> <span class="ow">or</span> <span class="s2">&quot;*&quot;</span> <span class="ow">in</span> <span class="n">lhs</span> <span class="ow">or</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">lhs</span> <span class="ow">or</span> <span class="s2">&quot;+&quot;</span> <span class="ow">in</span> <span class="n">lhs</span> <span class="ow">or</span> <span class="s2">&quot;-&quot;</span> <span class="ow">in</span> <span class="n">lhs</span><span class="p">:</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">lhs</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">var</span><span class="p">:</span>
                <span class="k">break</span>
            
        <span class="c1"># Solve equation algebraically with sympy</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">eq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> - _y_&quot;</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">solve</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_y_&quot;</span><span class="p">,</span><span class="s2">&quot;(&quot;</span><span class="o">+</span><span class="n">rhs</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
        <span class="n">eq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">expr</span><span class="si">}</span><span class="s2">&quot;</span>
        
    <span class="k">return</span> <span class="n">eq</span></div>



<div class="viewcode-block" id="build_func">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.build_func">[docs]</a>
<span class="k">def</span> <span class="nf">build_func</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="n">exog</span><span class="p">,</span><span class="n">params</span><span class="p">,</span><span class="n">eqs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build array of functions.&quot;&quot;&quot;</span>
    <span class="n">lfunc</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">largs</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">lnames</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">leqs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">eq</span> <span class="ow">in</span> <span class="n">eqs</span><span class="p">:</span>
        <span class="n">func</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">args</span> <span class="o">=</span> <span class="n">str2func</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="n">exog</span><span class="p">,</span><span class="n">params</span><span class="p">,</span><span class="n">eq</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="n">lfunc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
            <span class="n">largs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
            <span class="n">lnames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">leqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">eq</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="n">lfunc</span><span class="p">,</span><span class="n">lnames</span><span class="p">,</span><span class="n">largs</span><span class="p">,</span><span class="n">leqs</span></div>

 
    
<div class="viewcode-block" id="str2func">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.str2func">[docs]</a>
<span class="k">def</span> <span class="nf">str2func</span><span class="p">(</span><span class="n">var_names</span><span class="p">,</span><span class="n">exog_names</span><span class="p">,</span><span class="n">param_names</span><span class="p">,</span><span class="n">eqtn</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert string to Python function.&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="n">symbols</span><span class="p">,</span><span class="n">lambdify</span>
    
    <span class="n">delimiters</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;^&quot;</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span>
    <span class="n">regexPattern</span> <span class="o">=</span> <span class="s2">&quot;|&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">,</span> <span class="n">delimiters</span><span class="p">))</span>
      
    <span class="n">ind</span> <span class="o">=</span> <span class="n">eqtn</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">)</span>
    <span class="n">left</span> <span class="o">=</span> <span class="n">eqtn</span><span class="p">[:</span><span class="n">ind</span><span class="p">]</span> 
    <span class="n">right</span> <span class="o">=</span> <span class="n">eqtn</span><span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="n">ind</span><span class="p">:]</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">left</span><span class="p">)</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
    <span class="n">arr2</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">right</span><span class="p">)</span>
    <span class="n">arr2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr2</span><span class="p">))</span>
    <span class="n">variables</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="c1"># Add variables</span>
    <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">var_names</span><span class="p">:</span>
            <span class="k">break</span>
            
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">arr2</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">var_names</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">variables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">symbols</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;__m&quot;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;__m&quot;</span><span class="p">)</span>
            <span class="n">vv</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:</span><span class="n">ind</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">vv</span> <span class="ow">in</span> <span class="n">var_names</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
                <span class="n">variables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">symbols</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
                <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">&quot;__p&quot;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;__p&quot;</span><span class="p">)</span>
            <span class="n">vv</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:</span><span class="n">ind</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">vv</span> <span class="ow">in</span> <span class="n">var_names</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
                <span class="n">variables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">symbols</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
                <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                
    <span class="c1"># Add exogenous variables</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">arr2</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;__m&quot;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;__m&quot;</span><span class="p">)</span>
            <span class="n">vv</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:</span><span class="n">ind</span><span class="p">]</span>
        <span class="k">elif</span> <span class="s2">&quot;__p&quot;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;__p&quot;</span><span class="p">)</span>
            <span class="n">vv</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:</span><span class="n">ind</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vv</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">exog_names</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">variables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">symbols</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">vv</span> <span class="ow">in</span> <span class="n">exog_names</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">variables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">symbols</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            
    <span class="c1"># Add parameters</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">arr2</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">param_names</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">variables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">symbols</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
          
    <span class="n">func</span> <span class="o">=</span> <span class="n">lambdify</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span><span class="n">right</span><span class="p">,</span><span class="s2">&quot;numpy&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">func</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">args</span></div>


<div class="viewcode-block" id="getExogMatrix">
<a class="viewcode-back" href="../../../../source/snowdrop.src.utils.html#snowdrop.src.utils.equations.getExogMatrix">[docs]</a>
<span class="k">def</span> <span class="nf">getExogMatrix</span><span class="p">(</span><span class="n">eqs</span><span class="p">,</span><span class="n">exog</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute matrix of exogenous variables.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    eqs : list</span>
<span class="sd">        Equations.</span>
<span class="sd">    exog : list</span>
<span class="sd">        Exogenous variables.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Matrix of exogenous variables.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">eqs</span><span class="p">)</span>
    <span class="n">m</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">exog</span><span class="p">)</span>
    <span class="n">W</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">))</span>
    
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">eq</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eqs</span><span class="p">):</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">regexPattern</span><span class="p">,</span><span class="n">eq</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">arr</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">j</span><span class="p">,</span><span class="n">exo</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">exog</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">exo</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span> <span class="c1"># eq</span>
                <span class="n">W</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> 
                
    <span class="k">return</span> <span class="n">W</span></div>

                
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main entry point.&quot;&quot;&quot;</span>
    <span class="c1"># variables = [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]</span>
    <span class="c1"># eqs = []</span>
    <span class="c1"># eq = &quot;a(1 ) + b( +21) = c( -3 )&quot;</span>
    <span class="c1"># eqs.append(eq)</span>
    <span class="c1"># eq = &quot; a(+10) + b( -20 ) = g( 30 ) &quot;</span>
    <span class="c1"># eqs.append(eq)</span>
    
    <span class="c1"># max_lead,min_lag,n_fwd_looking_var,n_bkwd_looking_var,var_lead,var_lag = getMaxLeadsLags(eqs,variables)</span>
    <span class="c1"># print(max_lead,min_lag)</span>
    
    <span class="c1"># endog = [&#39;L_GDP&#39;, &#39;L_GDP_BAR&#39;, &#39;DL_GDP_BAR&#39;, &#39;L_GDP_GAP&#39;, &#39;PIE&#39;, &#39;PIE_TAR&#39;, &#39;PIE_EXP&#39;, &#39;UNR&#39;, &#39;UNR_BAR&#39;, &#39;UNR_GAP&#39;, &#39;G_UNR_BAR&#39;]</span>
    <span class="c1"># eqs=[&#39;PIE = lambda1*PIE(+1) + (1-lambda1)*PIE(-1)+ lambda3*L_GDP_GAP&#39;]</span>
    <span class="c1"># mod_eqs = modifyEquations(eqs=eqs,variables=endog)</span>
    <span class="c1"># print(mod_eqs)</span>
    
    <span class="c1"># eq = &quot;au__ - (-lockdown_policy*theta_lockdown + 1)**2*(ci__*cs__*i__m1_*pi1*s__m1_ + i__m1_*ni__*ns__*pi2*s__m1_ + i__m1_*pi3*s__m1_)&quot;</span>
    <span class="c1"># #print(fixEquation(eq))</span>
    <span class="c1"># eq = &quot;F__*pie__**(1/(gam - 1))*xi*((-pie__**(1/(gam - 1))*xi + 1)/(1 - xi))**(1 - gam)*(1 - gam)/(pie__*(gam - 1)*(-pie__**(1/(gam - 1))*xi + 1))&quot;</span>
    <span class="c1"># eq = &quot;(x**2/9+y**3)**5&quot;</span>
    <span class="c1"># print(fixEquation(eq))</span>
    
    <span class="c1"># eq = &quot;&quot;&quot;log(ISR_COM_FE_R) = 0+ISR_COM1*(((log(RPOIL_PERM(-2)/RPOIL_PERM_BAR*ISR_SUB_OIL(-2))+PERSIST_E_ISR_RPOIL_CYC*E_ISR_RPOIL_CYC(-2)+E_ISR_RPOIL_PERM(-2))/3)+((log(RPOIL_PERM(-1)/RPOIL_PERM_BAR*ISR_SUB_OIL(-1))+PERSIST_E_ISR_RPOIL_CYC*E_ISR_RPOIL_CYC(-1)+E_ISR_RPOIL_PERM(-1))/3)+((log(RPOIL_PERM/RPOIL_PERM_BAR*ISR_SUB_OIL)+PERSIST_E_ISR_RPOIL_CYC*E_ISR_RPOIL_CYC+E_ISR_RPOIL_PERM)/3))+ISR_COM2*(log(RPOIL_CYC*ISR_SUB_OIL)+E_ISR_RPOIL_CYC)+ISR_COM4*(((log(RPMETAL_PERM(-2)/RPMETAL_PERM_BAR)+PERSIST_E_ISR_RPMETAL_CYC*E_ISR_RPMETAL_CYC(-2)+E_ISR_RPMETAL_PERM(-2))/3)+((log(RPMETAL_PERM(-1)/RPMETAL_PERM_BAR)+PERSIST_E_ISR_RPMETAL_CYC*E_ISR_RPMETAL_CYC(-1)+E_ISR_RPMETAL_PERM(-1))/3)+((log(RPMETAL_PERM/RPMETAL_PERM_BAR)+PERSIST_E_ISR_RPMETAL_CYC*E_ISR_RPMETAL_CYC+E_ISR_RPMETAL_PERM)/3))+ISR_COM5*(log(RPMETAL_CYC)+E_ISR_RPMETAL_CYC)&quot;&quot;&quot;       </span>
    <span class="c1"># endog = [&#39;E_WRL_PRODOIL_CYC_R&#39;, &#39;ISR_ACT_R&#39;, &#39;ISR_BREVAL_N&#39;, &#39;ISR_B_N&#39;, &#39;ISR_B_RAT&#39;, &#39;ISR_CFOOD_R&#39;, &#39;ISR_CNCOM_R&#39;, &#39;ISR_COIL_R&#39;, &#39;ISR_COMEFFECT_R&#39;, &#39;ISR_COM_FE_R&#39;, &#39;ISR_CPI13&#39;, &#39;ISR_CPINCOM_P&#39;, &#39;ISR_CPIX_P&#39;, &#39;ISR_CPI_P&#39;, &#39;ISR_CURBAL_N&#39;, &#39;ISR_C_LIQ_R&#39;, &#39;ISR_C_OLG_R&#39;, &#39;ISR_C_R&#39;, &#39;ISR_C_RAT&#39;, &#39;ISR_DELTA&#39;, &#39;ISR_EPS&#39;, &#39;ISR_FACTFOOD_R&#39;, &#39;ISR_FACT_R&#39;, &#39;ISR_FXPREM&#39;, &#39;ISR_GC_N&#39;, &#39;ISR_GC_R&#39;, &#39;ISR_GC_RAT&#39;, &#39;ISR_GDEF_N&#39;, &#39;ISR_GDEF_RAT&#39;, &#39;ISR_GDEF_TAR&#39;, &#39;ISR_GDPINC_N&#39;, &#39;ISR_GDPSIZE&#39;, &#39;ISR_GDP_FE_R&#39;, &#39;ISR_GDP_N&#39;, &#39;ISR_GDP_R&#39;, &#39;ISR_GE_N&#39;, &#39;ISR_GISTOCK_R&#39;, &#39;ISR_GI_N&#39;, &#39;ISR_GI_R&#39;, &#39;ISR_GI_RAT&#39;, &#39;ISR_GNP_R&#39;, &#39;ISR_GOVCHECK&#39;, &#39;ISR_GSUB_N&#39;, &#39;ISR_GTARIFF_N&#39;, &#39;ISR_G_R&#39;, &#39;ISR_IFOODA_R&#39;, &#39;ISR_IFOOD_R&#39;, &#39;ISR_IMETALA_R&#39;, &#39;ISR_IMETAL_R&#39;, &#39;ISR_IM_R&#39;, &#39;ISR_INFCPI&#39;, &#39;ISR_INFCPIX&#39;, &#39;ISR_INFEXP&#39;, &#39;ISR_INFL&#39;, &#39;ISR_INFPIM&#39;, &#39;ISR_INFWAGE&#39;, &#39;ISR_INFWAGEEFF&#39;, &#39;ISR_INFWEXP&#39;, &#39;ISR_INT&#39;, &#39;ISR_INT10&#39;, &#39;ISR_INTC&#39;, &#39;ISR_INTCORP&#39;, &#39;ISR_INTCOST_N&#39;, &#39;ISR_INTCOST_RAT&#39;, &#39;ISR_INTGB&#39;, &#39;ISR_INTMP&#39;, &#39;ISR_INTMPU&#39;, &#39;ISR_INTNFA&#39;, &#39;ISR_INTRF&#39;, &#39;ISR_INTRF10&#39;, &#39;ISR_INTXM10&#39;, &#39;ISR_INVESTP_R&#39;, &#39;ISR_INVEST_R&#39;, &#39;ISR_INVEST_RAT&#39;, &#39;ISR_IOILA_R&#39;, &#39;ISR_IOIL_R&#39;, &#39;ISR_IT_R&#39;, &#39;ISR_IT_RAT&#39;, &#39;ISR_J&#39;, &#39;ISR_KG_R&#39;, &#39;ISR_K_R&#39;, &#39;ISR_LABH_FE_R&#39;, &#39;ISR_LABH_R&#39;, &#39;ISR_LAB_FE_R&#39;, &#39;ISR_LAB_R&#39;, &#39;ISR_LF_FE_R&#39;, &#39;ISR_LF_R&#39;, &#39;ISR_LSTAX_RAT&#39;, &#39;ISR_MKTPREM&#39;, &#39;ISR_MKTPREMSM&#39;, &#39;ISR_MPC&#39;, &#39;ISR_MPCINV&#39;, &#39;ISR_NFAREVAL_N&#39;, &#39;ISR_NFA_D&#39;, &#39;ISR_NFA_RAT&#39;, &#39;ISR_NPOPB_R&#39;, &#39;ISR_NPOPH_R&#39;, &#39;ISR_NPOP_R&#39;, &#39;ISR_NTRFPSPILL_FE_R&#39;, &#39;ISR_OILRECEIPT_N&#39;, &#39;ISR_OILSUB_N&#39;, &#39;ISR_PART&#39;, &#39;ISR_PARTH&#39;, &#39;ISR_PARTH_DES&#39;, &#39;ISR_PARTH_FE&#39;, &#39;ISR_PART_DES&#39;, &#39;ISR_PART_FE&#39;, &#39;ISR_PCFOOD_P&#39;, &#39;ISR_PCOIL_P&#39;, &#39;ISR_PCW_P&#39;, &#39;ISR_PC_P&#39;, &#39;ISR_PFM_P&#39;, &#39;ISR_PFOOD_P&#39;, &#39;ISR_PGDP_P&#39;, &#39;ISR_PGDP_P_AVG&#39;, &#39;ISR_PG_P&#39;, &#39;ISR_PIMADJ_P&#39;, &#39;ISR_PIMA_P&#39;, &#39;ISR_PIM_P&#39;, &#39;ISR_PIT_P&#39;, &#39;ISR_PI_P&#39;, &#39;ISR_PMETAL_CYC_P&#39;, &#39;ISR_PMETAL_P&#39;, &#39;ISR_PMETAL_PERM_P&#39;, &#39;ISR_POIL_CYC_P&#39;, &#39;ISR_POIL_P&#39;, &#39;ISR_POIL_PERM_P&#39;, &#39;ISR_POIL_P_SUB&#39;, &#39;ISR_PRIMSUR_N&#39;, &#39;ISR_PRIMSUR_TAR&#39;, &#39;ISR_PRODFOOD_CYC_R&#39;, &#39;ISR_PRODFOOD_PERM_R&#39;, &#39;ISR_PRODFOOD_R&#39;, &#39;ISR_PSAVING_N&#39;, &#39;ISR_PXMF_P&#39;, &#39;ISR_PXMUNADJ_P&#39;, &#39;ISR_PXM_P&#39;, &#39;ISR_PXT_P&#39;, &#39;ISR_Q_P&#39;, &#39;ISR_R&#39;, &#39;ISR_R10&#39;, &#39;ISR_RC&#39;, &#39;ISR_RC0_SM&#39;, &#39;ISR_RC0_WM&#39;, &#39;ISR_RCI&#39;, &#39;ISR_RCORP&#39;, &#39;ISR_REER&#39;, &#39;ISR_RK8&#39;, &#39;ISR_RK_P&#39;, &#39;ISR_RPREM&#39;, &#39;ISR_R_NEUT&#39;, &#39;ISR_SOVPREM&#39;, &#39;ISR_SOVPREMSM&#39;, &#39;ISR_SUB_OIL&#39;, &#39;ISR_TAU_C&#39;, &#39;ISR_TAU_K&#39;, &#39;ISR_TAU_L&#39;, &#39;ISR_TAU_OIL&#39;, &#39;ISR_TAXC_N&#39;, &#39;ISR_TAXC_RAT&#39;, &#39;ISR_TAXK_N&#39;, &#39;ISR_TAXK_RAT&#39;, &#39;ISR_TAXLH_N&#39;, &#39;ISR_TAXL_N&#39;, &#39;ISR_TAXL_RAT&#39;, &#39;ISR_TAXOIL_N&#39;, &#39;ISR_TAX_N&#39;, &#39;ISR_TAX_RAT&#39;, &#39;ISR_TB_N&#39;, &#39;ISR_TFPEFFECT_R&#39;, &#39;ISR_TFPKGSPILL_FE_R&#39;, &#39;ISR_TFPSPILL_FE_R&#39;, &#39;ISR_TFP_FE_R&#39;, &#39;ISR_TFP_FE_R_AVG&#39;, &#39;ISR_TFP_R&#39;, &#39;ISR_TM&#39;, &#39;ISR_TPREM&#39;, &#39;ISR_TRANSFER_LIQ_N&#39;, &#39;ISR_TRANSFER_N&#39;, &#39;ISR_TRANSFER_OLG_N&#39;, &#39;ISR_TRANSFER_RAT&#39;, &#39;ISR_TRANSFER_TARG_N&#39;, &#39;ISR_TRANSFER_TARG_RAT&#39;, &#39;ISR_TRFPSPILL_FE_R&#39;, &#39;ISR_UFOOD_R&#39;, &#39;ISR_UNR&#39;, &#39;ISR_UNRH&#39;, &#39;ISR_UNRH_FE&#39;, &#39;ISR_UNR_FE&#39;, &#39;ISR_USA_SM&#39;, &#39;ISR_USA_WM&#39;, &#39;ISR_WAGEEFF_N&#39;, &#39;ISR_WAGEH_N&#39;, &#39;ISR_WAGE_N&#39;, &#39;ISR_WF_R&#39;, &#39;ISR_WH_R&#39;, &#39;ISR_WK_N&#39;, &#39;ISR_WO_R&#39;, &#39;ISR_W_R&#39;, &#39;ISR_W_R_AVG&#39;, &#39;ISR_XFOOD_R&#39;, &#39;ISR_XMA_R&#39;, &#39;ISR_XM_R&#39;, &#39;ISR_XT_R&#39;, &#39;ISR_XT_RAT&#39;, &#39;ISR_YCAP_N&#39;, &#39;ISR_YD_R&#39;, &#39;ISR_YLABH_N&#39;, &#39;ISR_YLAB_N&#39;, &#39;ISR_Z&#39;, &#39;ISR_Z_AVG&#39;, &#39;ISR_Z_NFA&#39;, &#39;PFOOD_P&#39;, &#39;PMETAL_CYC_P&#39;, &#39;PMETAL_P&#39;, &#39;PMETAL_PERM_P&#39;, &#39;POIL_CYC_P&#39;, &#39;POIL_P&#39;, &#39;POIL_PERM_P&#39;, &#39;RC0_ACT_R&#39;, &#39;RC0_BREVAL_N&#39;, &#39;RC0_B_N&#39;, &#39;RC0_B_RAT&#39;, &#39;RC0_CFOOD_R&#39;, &#39;RC0_CNCOM_R&#39;, &#39;RC0_COIL_R&#39;, &#39;RC0_COMEFFECT_R&#39;, &#39;RC0_COM_FE_R&#39;, &#39;RC0_CPI13&#39;, &#39;RC0_CPINCOM_P&#39;, &#39;RC0_CPIX_P&#39;, &#39;RC0_CPI_P&#39;, &#39;RC0_CURBAL_N&#39;, &#39;RC0_C_LIQ_R&#39;, &#39;RC0_C_OLG_R&#39;, &#39;RC0_C_R&#39;, &#39;RC0_C_RAT&#39;, &#39;RC0_DELTA&#39;, &#39;RC0_EPS&#39;, &#39;RC0_FACTFOOD_R&#39;, &#39;RC0_FACTMETAL_R&#39;, &#39;RC0_FACTOIL_R&#39;, &#39;RC0_FACT_R&#39;, &#39;RC0_FXPREM&#39;, &#39;RC0_GC_N&#39;, &#39;RC0_GC_R&#39;, &#39;RC0_GC_RAT&#39;, &#39;RC0_GDEF_N&#39;, &#39;RC0_GDEF_RAT&#39;, &#39;RC0_GDEF_TAR&#39;, &#39;RC0_GDPINC_N&#39;, &#39;RC0_GDPSIZE&#39;, &#39;RC0_GDP_FE_R&#39;, &#39;RC0_GDP_N&#39;, &#39;RC0_GDP_R&#39;, &#39;RC0_GE_N&#39;, &#39;RC0_GISTOCK_R&#39;, &#39;RC0_GI_N&#39;, &#39;RC0_GI_R&#39;, &#39;RC0_GI_RAT&#39;, &#39;RC0_GNP_R&#39;, &#39;RC0_GOVCHECK&#39;, &#39;RC0_GSUB_N&#39;, &#39;RC0_GTARIFF_N&#39;, &#39;RC0_G_R&#39;, &#39;RC0_IFOODA_R&#39;, &#39;RC0_IFOOD_R&#39;, &#39;RC0_IMETALA_R&#39;, &#39;RC0_IMETAL_R&#39;, &#39;RC0_IM_R&#39;, &#39;RC0_INFCPI&#39;, &#39;RC0_INFCPIX&#39;, &#39;RC0_INFEXP&#39;, &#39;RC0_INFL&#39;, &#39;RC0_INFPIM&#39;, &#39;RC0_INFWAGE&#39;, &#39;RC0_INFWAGEEFF&#39;, &#39;RC0_INFWEXP&#39;, &#39;RC0_INT&#39;, &#39;RC0_INT10&#39;, &#39;RC0_INTC&#39;, &#39;RC0_INTCORP&#39;, &#39;RC0_INTCOST_N&#39;, &#39;RC0_INTCOST_RAT&#39;, &#39;RC0_INTGB&#39;, &#39;RC0_INTMP&#39;, &#39;RC0_INTMPU&#39;, &#39;RC0_INTNFA&#39;, &#39;RC0_INTRF&#39;, &#39;RC0_INTRF10&#39;, &#39;RC0_INTXM10&#39;, &#39;RC0_INVESTP_R&#39;, &#39;RC0_INVEST_R&#39;, &#39;RC0_INVEST_RAT&#39;, &#39;RC0_IOILA_R&#39;, &#39;RC0_IOIL_R&#39;, &#39;RC0_ISR_SM&#39;, &#39;RC0_ISR_WM&#39;, &#39;RC0_IT_R&#39;, &#39;RC0_IT_RAT&#39;, &#39;RC0_J&#39;, &#39;RC0_KG_R&#39;, &#39;RC0_K_R&#39;, &#39;RC0_LABH_FE_R&#39;, &#39;RC0_LABH_R&#39;, &#39;RC0_LAB_FE_R&#39;, &#39;RC0_LAB_R&#39;, &#39;RC0_LF_FE_R&#39;, &#39;RC0_LF_R&#39;, &#39;RC0_LSTAX_RAT&#39;, &#39;RC0_MKTPREM&#39;, &#39;RC0_MKTPREMSM&#39;, &#39;RC0_MPC&#39;, &#39;RC0_MPCINV&#39;, &#39;RC0_MROYALTIES_N&#39;, &#39;RC0_MROYALTY&#39;, &#39;RC0_NFAREVAL_N&#39;, &#39;RC0_NFA_D&#39;, &#39;RC0_NFA_RAT&#39;, &#39;RC0_NPOPB_R&#39;, &#39;RC0_NPOPH_R&#39;, &#39;RC0_NPOP_R&#39;, &#39;RC0_NTRFPSPILL_FE_R&#39;, &#39;RC0_OILPAY_N&#39;, &#39;RC0_OILRECEIPT_N&#39;, &#39;RC0_OILSHARF&#39;, &#39;RC0_OILSUB_N&#39;, &#39;RC0_PART&#39;, &#39;RC0_PARTH&#39;, &#39;RC0_PARTH_DES&#39;, &#39;RC0_PARTH_FE&#39;, &#39;RC0_PART_DES&#39;, &#39;RC0_PART_FE&#39;, &#39;RC0_PCFOOD_P&#39;, &#39;RC0_PCOIL_P&#39;, &#39;RC0_PCW_P&#39;, &#39;RC0_PC_P&#39;, &#39;RC0_PFM_P&#39;, &#39;RC0_PFOOD_P&#39;, &#39;RC0_PGDP_P&#39;, &#39;RC0_PGDP_P_AVG&#39;, &#39;RC0_PG_P&#39;, &#39;RC0_PIMADJ_P&#39;, &#39;RC0_PIMA_P&#39;, &#39;RC0_PIM_P&#39;, &#39;RC0_PIT_P&#39;, &#39;RC0_PI_P&#39;, &#39;RC0_PMETAL_CYC_P&#39;, &#39;RC0_PMETAL_P&#39;, &#39;RC0_PMETAL_PERM_P&#39;, &#39;RC0_POIL_CYC_P&#39;, &#39;RC0_POIL_P&#39;, &#39;RC0_POIL_PERM_P&#39;, &#39;RC0_POIL_P_SUB&#39;, &#39;RC0_PRIMSUR_N&#39;, &#39;RC0_PRIMSUR_TAR&#39;, &#39;RC0_PRODFOOD_CYC_R&#39;, &#39;RC0_PRODFOOD_PERM_R&#39;, &#39;RC0_PRODFOOD_R&#39;, &#39;RC0_PRODMETAL_CYC_R&#39;, &#39;RC0_PRODMETAL_PERM_R&#39;, &#39;RC0_PRODMETAL_R&#39;, &#39;RC0_PRODOIL_CYC_R&#39;, &#39;RC0_PRODOIL_PERM_R&#39;, &#39;RC0_PRODOIL_R&#39;, &#39;RC0_PSAVING_N&#39;, &#39;RC0_PXMF_P&#39;, &#39;RC0_PXMUNADJ_P&#39;, &#39;RC0_PXM_P&#39;, &#39;RC0_PXT_P&#39;, &#39;RC0_Q_P&#39;, &#39;RC0_R&#39;, &#39;RC0_R10&#39;, &#39;RC0_RC&#39;, &#39;RC0_RCI&#39;, &#39;RC0_RCORP&#39;, &#39;RC0_REER&#39;, &#39;RC0_RK8&#39;, &#39;RC0_RK_P&#39;, &#39;RC0_ROYALTIES_N&#39;, &#39;RC0_ROYALTY&#39;, &#39;RC0_RPREM&#39;, &#39;RC0_R_NEUT&#39;, &#39;RC0_SOVPREM&#39;, &#39;RC0_SOVPREMSM&#39;, &#39;RC0_SUB_OIL&#39;, &#39;RC0_TAU_C&#39;, &#39;RC0_TAU_K&#39;, &#39;RC0_TAU_L&#39;, &#39;RC0_TAU_OIL&#39;, &#39;RC0_TAXC_N&#39;, &#39;RC0_TAXC_RAT&#39;, &#39;RC0_TAXK_N&#39;, &#39;RC0_TAXK_RAT&#39;, &#39;RC0_TAXLH_N&#39;, &#39;RC0_TAXL_N&#39;, &#39;RC0_TAXL_RAT&#39;, &#39;RC0_TAXOIL_N&#39;, &#39;RC0_TAX_N&#39;, &#39;RC0_TAX_RAT&#39;, &#39;RC0_TB_N&#39;, &#39;RC0_TFPEFFECT_R&#39;, &#39;RC0_TFPKGSPILL_FE_R&#39;, &#39;RC0_TFPSPILL_FE_R&#39;, &#39;RC0_TFP_FE_R&#39;, &#39;RC0_TFP_FE_R_AVG&#39;, &#39;RC0_TFP_R&#39;, &#39;RC0_TM&#39;, &#39;RC0_TPREM&#39;, &#39;RC0_TRANSFER_LIQ_N&#39;, &#39;RC0_TRANSFER_N&#39;, &#39;RC0_TRANSFER_OLG_N&#39;, &#39;RC0_TRANSFER_RAT&#39;, &#39;RC0_TRANSFER_TARG_N&#39;, &#39;RC0_TRANSFER_TARG_RAT&#39;, &#39;RC0_TRFPSPILL_FE_R&#39;, &#39;RC0_UFOOD_R&#39;, &#39;RC0_UMETAL_R&#39;, &#39;RC0_UNR&#39;, &#39;RC0_UNRH&#39;, &#39;RC0_UNRH_FE&#39;, &#39;RC0_UNR_FE&#39;, &#39;RC0_UOIL_R&#39;, &#39;RC0_USA_SM&#39;, &#39;RC0_USA_WM&#39;, &#39;RC0_WAGEEFF_N&#39;, &#39;RC0_WAGEH_N&#39;, &#39;RC0_WAGE_N&#39;, &#39;RC0_WF_R&#39;, &#39;RC0_WH_R&#39;, &#39;RC0_WK_N&#39;, &#39;RC0_WO_R&#39;, &#39;RC0_W_R&#39;, &#39;RC0_W_R_AVG&#39;, &#39;RC0_XFOOD_R&#39;, &#39;RC0_XMA_R&#39;, &#39;RC0_XMETAL_R&#39;, &#39;RC0_XM_R&#39;, &#39;RC0_XOIL_R&#39;, &#39;RC0_XT_R&#39;, &#39;RC0_XT_RAT&#39;, &#39;RC0_YCAP_N&#39;, &#39;RC0_YD_R&#39;, &#39;RC0_YLABH_N&#39;, &#39;RC0_YLAB_N&#39;, &#39;RC0_Z&#39;, &#39;RC0_Z_AVG&#39;, &#39;RC0_Z_NFA&#39;, &#39;RPFOOD&#39;, &#39;RPFOOD_CYC&#39;, &#39;RPFOOD_PERM&#39;, &#39;RPMETAL&#39;, &#39;RPMETAL_CYC&#39;, &#39;RPMETAL_CYC_AVG&#39;, &#39;RPMETAL_PERM&#39;, &#39;RPMETAL_PERM_AVG&#39;, &#39;RPOIL&#39;, &#39;RPOIL_CYC&#39;, &#39;RPOIL_CYC_AVG&#39;, &#39;RPOIL_PERM&#39;, &#39;RPOIL_PERM_AVG&#39;, &#39;USA_ACT_R&#39;, &#39;USA_BREVAL_N&#39;, &#39;USA_B_N&#39;, &#39;USA_B_RAT&#39;, &#39;USA_CFOOD_R&#39;, &#39;USA_CNCOM_R&#39;, &#39;USA_COIL_R&#39;, &#39;USA_COMEFFECT_R&#39;, &#39;USA_COM_FE_R&#39;, &#39;USA_CPI13&#39;, &#39;USA_CPINCOM_P&#39;, &#39;USA_CPIX_P&#39;, &#39;USA_CPI_P&#39;, &#39;USA_CURBAL_N&#39;, &#39;USA_C_LIQ_R&#39;, &#39;USA_C_OLG_R&#39;, &#39;USA_C_R&#39;, &#39;USA_C_RAT&#39;, &#39;USA_DELTA&#39;, &#39;USA_EPS&#39;, &#39;USA_FACTFOOD_R&#39;, &#39;USA_FACTMETAL_R&#39;, &#39;USA_FACTOIL_R&#39;, &#39;USA_FACT_R&#39;, &#39;USA_FXPREM&#39;, &#39;USA_GC_N&#39;, &#39;USA_GC_R&#39;, &#39;USA_GC_RAT&#39;, &#39;USA_GDEF_N&#39;, &#39;USA_GDEF_RAT&#39;, &#39;USA_GDEF_TAR&#39;, &#39;USA_GDPINC_N&#39;, &#39;USA_GDPSIZE&#39;, &#39;USA_GDP_FE_R&#39;, &#39;USA_GDP_N&#39;, &#39;USA_GDP_R&#39;, &#39;USA_GE_N&#39;, &#39;USA_GISTOCK_R&#39;, &#39;USA_GI_N&#39;, &#39;USA_GI_R&#39;, &#39;USA_GI_RAT&#39;, &#39;USA_GNP_R&#39;, &#39;USA_GOVCHECK&#39;, &#39;USA_GSUB_N&#39;, &#39;USA_GTARIFF_N&#39;, &#39;USA_G_R&#39;, &#39;USA_IFOODA_R&#39;, &#39;USA_IFOOD_R&#39;, &#39;USA_IMETALA_R&#39;, &#39;USA_IMETAL_R&#39;, &#39;USA_IM_R&#39;, &#39;USA_INFCPI&#39;, &#39;USA_INFCPIX&#39;, &#39;USA_INFEXP&#39;, &#39;USA_INFL&#39;, &#39;USA_INFPIM&#39;, &#39;USA_INFWAGE&#39;, &#39;USA_INFWAGEEFF&#39;, &#39;USA_INFWEXP&#39;, &#39;USA_INT&#39;, &#39;USA_INT10&#39;, &#39;USA_INTC&#39;, &#39;USA_INTCORP&#39;, &#39;USA_INTCOST_N&#39;, &#39;USA_INTCOST_RAT&#39;, &#39;USA_INTGB&#39;, &#39;USA_INTMP&#39;, &#39;USA_INTMPU&#39;, &#39;USA_INTNFA&#39;, &#39;USA_INTRF&#39;, &#39;USA_INTRF10&#39;, &#39;USA_INTXM10&#39;, &#39;USA_INVESTP_R&#39;, &#39;USA_INVEST_R&#39;, &#39;USA_INVEST_RAT&#39;, &#39;USA_IOILA_R&#39;, &#39;USA_IOIL_R&#39;, &#39;USA_ISR_SM&#39;, &#39;USA_ISR_WM&#39;, &#39;USA_IT_R&#39;, &#39;USA_IT_RAT&#39;, &#39;USA_J&#39;, &#39;USA_KG_R&#39;, &#39;USA_K_R&#39;, &#39;USA_LABH_FE_R&#39;, &#39;USA_LABH_R&#39;, &#39;USA_LAB_FE_R&#39;, &#39;USA_LAB_R&#39;, &#39;USA_LF_FE_R&#39;, &#39;USA_LF_R&#39;, &#39;USA_LSTAX_RAT&#39;, &#39;USA_MKTPREM&#39;, &#39;USA_MKTPREMSM&#39;, &#39;USA_MPC&#39;, &#39;USA_MPCINV&#39;, &#39;USA_MROYALTIES_N&#39;, &#39;USA_MROYALTY&#39;, &#39;USA_NFAREVAL_N&#39;, &#39;USA_NFA_D&#39;, &#39;USA_NFA_RAT&#39;, &#39;USA_NPOPB_R&#39;, &#39;USA_NPOPH_R&#39;, &#39;USA_NPOP_R&#39;, &#39;USA_NTRFPSPILL_FE_R&#39;, &#39;USA_OILPAY_N&#39;, &#39;USA_OILRECEIPT_N&#39;, &#39;USA_OILSHARF&#39;, &#39;USA_OILSUB_N&#39;, &#39;USA_PART&#39;, &#39;USA_PARTH&#39;, &#39;USA_PARTH_DES&#39;, &#39;USA_PARTH_FE&#39;, &#39;USA_PART_DES&#39;, &#39;USA_PART_FE&#39;, &#39;USA_PCFOOD_P&#39;, &#39;USA_PCOIL_P&#39;, &#39;USA_PCW_P&#39;, &#39;USA_PC_P&#39;, &#39;USA_PFM_P&#39;, &#39;USA_PFOOD_P&#39;, &#39;USA_PGDP_P&#39;, &#39;USA_PGDP_P_AVG&#39;, &#39;USA_PG_P&#39;, &#39;USA_PIMADJ_P&#39;, &#39;USA_PIMA_P&#39;, &#39;USA_PIM_P&#39;, &#39;USA_PIT_P&#39;, &#39;USA_PI_P&#39;, &#39;USA_PMETAL_CYC_P&#39;, &#39;USA_PMETAL_P&#39;, &#39;USA_PMETAL_PERM_P&#39;, &#39;USA_POIL_CYC_P&#39;, &#39;USA_POIL_P&#39;, &#39;USA_POIL_PERM_P&#39;, &#39;USA_POIL_P_SUB&#39;, &#39;USA_PRIMSUR_N&#39;, &#39;USA_PRIMSUR_TAR&#39;, &#39;USA_PRODFOOD_CYC_R&#39;, &#39;USA_PRODFOOD_PERM_R&#39;, &#39;USA_PRODFOOD_R&#39;, &#39;USA_PRODMETAL_CYC_R&#39;, &#39;USA_PRODMETAL_PERM_R&#39;, &#39;USA_PRODMETAL_R&#39;, &#39;USA_PRODOIL_CYC_R&#39;, &#39;USA_PRODOIL_PERM_R&#39;, &#39;USA_PRODOIL_R&#39;, &#39;USA_PSAVING_N&#39;, &#39;USA_PXMF_P&#39;, &#39;USA_PXMUNADJ_P&#39;, &#39;USA_PXM_P&#39;, &#39;USA_PXT_P&#39;, &#39;USA_Q_P&#39;, &#39;USA_R&#39;, &#39;USA_R10&#39;, &#39;USA_RC&#39;, &#39;USA_RC0_SM&#39;, &#39;USA_RC0_WM&#39;, &#39;USA_RCI&#39;, &#39;USA_RCORP&#39;, &#39;USA_REER&#39;, &#39;USA_RK8&#39;, &#39;USA_RK_P&#39;, &#39;USA_ROYALTIES_N&#39;, &#39;USA_ROYALTY&#39;, &#39;USA_RPREM&#39;, &#39;USA_R_NEUT&#39;, &#39;USA_SOVPREM&#39;, &#39;USA_SOVPREMSM&#39;, &#39;USA_SUB_OIL&#39;, &#39;USA_TAU_C&#39;, &#39;USA_TAU_K&#39;, &#39;USA_TAU_L&#39;, &#39;USA_TAU_OIL&#39;, &#39;USA_TAXC_N&#39;, &#39;USA_TAXC_RAT&#39;, &#39;USA_TAXK_N&#39;, &#39;USA_TAXK_RAT&#39;, &#39;USA_TAXLH_N&#39;, &#39;USA_TAXL_N&#39;, &#39;USA_TAXL_RAT&#39;, &#39;USA_TAXOIL_N&#39;, &#39;USA_TAX_N&#39;, &#39;USA_TAX_RAT&#39;, &#39;USA_TB_N&#39;, &#39;USA_TFPEFFECT_R&#39;, &#39;USA_TFPKGSPILL_FE_R&#39;, &#39;USA_TFPSPILL_FE_R&#39;, &#39;USA_TFP_FE_R&#39;, &#39;USA_TFP_FE_R_AVG&#39;, &#39;USA_TFP_R&#39;, &#39;USA_TM&#39;, &#39;USA_TPREM&#39;, &#39;USA_TRANSFER_LIQ_N&#39;, &#39;USA_TRANSFER_N&#39;, &#39;USA_TRANSFER_OLG_N&#39;, &#39;USA_TRANSFER_RAT&#39;, &#39;USA_TRANSFER_TARG_N&#39;, &#39;USA_TRANSFER_TARG_RAT&#39;, &#39;USA_TRFPSPILL_FE_R&#39;, &#39;USA_UFOOD_R&#39;, &#39;USA_UMETAL_R&#39;, &#39;USA_UNR&#39;, &#39;USA_UNRH&#39;, &#39;USA_UNRH_FE&#39;, &#39;USA_UNR_FE&#39;, &#39;USA_UOIL_R&#39;, &#39;USA_WAGEEFF_N&#39;, &#39;USA_WAGEH_N&#39;, &#39;USA_WAGE_N&#39;, &#39;USA_WF_R&#39;, &#39;USA_WH_R&#39;, &#39;USA_WK_N&#39;, &#39;USA_WO_R&#39;, &#39;USA_W_R&#39;, &#39;USA_W_R_AVG&#39;, &#39;USA_XFOOD_R&#39;, &#39;USA_XMA_R&#39;, &#39;USA_XMETAL_R&#39;, &#39;USA_XM_R&#39;, &#39;USA_XOIL_R&#39;, &#39;USA_XT_R&#39;, &#39;USA_XT_RAT&#39;, &#39;USA_YCAP_N&#39;, &#39;USA_YD_R&#39;, &#39;USA_YLABH_N&#39;, &#39;USA_YLAB_N&#39;, &#39;USA_Z&#39;, &#39;USA_Z_AVG&#39;, &#39;USA_Z_NFA&#39;, &#39;WRL_GDP_FE_METAL_R&#39;, &#39;WRL_GDP_FE_OIL_R&#39;, &#39;WRL_GDP_FE_R&#39;, &#39;WRL_GDP_METAL_R&#39;, &#39;WRL_GDP_OIL_R&#39;, &#39;WRL_GDP_R&#39;, &#39;WRL_PRODFOOD_CYC_R&#39;, &#39;WRL_PRODFOOD_PERM_R&#39;, &#39;WRL_PRODFOOD_R&#39;, &#39;WRL_PRODMETAL_CYC_R&#39;, &#39;WRL_PRODMETAL_PERM_R&#39;, &#39;WRL_PRODMETAL_R&#39;, &#39;WRL_PRODOIL_CYC_R&#39;, &#39;WRL_PRODOIL_PERM_R&#39;, &#39;WRL_PRODOIL_R&#39;, &#39;WRL_XFOOD_R&#39;, &#39;WRL_XMETAL_R&#39;, &#39;WRL_XOIL_R&#39;, &#39;WTRADE_FOOD_N&#39;, &#39;WTRADE_FOOD_R&#39;, &#39;WTRADE_METAL_N&#39;, &#39;WTRADE_METAL_R&#39;, &#39;WTRADE_M_N&#39;, &#39;WTRADE_M_R&#39;, &#39;WTRADE_OIL_N&#39;, &#39;WTRADE_OIL_R&#39;]</span>
    <span class="c1"># params=  [&#39;USA_INTNFA1&#39;, &#39;ISR_EPS_TAR&#39;, &#39;RC0_IM5&#39;, &#39;FILTER_RC0_MPC&#39;, &#39;ISR_SPILLM1&#39;, &#39;RC0_R_NEUT_BAR&#39;, &#39;RC0_XX_PRIMSUR_N&#39;, &#39;PERSISTCOM_ISR&#39;, &#39;ISR_GPROD_SS&#39;, &#39;CONSTANT_USA_PG_P&#39;, &#39;CONSTANT_RPOIL_PERM&#39;, &#39;USA_GC_RAT_BAR&#39;, &#39;FILTER_WTRADE_FOOD_R&#39;, &#39;CONSTANT_USA_FXPREM&#39;, &#39;CONSTANT_RC0_CPINCOM_P&#39;, &#39;CONSTANT_USA_MKTPREM&#39;, &#39;FILTER_USA_PRIMSUR_TAR&#39;, &#39;USA_GDP_N_BAR&#39;, &#39;RC0_COM5&#39;, &#39;RES_ISR_GNP_R&#39;, &#39;USA_COEFPGDP&#39;, &#39;ISR_Q1&#39;, &#39;RC0_IM1&#39;, &#39;FILTER_USA_INTNFA&#39;, &#39;RES_RPOIL_PERM_AVG&#39;, &#39;FILTER_ISR_PXM_P&#39;, &#39;RC0_XX_TRANSFER_N&#39;, &#39;USA_XMETAL2&#39;, &#39;USA_COEFW&#39;, &#39;RES_ISR_INTCORP&#39;, &#39;CONSTANT_USA_CPI_P&#39;, &#39;RC0_GAMMA&#39;, &#39;RES_RPMETAL_CYC_AVG&#39;, &#39;RES_RC0_PCOIL_P&#39;, &#39;USA_COEFTFP&#39;, &#39;ISR_EBASE&#39;, &#39;ISR_INTCOST_RAT_BAR&#39;, &#39;FILTER_USA_PARTH&#39;, &#39;USA_GILRSW&#39;, &#39;RES_RC0_ROYALTIES_N&#39;, &#39;CONSTANT_ISR_GDEF_TAR&#39;, &#39;RES_USA_WO_R&#39;, &#39;ISR_XM2&#39;, &#39;PERSIST_E_RC0_RPMETAL_CYC&#39;, &#39;USA_BNSHK&#39;, &#39;RC0_CFOOD3&#39;, &#39;USA_COM4&#39;, &#39;ISR_BGG4&#39;, &#39;USA_CFOOD3&#39;, &#39;RC0_WEDGEFOOD_P&#39;, &#39;RC0_INTGAP&#39;, &#39;RC0_INFCPIX_TAR&#39;, &#39;FILTER_USA_IMETAL_R&#39;, &#39;ISR_USA_SOIL&#39;, &#39;RC0_RK5&#39;, &#39;USA_GNP_R_BAR&#39;, &#39;FILTER_ISR_PARTH&#39;, &#39;USA_EXP1&#39;, &#39;CONSTANT_RC0_PC_P&#39;, &#39;ISR_XX_TRANSFER_TARG_N&#39;, &#39;RES_ISR_INT10&#39;, &#39;USA_IM5&#39;, &#39;RES_USA_INTRF&#39;, &#39;USA_UNR2&#39;, &#39;USA_TAXL_RAT_BAR&#39;, &#39;USA_BGG3&#39;, &#39;RC0_WT&#39;, &#39;USA_PRODMETAL1&#39;, &#39;CONSTANT_ISR_IOIL_R&#39;, &#39;USA_CPI4&#39;, &#39;RC0_PIM1&#39;, &#39;FILTER_ISR_K_R&#39;, &#39;RES_RC0_Z_NFA&#39;, &#39;USA_PXM1&#39;, &#39;ISR_PARTH_ADJ_STAR&#39;, &#39;RPMETAL_CYC_BAR&#39;, &#39;ISR_IMETAL3&#39;, &#39;RC0_KTAXLRSW&#39;, &#39;FILTER_RC0_TPREM&#39;, &#39;RES_USA_PARTH_FE&#39;, &#39;FILTER_WTRADE_FOOD_N&#39;, &#39;CONSTANT_RC0_IMETAL_R&#39;, &#39;USA_INTINFL&#39;, &#39;RC0_W_R_BAR&#39;, &#39;RC0_INTCOST_RAT_BAR&#39;, &#39;RC0_TAXK_RAT_BAR&#39;, &#39;RC0_CPI7&#39;, &#39;TRDEMETAL_N&#39;, &#39;USA_Q2&#39;, &#39;CONSTANT_ISR_C_OLG_R&#39;, &#39;USA_RK4&#39;, &#39;CONSTANT_RC0_PCW_P&#39;, &#39;USA_RC0_SMETAL&#39;, &#39;ISR_COEFPGDP&#39;, &#39;RES_ISR_C_LIQ_R&#39;, &#39;USA_NSPILLM1&#39;, &#39;FILTER_ISR_TPREM&#39;, &#39;ISR_PSUB_XM&#39;, &#39;ISR_COIL2&#39;, &#39;RC0_CPI4&#39;, &#39;RC0_POIL_P_SUB_BAR&#39;, &#39;FILTER_USA_TAU_OIL&#39;, &#39;RES_ISR_Q_P&#39;, &#39;RC0_GI_N_EXOG&#39;, &#39;USA_Z_BAR&#39;, &#39;ISR_GI_R_BAR&#39;, &#39;RC0_BGG4&#39;, &#39;RES_RC0_Z_AVG&#39;, &#39;ISR_INTMP_BAR&#39;, &#39;USA_COM5&#39;, &#39;USA_LAPH&#39;, &#39;USA_COM1&#39;, &#39;USA_B_RAT_BAR&#39;, &#39;FILTER_ISR_CPI_P&#39;, &#39;ISR_COEFPARTH&#39;, &#39;ISR_IOIL1&#39;, &#39;RES_USA_PCOIL_P&#39;, &#39;CONSTANT_RC0_TPREM&#39;, &#39;RC0_IFOOD1&#39;, &#39;ISR_W_R_BAR&#39;, &#39;RC0_TARGDAMP&#39;, &#39;USA_BETA&#39;, &#39;RC0_CTAXLRSW&#39;, &#39;RC0_XX_TAU_L&#39;, &#39;FILTER_RC0_PRIMSUR_TAR&#39;, &#39;WRL_GDP_OIL_R_BAR&#39;, &#39;FILTER_ISR_PRIMSUR_TAR&#39;, &#39;RES_RC0_INFWEXP&#39;, &#39;ISR_XX_PRIMSUR_N&#39;, &#39;WRL_GDP_R_BAR&#39;, &#39;RC0_ISR_S&#39;, &#39;USA_GI_MPROP&#39;, &#39;ISR_XFOOD1&#39;, &#39;RC0_INTMP_BAR&#39;, &#39;USA_BREVAL1&#39;, &#39;USA_IOIL4&#39;, &#39;ISR_IFOOD4&#39;, &#39;ISR_TRANSFER_RAT_EXOG&#39;, &#39;RC0_IMETAL2&#39;, &#39;RC0_PXM1&#39;, &#39;RC0_TARIFF_IM&#39;, &#39;RES_USA_ROYALTIES_N&#39;, &#39;USA_COSTOIL_P&#39;, &#39;CONSTANT_USA_PXMF_P&#39;, &#39;ISR_MNFACTOR&#39;, &#39;ISR_TAXLBASE_N_BAR&#39;, &#39;RC0_IM_SPILL_BAR&#39;, &#39;USA_PARTH2&#39;, &#39;RC0_DAMP_GDP_GAP&#39;, &#39;USA_IOIL2&#39;, &#39;USA_PRODMETAL_R_EXOG&#39;, &#39;RC0_COM4&#39;, &#39;USA_EPS_TAR&#39;, &#39;ISR_TAU_L_BAR&#39;, &#39;RC0_GI_RAT_BAR&#39;, &#39;RC0_XX_TRANSFER_TARG_N&#39;, &#39;USA_PSUB_XM&#39;, &#39;CONSTANT_USA_NPOPB_R&#39;, &#39;ISR_SIGMA&#39;, &#39;FILTER_USA_RPREM&#39;, &#39;USA_PRODOIL2&#39;, &#39;ISR_VMETAL&#39;, &#39;USA_SUB_XM&#39;, &#39;RC0_PRODMETAL1&#39;, &#39;USA_CFOOD1&#39;, &#39;CONSTANT_USA_OILPAY_N&#39;, &#39;USA_INTLAG&#39;, &#39;RPMETAL_PERM_BAR&#39;, &#39;FILTER_RC0_PCW_P&#39;, &#39;USA_SOV1&#39;, &#39;ISR_TAXCBASE_N_BAR&#39;, &#39;USA_GIDAMP&#39;, &#39;USA_IMETAL1&#39;, &#39;PERSIST_E_RC0_RPOIL_CYC&#39;, &#39;RC0_IMETAL3&#39;, &#39;USA_RC0_S&#39;, &#39;CONSTANT_WTRADE_M_N&#39;, &#39;RC0_XMETAL1&#39;, &#39;ISR_IM1&#39;, &#39;RES_RC0_GNP_R&#39;, &#39;RES_ISR_PGDP_P_AVG&#39;, &#39;TRDEFOOD_N&#39;, &#39;ISR_CPI2&#39;, &#39;ISR_KGTFPRAT&#39;, &#39;USA_CFOOD4&#39;, &#39;ISR_W2&#39;, &#39;RES_USA_INTC&#39;, &#39;RES_ISR_PRODFOOD_R&#39;, &#39;USA_SIGMA&#39;, &#39;RC0_UNR3&#39;, &#39;RC0_INTGR&#39;, &#39;USA_SPILLM1&#39;, &#39;FILTER_ISR_COIL_R&#39;, &#39;RPMETAL1&#39;, &#39;ISR_XM4&#39;, &#39;RC0_TSPILLX1&#39;, &#39;RES_ISR_CURBAL_N&#39;, &#39;RC0_NSPILLX1&#39;, &#39;FILTER_RC0_XOIL_R&#39;, &#39;USA_COM2&#39;, &#39;RES_POIL_PERM_P&#39;, &#39;USA_SPILLX1&#39;, &#39;TRDEOIL_R&#39;, &#39;ISR_CFOOD1&#39;, &#39;RC0_SPILLX1&#39;, &#39;RC0_COSTMETAL_P&#39;, &#39;ISR_R_NEUT_BAR&#39;, &#39;USA_PRODOIL_R_EXOG&#39;, &#39;USA_TOIL&#39;, &#39;FILTER_RC0_PG_P&#39;, &#39;RC0_EBASE&#39;, &#39;CONSTANT_USA_PI_P&#39;, &#39;RC0_CPI2&#39;, &#39;USA_CGBFX&#39;, &#39;RES_USA_MROYALTIES_N&#39;, &#39;RC0_GC_N_EXOG&#39;, &#39;CONSTANT_ISR_MKTPREM&#39;, &#39;RC0_TMETAL&#39;, &#39;ISR_B_STAR&#39;, &#39;ISR_GC_MPROP&#39;, &#39;RC0_XM1&#39;, &#39;USA_TFP_FE_R_BAR&#39;, &#39;ISR_TAXC_RAT_BAR&#39;, &#39;USA_UNR3&#39;, &#39;USA_PARTH4&#39;, &#39;RES_RC0_INT10&#39;, &#39;CONSTANT_ISR_CFOOD_R&#39;, &#39;RES_USA_C_LIQ_R&#39;, &#39;RC0_NFANSHK&#39;, &#39;ISR_WEDGEOIL_P&#39;, &#39;FILTER_USA_TPREM&#39;, &#39;FILTER_ISR_IOIL_R&#39;, &#39;ISR_XFOOD2&#39;, &#39;ISR_C_LAMBDA&#39;, &#39;RES_USA_CURBAL_N&#39;, &#39;RC0_W1&#39;, &#39;ISR_CPI7&#39;, &#39;FILTER_USA_PXM_P&#39;, &#39;ISR_BETA&#39;, &#39;TEMP_USA&#39;, &#39;CONSTANT_USA_INTNFA&#39;, &#39;RC0_XMETAL3&#39;, &#39;WRL_PRODFOOD_R_BAR&#39;, &#39;CONSTANT_USA_XFOOD_R&#39;, &#39;RC0_XFOOD4&#39;, &#39;FILTER_RC0_CFOOD_R&#39;, &#39;RC0_SOV2&#39;, &#39;RES_USA_NFA_D&#39;, &#39;ISR_INTEPS&#39;, &#39;ISR_XX_TRANSFER_N&#39;, &#39;ISR_LAPH&#39;, &#39;CONSTANT_RC0_SOVPREM&#39;, &#39;RC0_PRODOIL1&#39;, &#39;RC0_CHI&#39;, &#39;USA_XOIL4&#39;, &#39;CONSTANT_ISR_K_R&#39;, &#39;USA_GDP_R_BAR&#39;, &#39;USA_XX_GI_N&#39;, &#39;RES_USA_INFCPIX&#39;, &#39;ISR_INTWT&#39;, &#39;RC0_CPI9&#39;, &#39;RC0_EXP1&#39;, &#39;FILTER_USA_DELTA&#39;, &#39;FILTER_RC0_RPREM&#39;, &#39;RPOIL3&#39;, &#39;ISR_IMETAL1&#39;, &#39;PERSIST_E_USA_RPOIL_CYC&#39;, &#39;CONSTANT_RC0_OILPAY_N&#39;, &#39;ISR_XX_TAU_C&#39;, &#39;RC0_XFOOD2&#39;, &#39;CONSTANT_ISR_XFOOD_R&#39;, &#39;CONSTANT_WTRADE_FOOD_R&#39;, &#39;ISR_IM5&#39;, &#39;RC0_IMETAL1&#39;, &#39;USA_PRODFOODSHARE&#39;, &#39;RC0_XX_GI_N&#39;, &#39;RES_RC0_RC&#39;, &#39;USA_UOIL_R_BAR&#39;, &#39;ISR_TAXK_RAT_BAR&#39;, &#39;ISR_CPI4&#39;, &#39;CONSTANT_ISR_IM_R&#39;, &#39;FILTER_USA_XFOOD_R&#39;, &#39;RC0_IOIL2&#39;, &#39;USA_C_MPROP&#39;, &#39;FILTER_RC0_XM_R&#39;, &#39;FILTER_RC0_K_R&#39;, &#39;RC0_CPI1&#39;, &#39;ISR_GNP_R_BAR&#39;, &#39;USA_C_LIQ_R_BAR&#39;, &#39;FILTER_USA_PCW_P&#39;, &#39;ISR_PCOILBASE&#39;, &#39;FILTER_RPFOOD_PERM&#39;, &#39;CONSTANT_RC0_PXM_P&#39;, &#39;RC0_VMETAL&#39;, &#39;FILTER_ISR_IMETAL_R&#39;, &#39;RES_ISR_PIM_P&#39;, &#39;RES_ISR_R_NEUT&#39;, &#39;FILTER_ISR_PG_P&#39;, &#39;RES_ISR_BREVAL_N&#39;, &#39;ISR_XM_MPROP&#39;, &#39;RC0_USA_SOIL&#39;, &#39;RC0_XM2&#39;, &#39;USA_CTAXLRSW&#39;, &#39;ISR_PIM2&#39;, &#39;CONSTANT_ISR_TFP_FE_R&#39;, &#39;USA_CPI1&#39;, &#39;USA_XM_SPILL_BAR&#39;, &#39;RC0_INTC1&#39;, &#39;USA_COIL2&#39;, &#39;USA_RK2&#39;, &#39;CONSTANT_RC0_PARTH&#39;, &#39;FILTER_RC0_FXPREM&#39;, &#39;FILTER_ISR_INTNFA&#39;, &#39;USA_RK5&#39;, &#39;FILTER_USA_GDEF_TAR&#39;, &#39;USA_XOIL2&#39;, &#39;ISR_PARTH4&#39;, &#39;ISR_TSPILLM1&#39;, &#39;RC0_COEFPARTH&#39;, &#39;RC0_IMETAL5&#39;, &#39;FILTER_ISR_C_OLG_R&#39;, &#39;RES_ISR_PARTH_DES&#39;, &#39;CONSTANT_ISR_IFOOD_R&#39;, &#39;USA_XX_GC_N&#39;, &#39;USA_DAMP_GDP_GAP&#39;, &#39;RES_ISR_WH_R&#39;, &#39;USA_XX_TRANSFER_TARG_N&#39;, &#39;FILTER_USA_SOVPREM&#39;, &#39;ISR_TAXOILBASE_N_BAR&#39;, &#39;RC0_B_STAR&#39;, &#39;ISR_COEFTFP&#39;, &#39;USA_TAXC_RAT_BAR&#39;, &#39;CONSTANT_USA_DELTA&#39;, &#39;USA_PCFOODBASE&#39;, &#39;CONSTANT_USA_OILSHARF&#39;, &#39;ISR_TMETAL&#39;, &#39;ISR_BGG1&#39;, &#39;CONSTANT_USA_SOVPREM&#39;, &#39;ISR_PARTH5&#39;, &#39;RC0_PRODMETAL2&#39;, &#39;USA_CTAXDAMP&#39;, &#39;ISR_CTAXLRSW&#39;, &#39;RC0_DELTAG&#39;, &#39;USA_WEDGEFOOD_P&#39;, &#39;ISR_UNR3&#39;, &#39;RES_ISR_INFEXP&#39;, &#39;USA_XOIL_R_BAR&#39;, &#39;FILTER_RC0_PXM_P&#39;, &#39;TEMP_E_USA_RPFOOD_CYC&#39;, &#39;FILTER_RC0_NPOPB_R&#39;, &#39;USA_INTGR&#39;, &#39;USA_XMETAL1&#39;, &#39;ISR_WT&#39;, &#39;USA_C_LAMBDA&#39;, &#39;RES_USA_PARTH_DES&#39;, &#39;ISR_USA_L&#39;, &#39;USA_ALPHA_KG&#39;, &#39;FILTER_ISR_FXPREM&#39;, &#39;ISR_EXP1&#39;, &#39;USA_CFOOD2&#39;, &#39;USA_BGG4&#39;, &#39;RC0_BNSHK&#39;, &#39;ISR_XX_GC_N&#39;, &#39;RES_USA_W_R_AVG&#39;, &#39;RES_RC0_PARTH_FE&#39;, &#39;RC0_CTAXDAMP&#39;, &#39;USA_TARGLRSW&#39;, &#39;RC0_COEFZ&#39;, &#39;ISR_INTC1&#39;, &#39;CONSTANT_USA_XMETAL_R&#39;, &#39;USA_TRANSFERDAMP&#39;, &#39;RES_RC0_TAXOIL_N&#39;, &#39;CONSTANT_RPMETAL_PERM&#39;, &#39;CONSTANT_RC0_CPI_P&#39;, &#39;RC0_XX_OILSUB_N&#39;, &#39;RC0_XM4&#39;, &#39;USA_INTCORP1&#39;, &#39;RC0_XM_MPROP&#39;, &#39;USA_RC0_SOIL&#39;, &#39;ISR_CPI3&#39;, &#39;USA_IM3&#39;, &#39;ISR_ALPHA_FE&#39;, &#39;CONSTANT_USA_ROYALTY&#39;, &#39;RPOIL_PERM_BAR&#39;, &#39;ISR_RK1&#39;, &#39;RC0_C_MPROP&#39;, &#39;RES_USA_BREVAL_N&#39;, &#39;USA_ISR_S&#39;, &#39;RC0_TARGLRSW&#39;, &#39;RES_RC0_INTMP&#39;, &#39;RES_USA_Z_NFA&#39;, &#39;ISR_TAU_K_EXOG&#39;, &#39;RC0_WEDGEOIL_P&#39;, &#39;RC0_C_OLG_R_BAR&#39;, &#39;CONSTANT_USA_K_R&#39;, &#39;ISR_KGSPILLM1&#39;, &#39;USA_TAU_C_EXOG&#39;, &#39;FILTER_WTRADE_M_N&#39;, &#39;RC0_TAXKBASE_N_BAR&#39;, &#39;RC0_W3&#39;, &#39;USA_W_R_BAR&#39;, &#39;CONSTANT_RC0_RPREM&#39;, &#39;RES_RC0_PIM_P&#39;, &#39;RES_ISR_INTRF&#39;, &#39;RPMETAL4&#39;, &#39;RES_ISR_PARTH_FE&#39;, &#39;RC0_IFOOD4&#39;, &#39;ISR_SOV2&#39;, &#39;FILTER_RC0_TFP_FE_R&#39;, &#39;FILTER_ISR_CFOOD_R&#39;, &#39;ISR_TRANSFERSHARE&#39;, &#39;CONSTANT_ISR_NPOPB_R&#39;, &#39;FILTER_RC0_MROYALTY&#39;, &#39;USA_IMETAL4&#39;, &#39;CONSTANT_USA_MPC&#39;, &#39;FILTER_ISR_XFOOD_R&#39;, &#39;RC0_IM4&#39;, &#39;TEMP_ISR&#39;, &#39;ISR_TRANSFERDAMP&#39;, &#39;WRL_GDP_METAL_R_BAR&#39;, &#39;ISR_B_RAT_BAR&#39;, &#39;USA_CPI7&#39;, &#39;USA_LTAXDAMP&#39;, &#39;RC0_XM3&#39;, &#39;USA_TAU_L_EXOG&#39;, &#39;ISR_RK4&#39;, &#39;USA_DAMP_DEBT&#39;, &#39;USA_NPOP_R_EXOG&#39;, &#39;USA_IM4&#39;, &#39;ISR_IMETAL5&#39;, &#39;CONSTANT_USA_PXM_P&#39;, &#39;USA_TARIFF_IM&#39;, &#39;RPFOOD2&#39;, &#39;RC0_COEFW&#39;, &#39;TEMP_E_ISR_TAXK_RAT&#39;, &#39;RC0_Z_BAR&#39;, &#39;CONSTANT_ISR_RPREM&#39;, &#39;ISR_TARGLRSW&#39;, &#39;RC0_LSTAX_N&#39;, &#39;USA_XMETAL4&#39;, &#39;ISR_CFOOD4&#39;, &#39;ISR_INVEST_MPROP&#39;, &#39;RES_RC0_RCORP&#39;, &#39;USA_XOIL3&#39;, &#39;FILTER_RC0_C_OLG_R&#39;, &#39;PERSISTCOM_USA&#39;, &#39;USA_XOIL1&#39;, &#39;RES_USA_OILSUB_N&#39;, &#39;FILTER_ISR_CPINCOM_P&#39;, &#39;ISR_XX_GI_N&#39;, &#39;RC0_B_RAT_BAR&#39;, &#39;ISR_ABSRATROOT&#39;, &#39;ISR_QUOTA_IM&#39;, &#39;RC0_T&#39;, &#39;CONSTANT_USA_IM_R&#39;, &#39;USA_CPI9&#39;, &#39;CONSTANT_ISR_PXM_P&#39;, &#39;FILTER_ISR_XM_R&#39;, &#39;ISR_W3&#39;, &#39;USA_W3&#39;, &#39;RC0_COM2&#39;, &#39;RC0_CFOOD1&#39;, &#39;ISR_INTNFA1&#39;, &#39;ISR_GI_MPROP&#39;, &#39;RC0_PARTH5&#39;, &#39;FILTER_RC0_IFOOD_R&#39;, &#39;USA_TRANSFER_TARG_RAT_BAR&#39;, &#39;USA_RC0_SFOOD&#39;, &#39;RES_USA_INFEXP&#39;, &#39;CONSTANT_ISR_CPINCOM_P&#39;, &#39;ISR_RK5&#39;, &#39;USA_XM1&#39;, &#39;ISR_OILRECEIPT_N_BAR&#39;, &#39;ISR_CGBFX&#39;, &#39;USA_PXM2&#39;, &#39;USA_XM3&#39;, &#39;USA_POIL_P_SUB_BAR&#39;, &#39;FILTER_ISR_UNRH_FE&#39;, &#39;RC0_UNR2&#39;, &#39;FILTER_RC0_PC_P&#39;, &#39;USA_TAXOILBASE_N_BAR&#39;, &#39;RC0_SOV1&#39;, &#39;ISR_TAXL_RAT_BAR&#39;, &#39;RES_RC0_PRODMETAL_CYC_R&#39;, &#39;ISR_XM3&#39;, &#39;USA_XX_TAU_L&#39;, &#39;FILTER_ISR_IM_R&#39;, &#39;FILTER_RC0_OILPAY_N&#39;, &#39;RES_RC0_PRODFOOD_PERM_R&#39;, &#39;ISR_C_MPROP&#39;, &#39;ISR_GCDAMP&#39;, &#39;RES_USA_PRODOIL_R&#39;, &#39;USA_ISR_L&#39;, &#39;ISR_TSPILLX1&#39;, &#39;ISR_COM2&#39;, &#39;FILTER_ISR_PCW_P&#39;, &#39;RC0_XFOOD3&#39;, &#39;CONSTANT_RPFOOD_PERM&#39;, &#39;RC0_XMETAL4&#39;, &#39;FILTER_RC0_XFOOD_R&#39;, &#39;ISR_TFP_FE_R_BAR&#39;, &#39;FILTER_WTRADE_METAL_R&#39;, &#39;RC0_USA_SMETAL&#39;, &#39;USA_GPROD_SS&#39;, &#39;RES_RC0_OILSUB_N&#39;, &#39;RC0_LTAXDAMP&#39;, &#39;USA_INTGB1&#39;, &#39;USA_CPI11&#39;, &#39;CONSTANT_RC0_GDEF_TAR&#39;, &#39;FILTER_RC0_GDEF_TAR&#39;, &#39;FILTER_USA_IFOOD_R&#39;, &#39;USA_RK7&#39;, &#39;RC0_SIGMA&#39;, &#39;RC0_XOIL2&#39;, &#39;RES_USA_PRODFOOD_R&#39;, &#39;RC0_PARTH1&#39;, &#39;RC0_W2&#39;, &#39;FILTER_USA_ROYALTY&#39;, &#39;RES_RPMETAL_CYC&#39;, &#39;RC0_TSPILLM1&#39;, &#39;USA_COIL4&#39;, &#39;RPMETAL2&#39;, &#39;RC0_GREAL_SS&#39;, &#39;RC0_NSPILLM1&#39;, &#39;FILTER_USA_XMETAL_R&#39;, &#39;RES_RC0_INTRF&#39;, &#39;ISR_WEDGEFOOD_P&#39;, &#39;USA_KGTFPRATROOT&#39;, &#39;RES_USA_INTGB&#39;, &#39;CONSTANT_RC0_XOIL_R&#39;, &#39;ISR_XFOOD3&#39;, &#39;CONSTANT_RC0_K_R&#39;, &#39;RC0_INVEST_MPROP&#39;, &#39;ISR_IM3&#39;, &#39;RC0_PCOILBASE&#39;, &#39;RES_RC0_INTC&#39;, &#39;CONSTANT_WTRADE_FOOD_N&#39;, &#39;RC0_GCDAMP&#39;, &#39;RC0_PRODMETAL_R_EXOG&#39;, &#39;RC0_CPI12&#39;, &#39;CONSTANT_WTRADE_METAL_R&#39;, &#39;RC0_PIM2&#39;, &#39;CONSTANT_ISR_PARTH&#39;, &#39;FILTER_ISR_PXMF_P&#39;, &#39;RC0_CPI6&#39;, &#39;RC0_TRANSFERDAMP&#39;, &#39;RC0_COEFTFP&#39;, &#39;ISR_TAU_L_EXOG&#39;, &#39;RC0_CGBFX&#39;, &#39;ISR_TAU_C_EXOG&#39;, &#39;RC0_CPI11&#39;, &#39;RC0_TAU_C_EXOG&#39;, &#39;RES_RC0_INT&#39;, &#39;ISR_RC0_SMETAL&#39;, &#39;ISR_T&#39;, &#39;ISR_INTLAG&#39;, &#39;CONSTANT_RC0_ROYALTY&#39;, &#39;RES_ISR_INFWEXP&#39;, &#39;RPFOOD1&#39;, &#39;USA_NFANSHK&#39;, &#39;RC0_PCFOOD_P_BAR&#39;, &#39;RES_USA_GDEF_N&#39;, &#39;USA_PI1&#39;, &#39;USA_GI_RAT_BAR&#39;, &#39;RC0_KTAXDAMP&#39;, &#39;RES_RC0_INTCORP&#39;, &#39;ISR_POIL_P_SUB_BAR&#39;, &#39;FILTER_RC0_PI_P&#39;, &#39;CONSTANT_RC0_COIL_R&#39;, &#39;ISR_XM_SPILL_BAR&#39;, &#39;RC0_LTAXLRSW&#39;, &#39;FILTER_ISR_TFP_FE_R&#39;, &#39;ISR_TFOOD&#39;, &#39;FILTER_USA_K_R&#39;, &#39;RC0_TAU_L_EXOG&#39;, &#39;USA_TAXK_RAT_BAR&#39;, &#39;FILTER_USA_UNRH_FE&#39;, &#39;ISR_COIL4&#39;, &#39;PERM&#39;, &#39;RC0_INTGB1&#39;, &#39;FILTER_ISR_MPC&#39;, &#39;ISR_GDP_R_BAR&#39;, &#39;ISR_IMETAL2&#39;, &#39;USA_CHI&#39;, &#39;RC0_TAU_L_BAR&#39;, &#39;USA_MTFACTOR&#39;, &#39;ISR_KGTFPRATROOT&#39;, &#39;USA_IOIL3&#39;, &#39;FILTER_RC0_IOIL_R&#39;, &#39;RES_USA_UNRH&#39;, &#39;ISR_COIL1&#39;, &#39;USA_PRODOIL1&#39;, &#39;ISR_TFPRATROOT&#39;, &#39;RES_RC0_PCFOOD_P&#39;, &#39;ISR_USA_SMETAL&#39;, &#39;FILTER_ISR_GDEF_TAR&#39;, &#39;FILTER_RC0_ROYALTY&#39;, &#39;RC0_XOIL_R_BAR&#39;, &#39;USA_TRANSFER_RAT_EXOG&#39;, &#39;RC0_UOIL_R_BAR&#39;, &#39;CONSTANT_ISR_PRIMSUR_TAR&#39;, &#39;PERSIST_E_ISR_RPOIL_CYC&#39;, &#39;FILTER_RC0_COIL_R&#39;, &#39;FILTER_USA_OILSHARF&#39;, &#39;RC0_BGG3&#39;, &#39;RC0_XFOOD1&#39;, &#39;ISR_GREAL_SS&#39;, &#39;RC0_INTINFL&#39;, &#39;FILTER_USA_MROYALTY&#39;, &#39;RC0_COIL4&#39;, &#39;ISR_KTAXDAMP&#39;, &#39;ISR_BNSHK&#39;, &#39;FILTER_USA_IM_R&#39;, &#39;FILTER_USA_OILPAY_N&#39;, &#39;RES_USA_OILRECEIPT_N&#39;, &#39;RC0_GNP_R_BAR&#39;, &#39;TEMP_E_USA_TAXK_RAT&#39;, &#39;RES_RC0_UNRH&#39;, &#39;RC0_INTLAG&#39;, &#39;ISR_IM2&#39;, &#39;ISR_CPI6&#39;, &#39;ISR_IFOOD1&#39;, &#39;RES_ISR_W_R_AVG&#39;, &#39;USA_CPI5&#39;, &#39;ISR_RC0_L&#39;, &#39;RES_RC0_PRODOIL_R&#39;, &#39;USA_BGG2&#39;, &#39;RC0_XOIL4&#39;, &#39;USA_XX_TAU_C&#39;, &#39;CONSTANT_USA_CFOOD_R&#39;, &#39;USA_GCDAMP&#39;, &#39;ISR_TOIL&#39;, &#39;ISR_W1&#39;, &#39;ISR_SUB_XM&#39;, &#39;USA_IOIL1&#39;, &#39;CONSTANT_RC0_DELTA&#39;, &#39;CONSTANT_USA_TAU_OIL&#39;, &#39;ISR_IM4&#39;, &#39;USA_INTCOST_RAT_BAR&#39;, &#39;ISR_INTCORP1&#39;, &#39;USA_TAXCBASE_N_BAR&#39;, &#39;ISR_IOIL5&#39;, &#39;RC0_IFOOD5&#39;, &#39;ISR_C_OLG_R_BAR&#39;, &#39;ISR_RK7&#39;, &#39;CONSTANT_ISR_PI_P&#39;, &#39;RES_ISR_OILSUB_N&#39;, &#39;USA_IM1&#39;, &#39;RPMETAL3&#39;, &#39;CONSTANT_ISR_PCW_P&#39;, &#39;RES_RC0_TFP_FE_R_AVG&#39;, &#39;ISR_IFOOD5&#39;, &#39;RES_RC0_PRODMETAL_R&#39;, &#39;RC0_IM3&#39;, &#39;RES_RC0_PGDP_P_AVG&#39;, &#39;ISR_XX_LB&#39;, &#39;ISR_KTAXLRSW&#39;, &#39;RC0_GC_RAT_BAR&#39;, &#39;CONSTANT_RC0_MKTPREM&#39;, &#39;USA_PARTH5&#39;, &#39;FILTER_ISR_PC_P&#39;, &#39;CONSTANT_RC0_MROYALTY&#39;, &#39;ISR_GI_RAT_BAR&#39;, &#39;RC0_TRANSFER_TARG_RAT_BAR&#39;, &#39;ISR_DELTAG&#39;, &#39;RC0_IMETAL4&#39;, &#39;ISR_COM4&#39;, &#39;ISR_COEFZ&#39;, &#39;USA_T&#39;, &#39;RC0_XMETAL2&#39;, &#39;ISR_NSPILLM1&#39;, &#39;RC0_COIL3&#39;, &#39;ISR_GCLRSW&#39;, &#39;CONSTANT_RC0_INTNFA&#39;, &#39;FILTER_USA_CPI_P&#39;, &#39;ISR_IOIL3&#39;, &#39;ISR_TRANSFER_TARG_RAT_BAR&#39;, &#39;USA_W2&#39;, &#39;RC0_USA_SFOOD&#39;, &#39;RES_USA_RCORP&#39;, &#39;ISR_KREVAL&#39;, &#39;USA_IFOOD5&#39;, &#39;ISR_NSPILLX1&#39;, &#39;CONSTANT_USA_IMETAL_R&#39;, &#39;ISR_CFOOD2&#39;, &#39;FILTER_USA_NPOPB_R&#39;, &#39;USA_VMETAL&#39;, &#39;ISR_DAMP_DEBT&#39;, &#39;RC0_FLOOR&#39;, &#39;RC0_KGTFPRAT&#39;, &#39;USA_KGSPILLM1&#39;, &#39;CONSTANT_ISR_XM_R&#39;, &#39;ISR_GI_N_EXOG&#39;, &#39;RC0_MTFACTOR&#39;, &#39;RES_ISR_PCFOOD_P&#39;, &#39;USA_XX_TRANSFER_N&#39;, &#39;USA_XFOOD2&#39;, &#39;ISR_INFCPIX_TAR&#39;, &#39;RC0_INTCORP1&#39;, &#39;CONSTANT_USA_XOIL_R&#39;, &#39;CONSTANT_USA_COIL_R&#39;, &#39;USA_IFOOD3&#39;, &#39;USA_DELTAG&#39;, &#39;RC0_COM1&#39;, &#39;CONSTANT_ISR_DELTA&#39;, &#39;RES_RC0_INFWAGEEFF&#39;, &#39;ISR_CPI9&#39;, &#39;USA_COEFZ&#39;, &#39;CONSTANT_RC0_OILSHARF&#39;, &#39;CONSTANT_ISR_PC_P&#39;, &#39;USA_INTEPS&#39;, &#39;ISR_SPILLX1&#39;, &#39;RES_ISR_NFA_D&#39;, &#39;RC0_OILRECEIPT_N_BAR&#39;, &#39;RES_USA_RC&#39;, &#39;TRDEFOOD_R&#39;, &#39;RC0_INTNFA1&#39;, &#39;USA_FLOOR&#39;, &#39;CONSTANT_USA_IFOOD_R&#39;, &#39;FILTER_ISR_MKTPREM&#39;, &#39;ISR_RK6&#39;, &#39;USA_TSPILLM1&#39;, &#39;ISR_PARTH1&#39;, &#39;USA_KTAXLRSW&#39;, &#39;CONSTANT_USA_CPINCOM_P&#39;, &#39;RES_RC0_PRODFOOD_R&#39;, &#39;USA_GAMMA&#39;, &#39;ISR_XFOOD4&#39;, &#39;ISR_LSTAX_N&#39;, &#39;ISR_BGG2&#39;, &#39;USA_INVEST_MPROP&#39;, &#39;RPMETAL5&#39;, &#39;FILTER_RPOIL_PERM&#39;, &#39;CONSTANT_RC0_TAU_OIL&#39;, &#39;FILTER_USA_MKTPREM&#39;, &#39;USA_ISR_SFOOD&#39;, &#39;RC0_XX_TAU_C&#39;, &#39;ISR_CPI8&#39;, &#39;ISR_COM5&#39;, &#39;USA_IFOOD4&#39;, &#39;USA_VOIL&#39;, &#39;RC0_TAXC_RAT_BAR&#39;, &#39;USA_Q1&#39;, &#39;RC0_CPI5&#39;, &#39;RC0_VOIL&#39;, &#39;RC0_TFOOD&#39;, &#39;FILTER_RC0_SOVPREM&#39;, &#39;USA_TAU_L_BAR&#39;, &#39;RES_ISR_OILRECEIPT_N&#39;, &#39;CONSTANT_ISR_FXPREM&#39;, &#39;ISR_INTGAP&#39;, &#39;ISR_C_LIQ_R_BAR&#39;, &#39;RC0_BGG1&#39;, &#39;RC0_BREVAL1&#39;, &#39;CONSTANT_ISR_INTNFA&#39;, &#39;ISR_IFOOD2&#39;, &#39;PERSISTCOM_RC0&#39;, &#39;RC0_BGG2&#39;, &#39;USA_BGG1&#39;, &#39;RC0_USA_S&#39;, &#39;USA_TSPILLX1&#39;, &#39;RC0_ISR_L&#39;, &#39;USA_WEDGEOIL_P&#39;, &#39;USA_W1&#39;, &#39;RC0_MNFACTOR&#39;, &#39;RES_RPOIL_CYC_AVG&#39;, &#39;FILTER_RC0_DELTA&#39;, &#39;CONSTANT_RC0_IOIL_R&#39;, &#39;RC0_Q1&#39;, &#39;RES_RC0_C_LIQ_R&#39;, &#39;USA_NPOPH_R_BAR&#39;, &#39;RC0_ALPHA_KG&#39;, &#39;ISR_BREVAL1&#39;, &#39;USA_SOV2&#39;, &#39;ISR_TFPRAT&#39;, &#39;PERM_E_MPC&#39;, &#39;USA_KGTFPRAT&#39;, &#39;USA_INTC1&#39;, &#39;FILTER_RC0_CPI_P&#39;, &#39;RES_USA_PRODOIL_CYC_R&#39;, &#39;USA_IMETAL2&#39;, &#39;WRL_PRODOIL_R_BAR&#39;, &#39;RES_USA_INT&#39;, &#39;USA_PIM2&#39;, &#39;RC0_Q2&#39;, &#39;RES_RC0_GDEF_N&#39;, &#39;TEMP_E_RPFOOD_CYC&#39;, &#39;USA_IFOOD2&#39;, &#39;USA_LTAXLRSW&#39;, &#39;ISR_GC_N_EXOG&#39;, &#39;ISR_LTAXDAMP&#39;, &#39;ISR_INTINFL&#39;, &#39;RC0_PRODOIL2&#39;, &#39;ISR_PI1&#39;, &#39;USA_OILRECEIPT_N_BAR&#39;, &#39;USA_PIM1&#39;, &#39;PERSIST_E_USA_RPMETAL_CYC&#39;, &#39;FILTER_RC0_XMETAL_R&#39;, &#39;CONSTANT_ISR_SOVPREM&#39;, &#39;ISR_GAMMA&#39;, &#39;ISR_POIL_P_BAR&#39;, &#39;CONSTANT_RC0_MPC&#39;, &#39;ISR_NPOPH_R_BAR&#39;, &#39;ISR_IOIL2&#39;, &#39;FILTER_USA_MPC&#39;, &#39;RES_RC0_OILRECEIPT_N&#39;, &#39;RES_ISR_INFCPIX&#39;, &#39;USA_XX_LB&#39;, &#39;ISR_Z_BAR&#39;, &#39;RC0_GI_R_BAR&#39;, &#39;ISR_PRODFOODSHARE&#39;, &#39;RES_ISR_INFWAGEEFF&#39;, &#39;FILTER_USA_FXPREM&#39;, &#39;RES_USA_PRODMETAL_CYC_R&#39;, &#39;RC0_IFOOD3&#39;, &#39;USA_XM2&#39;, &#39;RPOIL2&#39;, &#39;RC0_CPI3&#39;, &#39;RES_RPMETAL_PERM_AVG&#39;, &#39;RC0_IOIL4&#39;, &#39;FILTER_RC0_INTNFA&#39;, &#39;FILTER_RC0_UNRH_FE&#39;, &#39;RC0_GDP_N_BAR&#39;, &#39;RC0_CFOOD4&#39;, &#39;RES_ISR_TFP_FE_R_AVG&#39;, &#39;RC0_PRODFOODSHARE&#39;, &#39;FILTER_RC0_OILSHARF&#39;, &#39;USA_XM_MPROP&#39;, &#39;ISR_FLOOR&#39;, &#39;RES_ISR_EPS&#39;, &#39;RC0_KGSPILLM1&#39;, &#39;USA_COIL3&#39;, &#39;CONSTANT_RC0_XFOOD_R&#39;, &#39;RC0_COEFPGDP&#39;, &#39;TEMP_E_RC0_RPFOOD_CYC&#39;, &#39;ISR_CFOOD3&#39;, &#39;RES_USA_EPS&#39;, &#39;RES_USA_PRODFOOD_PERM_R&#39;, &#39;TEMP_E_RC0_TAXK_RAT&#39;, &#39;FILTER_ISR_IFOOD_R&#39;, &#39;RES_USA_PCFOOD_P&#39;, &#39;USA_PRODMETAL2&#39;, &#39;FILTER_ISR_DELTA&#39;, &#39;RES_ISR_PCOIL_P&#39;, &#39;RC0_GPROD_SS&#39;, &#39;RC0_BETA&#39;, &#39;ISR_PCFOOD_P_BAR&#39;, &#39;RC0_RK4&#39;, &#39;USA_PCOILBASE&#39;, &#39;FILTER_ISR_RPREM&#39;, &#39;RES_RPFOOD_CYC&#39;, &#39;RC0_TRANSFERSHARE&#39;, &#39;RC0_QUOTA_IM&#39;, &#39;WRL_PRODMETAL_R_BAR&#39;, &#39;RC0_TRANSFERLRSW&#39;, &#39;CONSTANT_ISR_CPI_P&#39;, &#39;CONSTANT_RC0_PI_P&#39;, &#39;USA_GC_N_EXOG&#39;, &#39;ISR_IFOOD3&#39;, &#39;CONSTANT_RC0_UNRH_FE&#39;, &#39;ISR_TAXKBASE_N_BAR&#39;, &#39;RES_RC0_WH_R&#39;, &#39;RC0_TAXL_RAT_BAR&#39;, &#39;ISR_XM1&#39;, &#39;ISR_XX_GDEF_N&#39;, &#39;FILTER_RC0_IMETAL_R&#39;, &#39;CONSTANT_RC0_IM_R&#39;, &#39;RC0_XM_SPILL_BAR&#39;, &#39;ISR_CPI12&#39;, &#39;RC0_XX_GDEF_N&#39;, &#39;CONSTANT_USA_GDEF_TAR&#39;, &#39;FILTER_USA_TFP_FE_R&#39;, &#39;ISR_XX_TAU_L&#39;, &#39;USA_QUOTA_IM&#39;, &#39;ISR_PXM1&#39;, &#39;TEMP_RC0&#39;, &#39;USA_TAXKBASE_N_BAR&#39;, &#39;USA_C_OLG_R_BAR&#39;, &#39;FILTER_USA_PXMF_P&#39;, &#39;USA_COEFPARTH&#39;, &#39;ISR_UNR1&#39;, &#39;ISR_GC_RAT_BAR&#39;, &#39;ISR_COEFW&#39;, &#39;RES_ISR_UNRH&#39;, &#39;USA_RK6&#39;, &#39;TRDEOIL_N&#39;, &#39;CONSTANT_RC0_XM_R&#39;, &#39;RC0_TFPRAT&#39;, &#39;ISR_WEXP1&#39;, &#39;USA_GREAL_SS&#39;, &#39;CONSTANT_RC0_PG_P&#39;, &#39;PERSIST_E_ISR_RPMETAL_CYC&#39;, &#39;USA_POIL_P_BAR&#39;, &#39;CONSTANT_USA_IOIL_R&#39;, &#39;TRDEM_N&#39;, &#39;USA_RK1&#39;, &#39;USA_R_NEUT_BAR&#39;, &#39;CONSTANT_RC0_FXPREM&#39;, &#39;USA_IOIL5&#39;, &#39;ISR_RK2&#39;, &#39;USA_MFACTOR&#39;, &#39;USA_PROB&#39;, &#39;ISR_SOV1&#39;, &#39;RES_ISR_INTGB&#39;, &#39;USA_UNR1&#39;, &#39;RES_RC0_PARTH_DES&#39;, &#39;FILTER_USA_XOIL_R&#39;, &#39;FILTER_ISR_NPOPB_R&#39;, &#39;CONSTANT_RC0_IFOOD_R&#39;, &#39;RC0_SUB_XM&#39;, &#39;RPOIL_ROOT&#39;, &#39;USA_INTGAP&#39;, &#39;RC0_TRANSFER_TARG_RAT_EXOG&#39;, &#39;RES_ISR_INTC&#39;, &#39;RES_USA_PIM_P&#39;, &#39;CONSTANT_ISR_PXMF_P&#39;, &#39;RC0_GCLRSW&#39;, &#39;RES_RC0_INFEXP&#39;, &#39;ISR_RC0_SOIL&#39;, &#39;ISR_CPI11&#39;, &#39;CONSTANT_WTRADE_M_R&#39;, &#39;RC0_CFOOD2&#39;, &#39;ISR_MTFACTOR&#39;, &#39;ISR_BGG3&#39;, &#39;RC0_COSTOIL_P&#39;, &#39;ISR_TRANSFER_RAT_BAR&#39;, &#39;USA_XX_PRIMSUR_N&#39;, &#39;RC0_PI1&#39;, &#39;ISR_CHI&#39;, &#39;ISR_GILRSW&#39;, &#39;USA_ALPHA_FE&#39;, &#39;RC0_TRANSFER_RAT_EXOG&#39;, &#39;RC0_CPI8&#39;, &#39;RES_ISR_WO_R&#39;, &#39;USA_IFOOD1&#39;, &#39;RC0_XX_TAU_K&#39;, &#39;USA_IM_SPILL_BAR&#39;, &#39;USA_EBASE&#39;, &#39;CONSTANT_USA_TFP_FE_R&#39;, &#39;ISR_INTGB1&#39;, &#39;USA_XM4&#39;, &#39;RES_RC0_WO_R&#39;, &#39;FILTER_WTRADE_M_R&#39;, &#39;FILTER_RC0_IM_R&#39;, &#39;FILTER_RC0_MKTPREM&#39;, &#39;RC0_ISR_SFOOD&#39;, &#39;RC0_SPILLM1&#39;, &#39;RC0_RK6&#39;, &#39;RC0_INTEPS&#39;, &#39;ISR_CPI1&#39;, &#39;FILTER_WTRADE_OIL_R&#39;, &#39;CONSTANT_ISR_IMETAL_R&#39;, &#39;USA_GC_MPROP&#39;, &#39;FILTER_WTRADE_OIL_N&#39;, &#39;RES_RC0_INTGB&#39;, &#39;RC0_PARTH4&#39;, &#39;CONSTANT_USA_PC_P&#39;, &#39;USA_TARGDAMP&#39;, &#39;ISR_IM_SPILL_BAR&#39;, &#39;FILTER_ISR_SOVPREM&#39;, &#39;RES_USA_Q_P&#39;, &#39;USA_TFPRATROOT&#39;, &#39;RC0_IOIL5&#39;, &#39;CONSTANT_RC0_CFOOD_R&#39;, &#39;CONSTANT_RC0_NPOPB_R&#39;, &#39;FILTER_USA_CFOOD_R&#39;, &#39;RC0_COIL2&#39;, &#39;RES_ISR_GDEF_N&#39;, &#39;RES_ISR_RC&#39;, &#39;RPOIL5&#39;, &#39;ISR_Q2&#39;, &#39;ISR_MKT1&#39;, &#39;ISR_TRANSFERLRSW&#39;, &#39;RC0_UNR1&#39;, &#39;RC0_CPI10&#39;, &#39;FILTER_WTRADE_METAL_N&#39;, &#39;ISR_PARTH2&#39;, &#39;ISR_CPI5&#39;, &#39;CONSTANT_WTRADE_METAL_N&#39;, &#39;USA_WT&#39;, &#39;RES_USA_INFWAGEEFF&#39;, &#39;USA_TRANSFERSHARE&#39;, &#39;ISR_VOIL&#39;, &#39;USA_KREVAL&#39;, &#39;ISR_LTAXLRSW&#39;, &#39;CONSTANT_ISR_TPREM&#39;, &#39;RC0_MFACTOR&#39;, &#39;RC0_PCFOODBASE&#39;, &#39;ISR_XX_OILSUB_N&#39;, &#39;USA_XX_OILSUB_N&#39;, &#39;ISR_PIM1&#39;, &#39;RC0_PSUB_XM&#39;, &#39;USA_ABSRATROOT&#39;, &#39;RC0_XX_GC_N&#39;, &#39;RC0_USA_L&#39;, &#39;USA_XFOOD4&#39;, &#39;FILTER_USA_PC_P&#39;, &#39;RES_RC0_PRODOIL_CYC_R&#39;, &#39;RES_RC0_R_NEUT&#39;, &#39;RC0_TAXLBASE_N_BAR&#39;, &#39;RC0_KGTFPRATROOT&#39;, &#39;CONSTANT_USA_MROYALTY&#39;, &#39;RC0_C_LAMBDA&#39;, &#39;ISR_ALPHA_KG&#39;, &#39;RC0_NPOPH_R_BAR&#39;, &#39;TEMP_E_ISR_RPFOOD_CYC&#39;, &#39;USA_XX_GDEF_N&#39;, &#39;RES_RC0_INFCPIX&#39;, &#39;ISR_TARGDAMP&#39;, &#39;CONSTANT_USA_PRIMSUR_TAR&#39;, &#39;ISR_UNR2&#39;, &#39;FILTER_USA_COIL_R&#39;, &#39;RPOIL_CYC_BAR&#39;, &#39;RC0_WEXP1&#39;, &#39;RC0_PARTH_ADJ_STAR&#39;, &#39;RC0_ALPHA_FE&#39;, &#39;ISR_NFANSHK&#39;, &#39;ISR_IOIL4&#39;, &#39;USA_KTAXDAMP&#39;, &#39;ISR_RC0_S&#39;, &#39;RES_USA_R_NEUT&#39;, &#39;RC0_IOIL1&#39;, &#39;RC0_TFP_FE_R_BAR&#39;, &#39;ISR_RC0_SFOOD&#39;, &#39;CONSTANT_USA_RPREM&#39;, &#39;TRDEM_R&#39;, &#39;RC0_DAMP_DEBT&#39;, &#39;RES_RC0_NFA_D&#39;, &#39;USA_GCLRSW&#39;, &#39;FILTER_USA_C_OLG_R&#39;, &#39;CONSTANT_RC0_XMETAL_R&#39;, &#39;CONSTANT_WTRADE_OIL_R&#39;, &#39;CONSTANT_USA_XM_R&#39;, &#39;USA_TAU_K_EXOG&#39;, &#39;RC0_LAPH&#39;, &#39;ISR_PROB&#39;, &#39;RC0_KREVAL&#39;, &#39;RES_USA_INT10&#39;, &#39;FILTER_USA_PG_P&#39;, &#39;RES_USA_TAXOIL_N&#39;, &#39;RC0_TAU_K_EXOG&#39;, &#39;FILTER_RC0_CPINCOM_P&#39;, &#39;CONSTANT_ISR_COIL_R&#39;, &#39;CONSTANT_ISR_TAU_OIL&#39;, &#39;RC0_XOIL5&#39;, &#39;USA_INTWT&#39;, &#39;RC0_IOIL3&#39;, &#39;CONSTANT_ISR_MPC&#39;, &#39;USA_PARTH3&#39;, &#39;ISR_CTAXDAMP&#39;, &#39;FILTER_RC0_PXMF_P&#39;, &#39;RES_ISR_Z_AVG&#39;, &#39;USA_ABSRAT&#39;, &#39;RC0_XX_LB&#39;, &#39;RC0_POIL_P_BAR&#39;, &#39;CONSTANT_RC0_TFP_FE_R&#39;, &#39;RES_RC0_Q_P&#39;, &#39;ISR_GIDAMP&#39;, &#39;USA_INFCPIX_TAR&#39;, &#39;RC0_ABSRAT&#39;, &#39;ISR_TARIFF_IM&#39;, &#39;USA_CPI12&#39;, &#39;RC0_TAXCBASE_N_BAR&#39;, &#39;USA_RC0_L&#39;, &#39;RC0_RK7&#39;, &#39;RC0_IFOOD2&#39;, &#39;CONSTANT_USA_C_OLG_R&#39;, &#39;RPFOOD3&#39;, &#39;ISR_XX_TAU_K&#39;, &#39;FILTER_USA_PI_P&#39;, &#39;ISR_DAMP_GDP_GAP&#39;, &#39;RC0_RK2&#39;, &#39;USA_TMETAL&#39;, &#39;RC0_NPOP_R_EXOG&#39;, &#39;USA_WEXP1&#39;, &#39;FILTER_ISR_TAU_OIL&#39;, &#39;ISR_COIL3&#39;, &#39;USA_CPI3&#39;, &#39;RC0_GI_MPROP&#39;, &#39;RES_ISR_INT&#39;, &#39;USA_PCFOOD_P_BAR&#39;, &#39;USA_IMETAL3&#39;, &#39;USA_TFPRAT&#39;, &#39;RES_RC0_MROYALTIES_N&#39;, &#39;USA_CPI2&#39;, &#39;CONSTANT_RC0_C_OLG_R&#39;, &#39;RES_ISR_RCORP&#39;, &#39;USA_PARTH_ADJ_STAR&#39;, &#39;RC0_PXM2&#39;, &#39;USA_TRANSFER_RAT_BAR&#39;, &#39;ISR_CPI10&#39;, &#39;FILTER_RC0_TAU_OIL&#39;, &#39;RC0_GILRSW&#39;, &#39;ISR_TRANSFER_TARG_RAT_EXOG&#39;, &#39;RES_RPOIL_CYC&#39;, &#39;USA_CPI10&#39;, &#39;RES_USA_PRODMETAL_R&#39;, &#39;USA_GI_N_EXOG&#39;, &#39;RC0_TAXOILBASE_N_BAR&#39;, &#39;CONSTANT_RC0_PRIMSUR_TAR&#39;, &#39;USA_XFOOD1&#39;, &#39;USA_XFOOD3&#39;, &#39;RC0_TOIL&#39;, &#39;FILTER_RPMETAL_PERM&#39;, &#39;ISR_IMETAL4&#39;, &#39;RPOIL1&#39;, &#39;RES_USA_INTMP&#39;, &#39;ISR_NPOP_R_EXOG&#39;, &#39;RES_ISR_Z_NFA&#39;, &#39;USA_PARTH1&#39;, &#39;RC0_PRODOIL_R_BAR&#39;, &#39;USA_INTMP_BAR&#39;, &#39;USA_LSTAX_N&#39;, &#39;ISR_MFACTOR&#39;, &#39;CONSTANT_RC0_PXMF_P&#39;, &#39;USA_TRANSFERLRSW&#39;, &#39;FILTER_RC0_PARTH&#39;, &#39;RC0_XOIL1&#39;, &#39;RC0_GIDAMP&#39;, &#39;CONSTANT_USA_PARTH&#39;, &#39;ISR_COM1&#39;, &#39;ISR_ABSRAT&#39;, &#39;USA_XMETAL3&#39;, &#39;USA_CPI8&#39;, &#39;RC0_ABSRATROOT&#39;, &#39;RC0_C_LIQ_R_BAR&#39;, &#39;ISR_USA_S&#39;, &#39;RC0_IM2&#39;, &#39;USA_B_STAR&#39;, &#39;USA_MKT1&#39;, &#39;RPOIL4&#39;, &#39;RC0_MKT1&#39;, &#39;TRDEMETAL_R&#39;, &#39;CONSTANT_ISR_PG_P&#39;, &#39;USA_NSPILLX1&#39;, &#39;RES_USA_GNP_R&#39;, &#39;RES_ISR_INTMP&#39;, &#39;FILTER_ISR_PI_P&#39;, &#39;CONSTANT_ISR_UNRH_FE&#39;, &#39;RES_USA_INTCORP&#39;, &#39;RES_RC0_W_R_AVG&#39;, &#39;USA_PRODOIL_R_BAR&#39;, &#39;RC0_INTWT&#39;, &#39;RC0_PRODOIL_R_EXOG&#39;, &#39;RES_USA_Z_AVG&#39;, &#39;USA_IMETAL5&#39;, &#39;CONSTANT_USA_PCW_P&#39;, &#39;RC0_PROB&#39;, &#39;RC0_EPS_TAR&#39;, &#39;CONSTANT_WTRADE_OIL_N&#39;, &#39;RC0_PARTH2&#39;, &#39;RES_RC0_EPS&#39;, &#39;ISR_INTGR&#39;, &#39;RC0_RK1&#39;, &#39;RES_USA_INFWEXP&#39;, &#39;USA_TFOOD&#39;, &#39;USA_COSTMETAL_P&#39;, &#39;RC0_PARTH3&#39;, &#39;USA_TAXLBASE_N_BAR&#39;, &#39;FILTER_USA_XM_R&#39;, &#39;ISR_GDP_N_BAR&#39;, &#39;FILTER_USA_CPINCOM_P&#39;, &#39;USA_XOIL5&#39;, &#39;USA_XX_TAU_K&#39;, &#39;RES_RC0_BREVAL_N&#39;, &#39;ISR_PARTH3&#39;, &#39;RC0_XOIL3&#39;, &#39;RC0_COIL1&#39;, &#39;USA_TRANSFER_TARG_RAT_EXOG&#39;, &#39;USA_IM2&#39;, &#39;RES_USA_WH_R&#39;, &#39;RC0_GC_MPROP&#39;, &#39;RC0_GDP_R_BAR&#39;, &#39;FILTER_USA_IOIL_R&#39;, &#39;CONSTANT_USA_TPREM&#39;, &#39;USA_GI_R_BAR&#39;, &#39;RC0_TRANSFER_RAT_BAR&#39;, &#39;RES_USA_PGDP_P_AVG&#39;, &#39;USA_MNFACTOR&#39;, &#39;RES_ISR_TAXOIL_N&#39;, &#39;CONSTANT_USA_UNRH_FE&#39;, &#39;ISR_PXM2&#39;, &#39;USA_CPI6&#39;, &#39;ISR_USA_SFOOD&#39;, &#39;USA_COIL1&#39;, &#39;RC0_TFPRATROOT&#39;, &#39;RES_ISR_PRODFOOD_PERM_R&#39;, &#39;RES_USA_TFP_FE_R_AVG&#39;, &#39;ISR_PCFOODBASE&#39;, &#39;RES_PMETAL_PERM_P&#39;]</span>
    
    <span class="c1"># mod_eqs, new_endog, map_new_endog, leads, lags = fixEquations(eqs=[eq],endog=endog,params=params)</span>
    <span class="c1"># print(mod_eqs)</span>
    
    <span class="c1"># eq = &quot;&quot;&quot;ISR_PARTH_FE = (ISR_PARTH_FE(-1)/(ISR_NPOPH_R_BAR(-1)/ISR_NPOPH_R(-1))**ISR_PARTH5-RES_ISR_PARTH_FE-E_ISR_PARTH_FE(-1)-E_ISR_PART_FE(-1)*ISR_NPOP_R(-1)/ISR_NPOPH_R(-1))**ISR_COEFPARTH*ISR_PARTH_ADJ_STAR**(1-ISR_COEFPARTH)*(ISR_NPOPH_R_BAR/ISR_NPOPH_R)**ISR_PARTH5+RES_ISR_PARTH_FE+E_ISR_PARTH_FE+E_ISR_PART_FE*ISR_NPOP_R/ISR_NPOPH_R&quot;&quot;&quot;</span>
    <span class="c1"># endog = [&#39;E_WRL_PRODOIL_CYC_R&#39;, &#39;ISR_ACT_R&#39;, &#39;ISR_BREVAL_N&#39;, &#39;ISR_B_N&#39;, &#39;ISR_B_RAT&#39;, &#39;ISR_CFOOD_R&#39;, &#39;ISR_CNCOM_R&#39;, &#39;ISR_COIL_R&#39;, &#39;ISR_COMEFFECT_R&#39;, &#39;ISR_COM_FE_R&#39;, &#39;ISR_CPI13&#39;, &#39;ISR_CPINCOM_P&#39;, &#39;ISR_CPIX_P&#39;, &#39;ISR_CPI_P&#39;, &#39;ISR_CURBAL_N&#39;, &#39;ISR_C_LIQ_R&#39;, &#39;ISR_C_OLG_R&#39;, &#39;ISR_C_R&#39;, &#39;ISR_C_RAT&#39;, &#39;ISR_DELTA&#39;, &#39;ISR_EPS&#39;, &#39;ISR_FACTFOOD_R&#39;, &#39;ISR_FACT_R&#39;, &#39;ISR_FXPREM&#39;, &#39;ISR_GC_N&#39;, &#39;ISR_GC_R&#39;, &#39;ISR_GC_RAT&#39;, &#39;ISR_GDEF_N&#39;, &#39;ISR_GDEF_RAT&#39;, &#39;ISR_GDEF_TAR&#39;, &#39;ISR_GDPINC_N&#39;, &#39;ISR_GDPSIZE&#39;, &#39;ISR_GDP_FE_R&#39;, &#39;ISR_GDP_N&#39;, &#39;ISR_GDP_R&#39;, &#39;ISR_GE_N&#39;, &#39;ISR_GISTOCK_R&#39;, &#39;ISR_GI_N&#39;, &#39;ISR_GI_R&#39;, &#39;ISR_GI_RAT&#39;, &#39;ISR_GNP_R&#39;, &#39;ISR_GOVCHECK&#39;, &#39;ISR_GSUB_N&#39;, &#39;ISR_GTARIFF_N&#39;, &#39;ISR_G_R&#39;, &#39;ISR_IFOODA_R&#39;, &#39;ISR_IFOOD_R&#39;, &#39;ISR_IMETALA_R&#39;, &#39;ISR_IMETAL_R&#39;, &#39;ISR_IM_R&#39;, &#39;ISR_INFCPI&#39;, &#39;ISR_INFCPIX&#39;, &#39;ISR_INFEXP&#39;, &#39;ISR_INFL&#39;, &#39;ISR_INFPIM&#39;, &#39;ISR_INFWAGE&#39;, &#39;ISR_INFWAGEEFF&#39;, &#39;ISR_INFWEXP&#39;, &#39;ISR_INT&#39;, &#39;ISR_INT10&#39;, &#39;ISR_INTC&#39;, &#39;ISR_INTCORP&#39;, &#39;ISR_INTCOST_N&#39;, &#39;ISR_INTCOST_RAT&#39;, &#39;ISR_INTGB&#39;, &#39;ISR_INTMP&#39;, &#39;ISR_INTMPU&#39;, &#39;ISR_INTNFA&#39;, &#39;ISR_INTRF&#39;, &#39;ISR_INTRF10&#39;, &#39;ISR_INTXM10&#39;, &#39;ISR_INVESTP_R&#39;, &#39;ISR_INVEST_R&#39;, &#39;ISR_INVEST_RAT&#39;, &#39;ISR_IOILA_R&#39;, &#39;ISR_IOIL_R&#39;, &#39;ISR_IT_R&#39;, &#39;ISR_IT_RAT&#39;, &#39;ISR_J&#39;, &#39;ISR_KG_R&#39;, &#39;ISR_K_R&#39;, &#39;ISR_LABH_FE_R&#39;, &#39;ISR_LABH_R&#39;, &#39;ISR_LAB_FE_R&#39;, &#39;ISR_LAB_R&#39;, &#39;ISR_LF_FE_R&#39;, &#39;ISR_LF_R&#39;, &#39;ISR_LSTAX_RAT&#39;, &#39;ISR_MKTPREM&#39;, &#39;ISR_MKTPREMSM&#39;, &#39;ISR_MPC&#39;, &#39;ISR_MPCINV&#39;, &#39;ISR_NFAREVAL_N&#39;, &#39;ISR_NFA_D&#39;, &#39;ISR_NFA_RAT&#39;, &#39;ISR_NPOPB_R&#39;, &#39;ISR_NPOPH_R&#39;, &#39;ISR_NPOP_R&#39;, &#39;ISR_NTRFPSPILL_FE_R&#39;, &#39;ISR_OILRECEIPT_N&#39;, &#39;ISR_OILSUB_N&#39;, &#39;ISR_PART&#39;, &#39;ISR_PARTH&#39;, &#39;ISR_PARTH_DES&#39;, &#39;ISR_PARTH_FE&#39;, &#39;ISR_PART_DES&#39;, &#39;ISR_PART_FE&#39;, &#39;ISR_PCFOOD_P&#39;, &#39;ISR_PCOIL_P&#39;, &#39;ISR_PCW_P&#39;, &#39;ISR_PC_P&#39;, &#39;ISR_PFM_P&#39;, &#39;ISR_PFOOD_P&#39;, &#39;ISR_PGDP_P&#39;, &#39;ISR_PGDP_P_AVG&#39;, &#39;ISR_PG_P&#39;, &#39;ISR_PIMADJ_P&#39;, &#39;ISR_PIMA_P&#39;, &#39;ISR_PIM_P&#39;, &#39;ISR_PIT_P&#39;, &#39;ISR_PI_P&#39;, &#39;ISR_PMETAL_CYC_P&#39;, &#39;ISR_PMETAL_P&#39;, &#39;ISR_PMETAL_PERM_P&#39;, &#39;ISR_POIL_CYC_P&#39;, &#39;ISR_POIL_P&#39;, &#39;ISR_POIL_PERM_P&#39;, &#39;ISR_POIL_P_SUB&#39;, &#39;ISR_PRIMSUR_N&#39;, &#39;ISR_PRIMSUR_TAR&#39;, &#39;ISR_PRODFOOD_CYC_R&#39;, &#39;ISR_PRODFOOD_PERM_R&#39;, &#39;ISR_PRODFOOD_R&#39;, &#39;ISR_PSAVING_N&#39;, &#39;ISR_PXMF_P&#39;, &#39;ISR_PXMUNADJ_P&#39;, &#39;ISR_PXM_P&#39;, &#39;ISR_PXT_P&#39;, &#39;ISR_Q_P&#39;, &#39;ISR_R&#39;, &#39;ISR_R10&#39;, &#39;ISR_RC&#39;, &#39;ISR_RC0_SM&#39;, &#39;ISR_RC0_WM&#39;, &#39;ISR_RCI&#39;, &#39;ISR_RCORP&#39;, &#39;ISR_REER&#39;, &#39;ISR_RK8&#39;, &#39;ISR_RK_P&#39;, &#39;ISR_RPREM&#39;, &#39;ISR_R_NEUT&#39;, &#39;ISR_SOVPREM&#39;, &#39;ISR_SOVPREMSM&#39;, &#39;ISR_SUB_OIL&#39;, &#39;ISR_TAU_C&#39;, &#39;ISR_TAU_K&#39;, &#39;ISR_TAU_L&#39;, &#39;ISR_TAU_OIL&#39;, &#39;ISR_TAXC_N&#39;, &#39;ISR_TAXC_RAT&#39;, &#39;ISR_TAXK_N&#39;, &#39;ISR_TAXK_RAT&#39;, &#39;ISR_TAXLH_N&#39;, &#39;ISR_TAXL_N&#39;, &#39;ISR_TAXL_RAT&#39;, &#39;ISR_TAXOIL_N&#39;, &#39;ISR_TAX_N&#39;, &#39;ISR_TAX_RAT&#39;, &#39;ISR_TB_N&#39;, &#39;ISR_TFPEFFECT_R&#39;, &#39;ISR_TFPKGSPILL_FE_R&#39;, &#39;ISR_TFPSPILL_FE_R&#39;, &#39;ISR_TFP_FE_R&#39;, &#39;ISR_TFP_FE_R_AVG&#39;, &#39;ISR_TFP_R&#39;, &#39;ISR_TM&#39;, &#39;ISR_TPREM&#39;, &#39;ISR_TRANSFER_LIQ_N&#39;, &#39;ISR_TRANSFER_N&#39;, &#39;ISR_TRANSFER_OLG_N&#39;, &#39;ISR_TRANSFER_RAT&#39;, &#39;ISR_TRANSFER_TARG_N&#39;, &#39;ISR_TRANSFER_TARG_RAT&#39;, &#39;ISR_TRFPSPILL_FE_R&#39;, &#39;ISR_UFOOD_R&#39;, &#39;ISR_UNR&#39;, &#39;ISR_UNRH&#39;, &#39;ISR_UNRH_FE&#39;, &#39;ISR_UNR_FE&#39;, &#39;ISR_USA_SM&#39;, &#39;ISR_USA_WM&#39;, &#39;ISR_WAGEEFF_N&#39;, &#39;ISR_WAGEH_N&#39;, &#39;ISR_WAGE_N&#39;, &#39;ISR_WF_R&#39;, &#39;ISR_WH_R&#39;, &#39;ISR_WK_N&#39;, &#39;ISR_WO_R&#39;, &#39;ISR_W_R&#39;, &#39;ISR_W_R_AVG&#39;, &#39;ISR_XFOOD_R&#39;, &#39;ISR_XMA_R&#39;, &#39;ISR_XM_R&#39;, &#39;ISR_XT_R&#39;, &#39;ISR_XT_RAT&#39;, &#39;ISR_YCAP_N&#39;, &#39;ISR_YD_R&#39;, &#39;ISR_YLABH_N&#39;, &#39;ISR_YLAB_N&#39;, &#39;ISR_Z&#39;, &#39;ISR_Z_AVG&#39;, &#39;ISR_Z_NFA&#39;, &#39;PFOOD_P&#39;, &#39;PMETAL_CYC_P&#39;, &#39;PMETAL_P&#39;, &#39;PMETAL_PERM_P&#39;, &#39;POIL_CYC_P&#39;, &#39;POIL_P&#39;, &#39;POIL_PERM_P&#39;, &#39;RC0_ACT_R&#39;, &#39;RC0_BREVAL_N&#39;, &#39;RC0_B_N&#39;, &#39;RC0_B_RAT&#39;, &#39;RC0_CFOOD_R&#39;, &#39;RC0_CNCOM_R&#39;, &#39;RC0_COIL_R&#39;, &#39;RC0_COMEFFECT_R&#39;, &#39;RC0_COM_FE_R&#39;, &#39;RC0_CPI13&#39;, &#39;RC0_CPINCOM_P&#39;, &#39;RC0_CPIX_P&#39;, &#39;RC0_CPI_P&#39;, &#39;RC0_CURBAL_N&#39;, &#39;RC0_C_LIQ_R&#39;, &#39;RC0_C_OLG_R&#39;, &#39;RC0_C_R&#39;, &#39;RC0_C_RAT&#39;, &#39;RC0_DELTA&#39;, &#39;RC0_EPS&#39;, &#39;RC0_FACTFOOD_R&#39;, &#39;RC0_FACTMETAL_R&#39;, &#39;RC0_FACTOIL_R&#39;, &#39;RC0_FACT_R&#39;, &#39;RC0_FXPREM&#39;, &#39;RC0_GC_N&#39;, &#39;RC0_GC_R&#39;, &#39;RC0_GC_RAT&#39;, &#39;RC0_GDEF_N&#39;, &#39;RC0_GDEF_RAT&#39;, &#39;RC0_GDEF_TAR&#39;, &#39;RC0_GDPINC_N&#39;, &#39;RC0_GDPSIZE&#39;, &#39;RC0_GDP_FE_R&#39;, &#39;RC0_GDP_N&#39;, &#39;RC0_GDP_R&#39;, &#39;RC0_GE_N&#39;, &#39;RC0_GISTOCK_R&#39;, &#39;RC0_GI_N&#39;, &#39;RC0_GI_R&#39;, &#39;RC0_GI_RAT&#39;, &#39;RC0_GNP_R&#39;, &#39;RC0_GOVCHECK&#39;, &#39;RC0_GSUB_N&#39;, &#39;RC0_GTARIFF_N&#39;, &#39;RC0_G_R&#39;, &#39;RC0_IFOODA_R&#39;, &#39;RC0_IFOOD_R&#39;, &#39;RC0_IMETALA_R&#39;, &#39;RC0_IMETAL_R&#39;, &#39;RC0_IM_R&#39;, &#39;RC0_INFCPI&#39;, &#39;RC0_INFCPIX&#39;, &#39;RC0_INFEXP&#39;, &#39;RC0_INFL&#39;, &#39;RC0_INFPIM&#39;, &#39;RC0_INFWAGE&#39;, &#39;RC0_INFWAGEEFF&#39;, &#39;RC0_INFWEXP&#39;, &#39;RC0_INT&#39;, &#39;RC0_INT10&#39;, &#39;RC0_INTC&#39;, &#39;RC0_INTCORP&#39;, &#39;RC0_INTCOST_N&#39;, &#39;RC0_INTCOST_RAT&#39;, &#39;RC0_INTGB&#39;, &#39;RC0_INTMP&#39;, &#39;RC0_INTMPU&#39;, &#39;RC0_INTNFA&#39;, &#39;RC0_INTRF&#39;, &#39;RC0_INTRF10&#39;, &#39;RC0_INTXM10&#39;, &#39;RC0_INVESTP_R&#39;, &#39;RC0_INVEST_R&#39;, &#39;RC0_INVEST_RAT&#39;, &#39;RC0_IOILA_R&#39;, &#39;RC0_IOIL_R&#39;, &#39;RC0_ISR_SM&#39;, &#39;RC0_ISR_WM&#39;, &#39;RC0_IT_R&#39;, &#39;RC0_IT_RAT&#39;, &#39;RC0_J&#39;, &#39;RC0_KG_R&#39;, &#39;RC0_K_R&#39;, &#39;RC0_LABH_FE_R&#39;, &#39;RC0_LABH_R&#39;, &#39;RC0_LAB_FE_R&#39;, &#39;RC0_LAB_R&#39;, &#39;RC0_LF_FE_R&#39;, &#39;RC0_LF_R&#39;, &#39;RC0_LSTAX_RAT&#39;, &#39;RC0_MKTPREM&#39;, &#39;RC0_MKTPREMSM&#39;, &#39;RC0_MPC&#39;, &#39;RC0_MPCINV&#39;, &#39;RC0_MROYALTIES_N&#39;, &#39;RC0_MROYALTY&#39;, &#39;RC0_NFAREVAL_N&#39;, &#39;RC0_NFA_D&#39;, &#39;RC0_NFA_RAT&#39;, &#39;RC0_NPOPB_R&#39;, &#39;RC0_NPOPH_R&#39;, &#39;RC0_NPOP_R&#39;, &#39;RC0_NTRFPSPILL_FE_R&#39;, &#39;RC0_OILPAY_N&#39;, &#39;RC0_OILRECEIPT_N&#39;, &#39;RC0_OILSHARF&#39;, &#39;RC0_OILSUB_N&#39;, &#39;RC0_PART&#39;, &#39;RC0_PARTH&#39;, &#39;RC0_PARTH_DES&#39;, &#39;RC0_PARTH_FE&#39;, &#39;RC0_PART_DES&#39;, &#39;RC0_PART_FE&#39;, &#39;RC0_PCFOOD_P&#39;, &#39;RC0_PCOIL_P&#39;, &#39;RC0_PCW_P&#39;, &#39;RC0_PC_P&#39;, &#39;RC0_PFM_P&#39;, &#39;RC0_PFOOD_P&#39;, &#39;RC0_PGDP_P&#39;, &#39;RC0_PGDP_P_AVG&#39;, &#39;RC0_PG_P&#39;, &#39;RC0_PIMADJ_P&#39;, &#39;RC0_PIMA_P&#39;, &#39;RC0_PIM_P&#39;, &#39;RC0_PIT_P&#39;, &#39;RC0_PI_P&#39;, &#39;RC0_PMETAL_CYC_P&#39;, &#39;RC0_PMETAL_P&#39;, &#39;RC0_PMETAL_PERM_P&#39;, &#39;RC0_POIL_CYC_P&#39;, &#39;RC0_POIL_P&#39;, &#39;RC0_POIL_PERM_P&#39;, &#39;RC0_POIL_P_SUB&#39;, &#39;RC0_PRIMSUR_N&#39;, &#39;RC0_PRIMSUR_TAR&#39;, &#39;RC0_PRODFOOD_CYC_R&#39;, &#39;RC0_PRODFOOD_PERM_R&#39;, &#39;RC0_PRODFOOD_R&#39;, &#39;RC0_PRODMETAL_CYC_R&#39;, &#39;RC0_PRODMETAL_PERM_R&#39;, &#39;RC0_PRODMETAL_R&#39;, &#39;RC0_PRODOIL_CYC_R&#39;, &#39;RC0_PRODOIL_PERM_R&#39;, &#39;RC0_PRODOIL_R&#39;, &#39;RC0_PSAVING_N&#39;, &#39;RC0_PXMF_P&#39;, &#39;RC0_PXMUNADJ_P&#39;, &#39;RC0_PXM_P&#39;, &#39;RC0_PXT_P&#39;, &#39;RC0_Q_P&#39;, &#39;RC0_R&#39;, &#39;RC0_R10&#39;, &#39;RC0_RC&#39;, &#39;RC0_RCI&#39;, &#39;RC0_RCORP&#39;, &#39;RC0_REER&#39;, &#39;RC0_RK8&#39;, &#39;RC0_RK_P&#39;, &#39;RC0_ROYALTIES_N&#39;, &#39;RC0_ROYALTY&#39;, &#39;RC0_RPREM&#39;, &#39;RC0_R_NEUT&#39;, &#39;RC0_SOVPREM&#39;, &#39;RC0_SOVPREMSM&#39;, &#39;RC0_SUB_OIL&#39;, &#39;RC0_TAU_C&#39;, &#39;RC0_TAU_K&#39;, &#39;RC0_TAU_L&#39;, &#39;RC0_TAU_OIL&#39;, &#39;RC0_TAXC_N&#39;, &#39;RC0_TAXC_RAT&#39;, &#39;RC0_TAXK_N&#39;, &#39;RC0_TAXK_RAT&#39;, &#39;RC0_TAXLH_N&#39;, &#39;RC0_TAXL_N&#39;, &#39;RC0_TAXL_RAT&#39;, &#39;RC0_TAXOIL_N&#39;, &#39;RC0_TAX_N&#39;, &#39;RC0_TAX_RAT&#39;, &#39;RC0_TB_N&#39;, &#39;RC0_TFPEFFECT_R&#39;, &#39;RC0_TFPKGSPILL_FE_R&#39;, &#39;RC0_TFPSPILL_FE_R&#39;, &#39;RC0_TFP_FE_R&#39;, &#39;RC0_TFP_FE_R_AVG&#39;, &#39;RC0_TFP_R&#39;, &#39;RC0_TM&#39;, &#39;RC0_TPREM&#39;, &#39;RC0_TRANSFER_LIQ_N&#39;, &#39;RC0_TRANSFER_N&#39;, &#39;RC0_TRANSFER_OLG_N&#39;, &#39;RC0_TRANSFER_RAT&#39;, &#39;RC0_TRANSFER_TARG_N&#39;, &#39;RC0_TRANSFER_TARG_RAT&#39;, &#39;RC0_TRFPSPILL_FE_R&#39;, &#39;RC0_UFOOD_R&#39;, &#39;RC0_UMETAL_R&#39;, &#39;RC0_UNR&#39;, &#39;RC0_UNRH&#39;, &#39;RC0_UNRH_FE&#39;, &#39;RC0_UNR_FE&#39;, &#39;RC0_UOIL_R&#39;, &#39;RC0_USA_SM&#39;, &#39;RC0_USA_WM&#39;, &#39;RC0_WAGEEFF_N&#39;, &#39;RC0_WAGEH_N&#39;, &#39;RC0_WAGE_N&#39;, &#39;RC0_WF_R&#39;, &#39;RC0_WH_R&#39;, &#39;RC0_WK_N&#39;, &#39;RC0_WO_R&#39;, &#39;RC0_W_R&#39;, &#39;RC0_W_R_AVG&#39;, &#39;RC0_XFOOD_R&#39;, &#39;RC0_XMA_R&#39;, &#39;RC0_XMETAL_R&#39;, &#39;RC0_XM_R&#39;, &#39;RC0_XOIL_R&#39;, &#39;RC0_XT_R&#39;, &#39;RC0_XT_RAT&#39;, &#39;RC0_YCAP_N&#39;, &#39;RC0_YD_R&#39;, &#39;RC0_YLABH_N&#39;, &#39;RC0_YLAB_N&#39;, &#39;RC0_Z&#39;, &#39;RC0_Z_AVG&#39;, &#39;RC0_Z_NFA&#39;, &#39;RPFOOD&#39;, &#39;RPFOOD_CYC&#39;, &#39;RPFOOD_PERM&#39;, &#39;RPMETAL&#39;, &#39;RPMETAL_CYC&#39;, &#39;RPMETAL_CYC_AVG&#39;, &#39;RPMETAL_PERM&#39;, &#39;RPMETAL_PERM_AVG&#39;, &#39;RPOIL&#39;, &#39;RPOIL_CYC&#39;, &#39;RPOIL_CYC_AVG&#39;, &#39;RPOIL_PERM&#39;, &#39;RPOIL_PERM_AVG&#39;, &#39;USA_ACT_R&#39;, &#39;USA_BREVAL_N&#39;, &#39;USA_B_N&#39;, &#39;USA_B_RAT&#39;, &#39;USA_CFOOD_R&#39;, &#39;USA_CNCOM_R&#39;, &#39;USA_COIL_R&#39;, &#39;USA_COMEFFECT_R&#39;, &#39;USA_COM_FE_R&#39;, &#39;USA_CPI13&#39;, &#39;USA_CPINCOM_P&#39;, &#39;USA_CPIX_P&#39;, &#39;USA_CPI_P&#39;, &#39;USA_CURBAL_N&#39;, &#39;USA_C_LIQ_R&#39;, &#39;USA_C_OLG_R&#39;, &#39;USA_C_R&#39;, &#39;USA_C_RAT&#39;, &#39;USA_DELTA&#39;, &#39;USA_EPS&#39;, &#39;USA_FACTFOOD_R&#39;, &#39;USA_FACTMETAL_R&#39;, &#39;USA_FACTOIL_R&#39;, &#39;USA_FACT_R&#39;, &#39;USA_FXPREM&#39;, &#39;USA_GC_N&#39;, &#39;USA_GC_R&#39;, &#39;USA_GC_RAT&#39;, &#39;USA_GDEF_N&#39;, &#39;USA_GDEF_RAT&#39;, &#39;USA_GDEF_TAR&#39;, &#39;USA_GDPINC_N&#39;, &#39;USA_GDPSIZE&#39;, &#39;USA_GDP_FE_R&#39;, &#39;USA_GDP_N&#39;, &#39;USA_GDP_R&#39;, &#39;USA_GE_N&#39;, &#39;USA_GISTOCK_R&#39;, &#39;USA_GI_N&#39;, &#39;USA_GI_R&#39;, &#39;USA_GI_RAT&#39;, &#39;USA_GNP_R&#39;, &#39;USA_GOVCHECK&#39;, &#39;USA_GSUB_N&#39;, &#39;USA_GTARIFF_N&#39;, &#39;USA_G_R&#39;, &#39;USA_IFOODA_R&#39;, &#39;USA_IFOOD_R&#39;, &#39;USA_IMETALA_R&#39;, &#39;USA_IMETAL_R&#39;, &#39;USA_IM_R&#39;, &#39;USA_INFCPI&#39;, &#39;USA_INFCPIX&#39;, &#39;USA_INFEXP&#39;, &#39;USA_INFL&#39;, &#39;USA_INFPIM&#39;, &#39;USA_INFWAGE&#39;, &#39;USA_INFWAGEEFF&#39;, &#39;USA_INFWEXP&#39;, &#39;USA_INT&#39;, &#39;USA_INT10&#39;, &#39;USA_INTC&#39;, &#39;USA_INTCORP&#39;, &#39;USA_INTCOST_N&#39;, &#39;USA_INTCOST_RAT&#39;, &#39;USA_INTGB&#39;, &#39;USA_INTMP&#39;, &#39;USA_INTMPU&#39;, &#39;USA_INTNFA&#39;, &#39;USA_INTRF&#39;, &#39;USA_INTRF10&#39;, &#39;USA_INTXM10&#39;, &#39;USA_INVESTP_R&#39;, &#39;USA_INVEST_R&#39;, &#39;USA_INVEST_RAT&#39;, &#39;USA_IOILA_R&#39;, &#39;USA_IOIL_R&#39;, &#39;USA_ISR_SM&#39;, &#39;USA_ISR_WM&#39;, &#39;USA_IT_R&#39;, &#39;USA_IT_RAT&#39;, &#39;USA_J&#39;, &#39;USA_KG_R&#39;, &#39;USA_K_R&#39;, &#39;USA_LABH_FE_R&#39;, &#39;USA_LABH_R&#39;, &#39;USA_LAB_FE_R&#39;, &#39;USA_LAB_R&#39;, &#39;USA_LF_FE_R&#39;, &#39;USA_LF_R&#39;, &#39;USA_LSTAX_RAT&#39;, &#39;USA_MKTPREM&#39;, &#39;USA_MKTPREMSM&#39;, &#39;USA_MPC&#39;, &#39;USA_MPCINV&#39;, &#39;USA_MROYALTIES_N&#39;, &#39;USA_MROYALTY&#39;, &#39;USA_NFAREVAL_N&#39;, &#39;USA_NFA_D&#39;, &#39;USA_NFA_RAT&#39;, &#39;USA_NPOPB_R&#39;, &#39;USA_NPOPH_R&#39;, &#39;USA_NPOP_R&#39;, &#39;USA_NTRFPSPILL_FE_R&#39;, &#39;USA_OILPAY_N&#39;, &#39;USA_OILRECEIPT_N&#39;, &#39;USA_OILSHARF&#39;, &#39;USA_OILSUB_N&#39;, &#39;USA_PART&#39;, &#39;USA_PARTH&#39;, &#39;USA_PARTH_DES&#39;, &#39;USA_PARTH_FE&#39;, &#39;USA_PART_DES&#39;, &#39;USA_PART_FE&#39;, &#39;USA_PCFOOD_P&#39;, &#39;USA_PCOIL_P&#39;, &#39;USA_PCW_P&#39;, &#39;USA_PC_P&#39;, &#39;USA_PFM_P&#39;, &#39;USA_PFOOD_P&#39;, &#39;USA_PGDP_P&#39;, &#39;USA_PGDP_P_AVG&#39;, &#39;USA_PG_P&#39;, &#39;USA_PIMADJ_P&#39;, &#39;USA_PIMA_P&#39;, &#39;USA_PIM_P&#39;, &#39;USA_PIT_P&#39;, &#39;USA_PI_P&#39;, &#39;USA_PMETAL_CYC_P&#39;, &#39;USA_PMETAL_P&#39;, &#39;USA_PMETAL_PERM_P&#39;, &#39;USA_POIL_CYC_P&#39;, &#39;USA_POIL_P&#39;, &#39;USA_POIL_PERM_P&#39;, &#39;USA_POIL_P_SUB&#39;, &#39;USA_PRIMSUR_N&#39;, &#39;USA_PRIMSUR_TAR&#39;, &#39;USA_PRODFOOD_CYC_R&#39;, &#39;USA_PRODFOOD_PERM_R&#39;, &#39;USA_PRODFOOD_R&#39;, &#39;USA_PRODMETAL_CYC_R&#39;, &#39;USA_PRODMETAL_PERM_R&#39;, &#39;USA_PRODMETAL_R&#39;, &#39;USA_PRODOIL_CYC_R&#39;, &#39;USA_PRODOIL_PERM_R&#39;, &#39;USA_PRODOIL_R&#39;, &#39;USA_PSAVING_N&#39;, &#39;USA_PXMF_P&#39;, &#39;USA_PXMUNADJ_P&#39;, &#39;USA_PXM_P&#39;, &#39;USA_PXT_P&#39;, &#39;USA_Q_P&#39;, &#39;USA_R&#39;, &#39;USA_R10&#39;, &#39;USA_RC&#39;, &#39;USA_RC0_SM&#39;, &#39;USA_RC0_WM&#39;, &#39;USA_RCI&#39;, &#39;USA_RCORP&#39;, &#39;USA_REER&#39;, &#39;USA_RK8&#39;, &#39;USA_RK_P&#39;, &#39;USA_ROYALTIES_N&#39;, &#39;USA_ROYALTY&#39;, &#39;USA_RPREM&#39;, &#39;USA_R_NEUT&#39;, &#39;USA_SOVPREM&#39;, &#39;USA_SOVPREMSM&#39;, &#39;USA_SUB_OIL&#39;, &#39;USA_TAU_C&#39;, &#39;USA_TAU_K&#39;, &#39;USA_TAU_L&#39;, &#39;USA_TAU_OIL&#39;, &#39;USA_TAXC_N&#39;, &#39;USA_TAXC_RAT&#39;, &#39;USA_TAXK_N&#39;, &#39;USA_TAXK_RAT&#39;, &#39;USA_TAXLH_N&#39;, &#39;USA_TAXL_N&#39;, &#39;USA_TAXL_RAT&#39;, &#39;USA_TAXOIL_N&#39;, &#39;USA_TAX_N&#39;, &#39;USA_TAX_RAT&#39;, &#39;USA_TB_N&#39;, &#39;USA_TFPEFFECT_R&#39;, &#39;USA_TFPKGSPILL_FE_R&#39;, &#39;USA_TFPSPILL_FE_R&#39;, &#39;USA_TFP_FE_R&#39;, &#39;USA_TFP_FE_R_AVG&#39;, &#39;USA_TFP_R&#39;, &#39;USA_TM&#39;, &#39;USA_TPREM&#39;, &#39;USA_TRANSFER_LIQ_N&#39;, &#39;USA_TRANSFER_N&#39;, &#39;USA_TRANSFER_OLG_N&#39;, &#39;USA_TRANSFER_RAT&#39;, &#39;USA_TRANSFER_TARG_N&#39;, &#39;USA_TRANSFER_TARG_RAT&#39;, &#39;USA_TRFPSPILL_FE_R&#39;, &#39;USA_UFOOD_R&#39;, &#39;USA_UMETAL_R&#39;, &#39;USA_UNR&#39;, &#39;USA_UNRH&#39;, &#39;USA_UNRH_FE&#39;, &#39;USA_UNR_FE&#39;, &#39;USA_UOIL_R&#39;, &#39;USA_WAGEEFF_N&#39;, &#39;USA_WAGEH_N&#39;, &#39;USA_WAGE_N&#39;, &#39;USA_WF_R&#39;, &#39;USA_WH_R&#39;, &#39;USA_WK_N&#39;, &#39;USA_WO_R&#39;, &#39;USA_W_R&#39;, &#39;USA_W_R_AVG&#39;, &#39;USA_XFOOD_R&#39;, &#39;USA_XMA_R&#39;, &#39;USA_XMETAL_R&#39;, &#39;USA_XM_R&#39;, &#39;USA_XOIL_R&#39;, &#39;USA_XT_R&#39;, &#39;USA_XT_RAT&#39;, &#39;USA_YCAP_N&#39;, &#39;USA_YD_R&#39;, &#39;USA_YLABH_N&#39;, &#39;USA_YLAB_N&#39;, &#39;USA_Z&#39;, &#39;USA_Z_AVG&#39;, &#39;USA_Z_NFA&#39;, &#39;WRL_GDP_FE_METAL_R&#39;, &#39;WRL_GDP_FE_OIL_R&#39;, &#39;WRL_GDP_FE_R&#39;, &#39;WRL_GDP_METAL_R&#39;, &#39;WRL_GDP_OIL_R&#39;, &#39;WRL_GDP_R&#39;, &#39;WRL_PRODFOOD_CYC_R&#39;, &#39;WRL_PRODFOOD_PERM_R&#39;, &#39;WRL_PRODFOOD_R&#39;, &#39;WRL_PRODMETAL_CYC_R&#39;, &#39;WRL_PRODMETAL_PERM_R&#39;, &#39;WRL_PRODMETAL_R&#39;, &#39;WRL_PRODOIL_CYC_R&#39;, &#39;WRL_PRODOIL_PERM_R&#39;, &#39;WRL_PRODOIL_R&#39;, &#39;WRL_XFOOD_R&#39;, &#39;WRL_XMETAL_R&#39;, &#39;WRL_XOIL_R&#39;, &#39;WTRADE_FOOD_N&#39;, &#39;WTRADE_FOOD_R&#39;, &#39;WTRADE_METAL_N&#39;, &#39;WTRADE_METAL_R&#39;, &#39;WTRADE_M_N&#39;, &#39;WTRADE_M_R&#39;, &#39;WTRADE_OIL_N&#39;, &#39;WTRADE_OIL_R&#39;]</span>
    <span class="c1"># params=  [&#39;USA_INTNFA1&#39;, &#39;ISR_EPS_TAR&#39;, &#39;RC0_IM5&#39;, &#39;FILTER_RC0_MPC&#39;, &#39;ISR_SPILLM1&#39;, &#39;RC0_R_NEUT_BAR&#39;, &#39;RC0_XX_PRIMSUR_N&#39;, &#39;PERSISTCOM_ISR&#39;, &#39;ISR_GPROD_SS&#39;, &#39;CONSTANT_USA_PG_P&#39;, &#39;CONSTANT_RPOIL_PERM&#39;, &#39;USA_GC_RAT_BAR&#39;, &#39;FILTER_WTRADE_FOOD_R&#39;, &#39;CONSTANT_USA_FXPREM&#39;, &#39;CONSTANT_RC0_CPINCOM_P&#39;, &#39;CONSTANT_USA_MKTPREM&#39;, &#39;FILTER_USA_PRIMSUR_TAR&#39;, &#39;USA_GDP_N_BAR&#39;, &#39;RC0_COM5&#39;, &#39;RES_ISR_GNP_R&#39;, &#39;USA_COEFPGDP&#39;, &#39;ISR_Q1&#39;, &#39;RC0_IM1&#39;, &#39;FILTER_USA_INTNFA&#39;, &#39;RES_RPOIL_PERM_AVG&#39;, &#39;FILTER_ISR_PXM_P&#39;, &#39;RC0_XX_TRANSFER_N&#39;, &#39;USA_XMETAL2&#39;, &#39;USA_COEFW&#39;, &#39;RES_ISR_INTCORP&#39;, &#39;CONSTANT_USA_CPI_P&#39;, &#39;RC0_GAMMA&#39;, &#39;RES_RPMETAL_CYC_AVG&#39;, &#39;RES_RC0_PCOIL_P&#39;, &#39;USA_COEFTFP&#39;, &#39;ISR_EBASE&#39;, &#39;ISR_INTCOST_RAT_BAR&#39;, &#39;FILTER_USA_PARTH&#39;, &#39;USA_GILRSW&#39;, &#39;RES_RC0_ROYALTIES_N&#39;, &#39;CONSTANT_ISR_GDEF_TAR&#39;, &#39;RES_USA_WO_R&#39;, &#39;ISR_XM2&#39;, &#39;PERSIST_E_RC0_RPMETAL_CYC&#39;, &#39;USA_BNSHK&#39;, &#39;RC0_CFOOD3&#39;, &#39;USA_COM4&#39;, &#39;ISR_BGG4&#39;, &#39;USA_CFOOD3&#39;, &#39;RC0_WEDGEFOOD_P&#39;, &#39;RC0_INTGAP&#39;, &#39;RC0_INFCPIX_TAR&#39;, &#39;FILTER_USA_IMETAL_R&#39;, &#39;ISR_USA_SOIL&#39;, &#39;RC0_RK5&#39;, &#39;USA_GNP_R_BAR&#39;, &#39;FILTER_ISR_PARTH&#39;, &#39;USA_EXP1&#39;, &#39;CONSTANT_RC0_PC_P&#39;, &#39;ISR_XX_TRANSFER_TARG_N&#39;, &#39;RES_ISR_INT10&#39;, &#39;USA_IM5&#39;, &#39;RES_USA_INTRF&#39;, &#39;USA_UNR2&#39;, &#39;USA_TAXL_RAT_BAR&#39;, &#39;USA_BGG3&#39;, &#39;RC0_WT&#39;, &#39;USA_PRODMETAL1&#39;, &#39;CONSTANT_ISR_IOIL_R&#39;, &#39;USA_CPI4&#39;, &#39;RC0_PIM1&#39;, &#39;FILTER_ISR_K_R&#39;, &#39;RES_RC0_Z_NFA&#39;, &#39;USA_PXM1&#39;, &#39;ISR_PARTH_ADJ_STAR&#39;, &#39;RPMETAL_CYC_BAR&#39;, &#39;ISR_IMETAL3&#39;, &#39;RC0_KTAXLRSW&#39;, &#39;FILTER_RC0_TPREM&#39;, &#39;RES_USA_PARTH_FE&#39;, &#39;FILTER_WTRADE_FOOD_N&#39;, &#39;CONSTANT_RC0_IMETAL_R&#39;, &#39;USA_INTINFL&#39;, &#39;RC0_W_R_BAR&#39;, &#39;RC0_INTCOST_RAT_BAR&#39;, &#39;RC0_TAXK_RAT_BAR&#39;, &#39;RC0_CPI7&#39;, &#39;TRDEMETAL_N&#39;, &#39;USA_Q2&#39;, &#39;CONSTANT_ISR_C_OLG_R&#39;, &#39;USA_RK4&#39;, &#39;CONSTANT_RC0_PCW_P&#39;, &#39;USA_RC0_SMETAL&#39;, &#39;ISR_COEFPGDP&#39;, &#39;RES_ISR_C_LIQ_R&#39;, &#39;USA_NSPILLM1&#39;, &#39;FILTER_ISR_TPREM&#39;, &#39;ISR_PSUB_XM&#39;, &#39;ISR_COIL2&#39;, &#39;RC0_CPI4&#39;, &#39;RC0_POIL_P_SUB_BAR&#39;, &#39;FILTER_USA_TAU_OIL&#39;, &#39;RES_ISR_Q_P&#39;, &#39;RC0_GI_N_EXOG&#39;, &#39;USA_Z_BAR&#39;, &#39;ISR_GI_R_BAR&#39;, &#39;RC0_BGG4&#39;, &#39;RES_RC0_Z_AVG&#39;, &#39;ISR_INTMP_BAR&#39;, &#39;USA_COM5&#39;, &#39;USA_LAPH&#39;, &#39;USA_COM1&#39;, &#39;USA_B_RAT_BAR&#39;, &#39;FILTER_ISR_CPI_P&#39;, &#39;ISR_COEFPARTH&#39;, &#39;ISR_IOIL1&#39;, &#39;RES_USA_PCOIL_P&#39;, &#39;CONSTANT_RC0_TPREM&#39;, &#39;RC0_IFOOD1&#39;, &#39;ISR_W_R_BAR&#39;, &#39;RC0_TARGDAMP&#39;, &#39;USA_BETA&#39;, &#39;RC0_CTAXLRSW&#39;, &#39;RC0_XX_TAU_L&#39;, &#39;FILTER_RC0_PRIMSUR_TAR&#39;, &#39;WRL_GDP_OIL_R_BAR&#39;, &#39;FILTER_ISR_PRIMSUR_TAR&#39;, &#39;RES_RC0_INFWEXP&#39;, &#39;ISR_XX_PRIMSUR_N&#39;, &#39;WRL_GDP_R_BAR&#39;, &#39;RC0_ISR_S&#39;, &#39;USA_GI_MPROP&#39;, &#39;ISR_XFOOD1&#39;, &#39;RC0_INTMP_BAR&#39;, &#39;USA_BREVAL1&#39;, &#39;USA_IOIL4&#39;, &#39;ISR_IFOOD4&#39;, &#39;ISR_TRANSFER_RAT_EXOG&#39;, &#39;RC0_IMETAL2&#39;, &#39;RC0_PXM1&#39;, &#39;RC0_TARIFF_IM&#39;, &#39;RES_USA_ROYALTIES_N&#39;, &#39;USA_COSTOIL_P&#39;, &#39;CONSTANT_USA_PXMF_P&#39;, &#39;ISR_MNFACTOR&#39;, &#39;ISR_TAXLBASE_N_BAR&#39;, &#39;RC0_IM_SPILL_BAR&#39;, &#39;USA_PARTH2&#39;, &#39;RC0_DAMP_GDP_GAP&#39;, &#39;USA_IOIL2&#39;, &#39;USA_PRODMETAL_R_EXOG&#39;, &#39;RC0_COM4&#39;, &#39;USA_EPS_TAR&#39;, &#39;ISR_TAU_L_BAR&#39;, &#39;RC0_GI_RAT_BAR&#39;, &#39;RC0_XX_TRANSFER_TARG_N&#39;, &#39;USA_PSUB_XM&#39;, &#39;CONSTANT_USA_NPOPB_R&#39;, &#39;ISR_SIGMA&#39;, &#39;FILTER_USA_RPREM&#39;, &#39;USA_PRODOIL2&#39;, &#39;ISR_VMETAL&#39;, &#39;USA_SUB_XM&#39;, &#39;RC0_PRODMETAL1&#39;, &#39;USA_CFOOD1&#39;, &#39;CONSTANT_USA_OILPAY_N&#39;, &#39;USA_INTLAG&#39;, &#39;RPMETAL_PERM_BAR&#39;, &#39;FILTER_RC0_PCW_P&#39;, &#39;USA_SOV1&#39;, &#39;ISR_TAXCBASE_N_BAR&#39;, &#39;USA_GIDAMP&#39;, &#39;USA_IMETAL1&#39;, &#39;PERSIST_E_RC0_RPOIL_CYC&#39;, &#39;RC0_IMETAL3&#39;, &#39;USA_RC0_S&#39;, &#39;CONSTANT_WTRADE_M_N&#39;, &#39;RC0_XMETAL1&#39;, &#39;ISR_IM1&#39;, &#39;RES_RC0_GNP_R&#39;, &#39;RES_ISR_PGDP_P_AVG&#39;, &#39;TRDEFOOD_N&#39;, &#39;ISR_CPI2&#39;, &#39;ISR_KGTFPRAT&#39;, &#39;USA_CFOOD4&#39;, &#39;ISR_W2&#39;, &#39;RES_USA_INTC&#39;, &#39;RES_ISR_PRODFOOD_R&#39;, &#39;USA_SIGMA&#39;, &#39;RC0_UNR3&#39;, &#39;RC0_INTGR&#39;, &#39;USA_SPILLM1&#39;, &#39;FILTER_ISR_COIL_R&#39;, &#39;RPMETAL1&#39;, &#39;ISR_XM4&#39;, &#39;RC0_TSPILLX1&#39;, &#39;RES_ISR_CURBAL_N&#39;, &#39;RC0_NSPILLX1&#39;, &#39;FILTER_RC0_XOIL_R&#39;, &#39;USA_COM2&#39;, &#39;RES_POIL_PERM_P&#39;, &#39;USA_SPILLX1&#39;, &#39;TRDEOIL_R&#39;, &#39;ISR_CFOOD1&#39;, &#39;RC0_SPILLX1&#39;, &#39;RC0_COSTMETAL_P&#39;, &#39;ISR_R_NEUT_BAR&#39;, &#39;USA_PRODOIL_R_EXOG&#39;, &#39;USA_TOIL&#39;, &#39;FILTER_RC0_PG_P&#39;, &#39;RC0_EBASE&#39;, &#39;CONSTANT_USA_PI_P&#39;, &#39;RC0_CPI2&#39;, &#39;USA_CGBFX&#39;, &#39;RES_USA_MROYALTIES_N&#39;, &#39;RC0_GC_N_EXOG&#39;, &#39;CONSTANT_ISR_MKTPREM&#39;, &#39;RC0_TMETAL&#39;, &#39;ISR_B_STAR&#39;, &#39;ISR_GC_MPROP&#39;, &#39;RC0_XM1&#39;, &#39;USA_TFP_FE_R_BAR&#39;, &#39;ISR_TAXC_RAT_BAR&#39;, &#39;USA_UNR3&#39;, &#39;USA_PARTH4&#39;, &#39;RES_RC0_INT10&#39;, &#39;CONSTANT_ISR_CFOOD_R&#39;, &#39;RES_USA_C_LIQ_R&#39;, &#39;RC0_NFANSHK&#39;, &#39;ISR_WEDGEOIL_P&#39;, &#39;FILTER_USA_TPREM&#39;, &#39;FILTER_ISR_IOIL_R&#39;, &#39;ISR_XFOOD2&#39;, &#39;ISR_C_LAMBDA&#39;, &#39;RES_USA_CURBAL_N&#39;, &#39;RC0_W1&#39;, &#39;ISR_CPI7&#39;, &#39;FILTER_USA_PXM_P&#39;, &#39;ISR_BETA&#39;, &#39;TEMP_USA&#39;, &#39;CONSTANT_USA_INTNFA&#39;, &#39;RC0_XMETAL3&#39;, &#39;WRL_PRODFOOD_R_BAR&#39;, &#39;CONSTANT_USA_XFOOD_R&#39;, &#39;RC0_XFOOD4&#39;, &#39;FILTER_RC0_CFOOD_R&#39;, &#39;RC0_SOV2&#39;, &#39;RES_USA_NFA_D&#39;, &#39;ISR_INTEPS&#39;, &#39;ISR_XX_TRANSFER_N&#39;, &#39;ISR_LAPH&#39;, &#39;CONSTANT_RC0_SOVPREM&#39;, &#39;RC0_PRODOIL1&#39;, &#39;RC0_CHI&#39;, &#39;USA_XOIL4&#39;, &#39;CONSTANT_ISR_K_R&#39;, &#39;USA_GDP_R_BAR&#39;, &#39;USA_XX_GI_N&#39;, &#39;RES_USA_INFCPIX&#39;, &#39;ISR_INTWT&#39;, &#39;RC0_CPI9&#39;, &#39;RC0_EXP1&#39;, &#39;FILTER_USA_DELTA&#39;, &#39;FILTER_RC0_RPREM&#39;, &#39;RPOIL3&#39;, &#39;ISR_IMETAL1&#39;, &#39;PERSIST_E_USA_RPOIL_CYC&#39;, &#39;CONSTANT_RC0_OILPAY_N&#39;, &#39;ISR_XX_TAU_C&#39;, &#39;RC0_XFOOD2&#39;, &#39;CONSTANT_ISR_XFOOD_R&#39;, &#39;CONSTANT_WTRADE_FOOD_R&#39;, &#39;ISR_IM5&#39;, &#39;RC0_IMETAL1&#39;, &#39;USA_PRODFOODSHARE&#39;, &#39;RC0_XX_GI_N&#39;, &#39;RES_RC0_RC&#39;, &#39;USA_UOIL_R_BAR&#39;, &#39;ISR_TAXK_RAT_BAR&#39;, &#39;ISR_CPI4&#39;, &#39;CONSTANT_ISR_IM_R&#39;, &#39;FILTER_USA_XFOOD_R&#39;, &#39;RC0_IOIL2&#39;, &#39;USA_C_MPROP&#39;, &#39;FILTER_RC0_XM_R&#39;, &#39;FILTER_RC0_K_R&#39;, &#39;RC0_CPI1&#39;, &#39;ISR_GNP_R_BAR&#39;, &#39;USA_C_LIQ_R_BAR&#39;, &#39;FILTER_USA_PCW_P&#39;, &#39;ISR_PCOILBASE&#39;, &#39;FILTER_RPFOOD_PERM&#39;, &#39;CONSTANT_RC0_PXM_P&#39;, &#39;RC0_VMETAL&#39;, &#39;FILTER_ISR_IMETAL_R&#39;, &#39;RES_ISR_PIM_P&#39;, &#39;RES_ISR_R_NEUT&#39;, &#39;FILTER_ISR_PG_P&#39;, &#39;RES_ISR_BREVAL_N&#39;, &#39;ISR_XM_MPROP&#39;, &#39;RC0_USA_SOIL&#39;, &#39;RC0_XM2&#39;, &#39;USA_CTAXLRSW&#39;, &#39;ISR_PIM2&#39;, &#39;CONSTANT_ISR_TFP_FE_R&#39;, &#39;USA_CPI1&#39;, &#39;USA_XM_SPILL_BAR&#39;, &#39;RC0_INTC1&#39;, &#39;USA_COIL2&#39;, &#39;USA_RK2&#39;, &#39;CONSTANT_RC0_PARTH&#39;, &#39;FILTER_RC0_FXPREM&#39;, &#39;FILTER_ISR_INTNFA&#39;, &#39;USA_RK5&#39;, &#39;FILTER_USA_GDEF_TAR&#39;, &#39;USA_XOIL2&#39;, &#39;ISR_PARTH4&#39;, &#39;ISR_TSPILLM1&#39;, &#39;RC0_COEFPARTH&#39;, &#39;RC0_IMETAL5&#39;, &#39;FILTER_ISR_C_OLG_R&#39;, &#39;RES_ISR_PARTH_DES&#39;, &#39;CONSTANT_ISR_IFOOD_R&#39;, &#39;USA_XX_GC_N&#39;, &#39;USA_DAMP_GDP_GAP&#39;, &#39;RES_ISR_WH_R&#39;, &#39;USA_XX_TRANSFER_TARG_N&#39;, &#39;FILTER_USA_SOVPREM&#39;, &#39;ISR_TAXOILBASE_N_BAR&#39;, &#39;RC0_B_STAR&#39;, &#39;ISR_COEFTFP&#39;, &#39;USA_TAXC_RAT_BAR&#39;, &#39;CONSTANT_USA_DELTA&#39;, &#39;USA_PCFOODBASE&#39;, &#39;CONSTANT_USA_OILSHARF&#39;, &#39;ISR_TMETAL&#39;, &#39;ISR_BGG1&#39;, &#39;CONSTANT_USA_SOVPREM&#39;, &#39;ISR_PARTH5&#39;, &#39;RC0_PRODMETAL2&#39;, &#39;USA_CTAXDAMP&#39;, &#39;ISR_CTAXLRSW&#39;, &#39;RC0_DELTAG&#39;, &#39;USA_WEDGEFOOD_P&#39;, &#39;ISR_UNR3&#39;, &#39;RES_ISR_INFEXP&#39;, &#39;USA_XOIL_R_BAR&#39;, &#39;FILTER_RC0_PXM_P&#39;, &#39;TEMP_E_USA_RPFOOD_CYC&#39;, &#39;FILTER_RC0_NPOPB_R&#39;, &#39;USA_INTGR&#39;, &#39;USA_XMETAL1&#39;, &#39;ISR_WT&#39;, &#39;USA_C_LAMBDA&#39;, &#39;RES_USA_PARTH_DES&#39;, &#39;ISR_USA_L&#39;, &#39;USA_ALPHA_KG&#39;, &#39;FILTER_ISR_FXPREM&#39;, &#39;ISR_EXP1&#39;, &#39;USA_CFOOD2&#39;, &#39;USA_BGG4&#39;, &#39;RC0_BNSHK&#39;, &#39;ISR_XX_GC_N&#39;, &#39;RES_USA_W_R_AVG&#39;, &#39;RES_RC0_PARTH_FE&#39;, &#39;RC0_CTAXDAMP&#39;, &#39;USA_TARGLRSW&#39;, &#39;RC0_COEFZ&#39;, &#39;ISR_INTC1&#39;, &#39;CONSTANT_USA_XMETAL_R&#39;, &#39;USA_TRANSFERDAMP&#39;, &#39;RES_RC0_TAXOIL_N&#39;, &#39;CONSTANT_RPMETAL_PERM&#39;, &#39;CONSTANT_RC0_CPI_P&#39;, &#39;RC0_XX_OILSUB_N&#39;, &#39;RC0_XM4&#39;, &#39;USA_INTCORP1&#39;, &#39;RC0_XM_MPROP&#39;, &#39;USA_RC0_SOIL&#39;, &#39;ISR_CPI3&#39;, &#39;USA_IM3&#39;, &#39;ISR_ALPHA_FE&#39;, &#39;CONSTANT_USA_ROYALTY&#39;, &#39;RPOIL_PERM_BAR&#39;, &#39;ISR_RK1&#39;, &#39;RC0_C_MPROP&#39;, &#39;RES_USA_BREVAL_N&#39;, &#39;USA_ISR_S&#39;, &#39;RC0_TARGLRSW&#39;, &#39;RES_RC0_INTMP&#39;, &#39;RES_USA_Z_NFA&#39;, &#39;ISR_TAU_K_EXOG&#39;, &#39;RC0_WEDGEOIL_P&#39;, &#39;RC0_C_OLG_R_BAR&#39;, &#39;CONSTANT_USA_K_R&#39;, &#39;ISR_KGSPILLM1&#39;, &#39;USA_TAU_C_EXOG&#39;, &#39;FILTER_WTRADE_M_N&#39;, &#39;RC0_TAXKBASE_N_BAR&#39;, &#39;RC0_W3&#39;, &#39;USA_W_R_BAR&#39;, &#39;CONSTANT_RC0_RPREM&#39;, &#39;RES_RC0_PIM_P&#39;, &#39;RES_ISR_INTRF&#39;, &#39;RPMETAL4&#39;, &#39;RES_ISR_PARTH_FE&#39;, &#39;RC0_IFOOD4&#39;, &#39;ISR_SOV2&#39;, &#39;FILTER_RC0_TFP_FE_R&#39;, &#39;FILTER_ISR_CFOOD_R&#39;, &#39;ISR_TRANSFERSHARE&#39;, &#39;CONSTANT_ISR_NPOPB_R&#39;, &#39;FILTER_RC0_MROYALTY&#39;, &#39;USA_IMETAL4&#39;, &#39;CONSTANT_USA_MPC&#39;, &#39;FILTER_ISR_XFOOD_R&#39;, &#39;RC0_IM4&#39;, &#39;TEMP_ISR&#39;, &#39;ISR_TRANSFERDAMP&#39;, &#39;WRL_GDP_METAL_R_BAR&#39;, &#39;ISR_B_RAT_BAR&#39;, &#39;USA_CPI7&#39;, &#39;USA_LTAXDAMP&#39;, &#39;RC0_XM3&#39;, &#39;USA_TAU_L_EXOG&#39;, &#39;ISR_RK4&#39;, &#39;USA_DAMP_DEBT&#39;, &#39;USA_NPOP_R_EXOG&#39;, &#39;USA_IM4&#39;, &#39;ISR_IMETAL5&#39;, &#39;CONSTANT_USA_PXM_P&#39;, &#39;USA_TARIFF_IM&#39;, &#39;RPFOOD2&#39;, &#39;RC0_COEFW&#39;, &#39;TEMP_E_ISR_TAXK_RAT&#39;, &#39;RC0_Z_BAR&#39;, &#39;CONSTANT_ISR_RPREM&#39;, &#39;ISR_TARGLRSW&#39;, &#39;RC0_LSTAX_N&#39;, &#39;USA_XMETAL4&#39;, &#39;ISR_CFOOD4&#39;, &#39;ISR_INVEST_MPROP&#39;, &#39;RES_RC0_RCORP&#39;, &#39;USA_XOIL3&#39;, &#39;FILTER_RC0_C_OLG_R&#39;, &#39;PERSISTCOM_USA&#39;, &#39;USA_XOIL1&#39;, &#39;RES_USA_OILSUB_N&#39;, &#39;FILTER_ISR_CPINCOM_P&#39;, &#39;ISR_XX_GI_N&#39;, &#39;RC0_B_RAT_BAR&#39;, &#39;ISR_ABSRATROOT&#39;, &#39;ISR_QUOTA_IM&#39;, &#39;RC0_T&#39;, &#39;CONSTANT_USA_IM_R&#39;, &#39;USA_CPI9&#39;, &#39;CONSTANT_ISR_PXM_P&#39;, &#39;FILTER_ISR_XM_R&#39;, &#39;ISR_W3&#39;, &#39;USA_W3&#39;, &#39;RC0_COM2&#39;, &#39;RC0_CFOOD1&#39;, &#39;ISR_INTNFA1&#39;, &#39;ISR_GI_MPROP&#39;, &#39;RC0_PARTH5&#39;, &#39;FILTER_RC0_IFOOD_R&#39;, &#39;USA_TRANSFER_TARG_RAT_BAR&#39;, &#39;USA_RC0_SFOOD&#39;, &#39;RES_USA_INFEXP&#39;, &#39;CONSTANT_ISR_CPINCOM_P&#39;, &#39;ISR_RK5&#39;, &#39;USA_XM1&#39;, &#39;ISR_OILRECEIPT_N_BAR&#39;, &#39;ISR_CGBFX&#39;, &#39;USA_PXM2&#39;, &#39;USA_XM3&#39;, &#39;USA_POIL_P_SUB_BAR&#39;, &#39;FILTER_ISR_UNRH_FE&#39;, &#39;RC0_UNR2&#39;, &#39;FILTER_RC0_PC_P&#39;, &#39;USA_TAXOILBASE_N_BAR&#39;, &#39;RC0_SOV1&#39;, &#39;ISR_TAXL_RAT_BAR&#39;, &#39;RES_RC0_PRODMETAL_CYC_R&#39;, &#39;ISR_XM3&#39;, &#39;USA_XX_TAU_L&#39;, &#39;FILTER_ISR_IM_R&#39;, &#39;FILTER_RC0_OILPAY_N&#39;, &#39;RES_RC0_PRODFOOD_PERM_R&#39;, &#39;ISR_C_MPROP&#39;, &#39;ISR_GCDAMP&#39;, &#39;RES_USA_PRODOIL_R&#39;, &#39;USA_ISR_L&#39;, &#39;ISR_TSPILLX1&#39;, &#39;ISR_COM2&#39;, &#39;FILTER_ISR_PCW_P&#39;, &#39;RC0_XFOOD3&#39;, &#39;CONSTANT_RPFOOD_PERM&#39;, &#39;RC0_XMETAL4&#39;, &#39;FILTER_RC0_XFOOD_R&#39;, &#39;ISR_TFP_FE_R_BAR&#39;, &#39;FILTER_WTRADE_METAL_R&#39;, &#39;RC0_USA_SMETAL&#39;, &#39;USA_GPROD_SS&#39;, &#39;RES_RC0_OILSUB_N&#39;, &#39;RC0_LTAXDAMP&#39;, &#39;USA_INTGB1&#39;, &#39;USA_CPI11&#39;, &#39;CONSTANT_RC0_GDEF_TAR&#39;, &#39;FILTER_RC0_GDEF_TAR&#39;, &#39;FILTER_USA_IFOOD_R&#39;, &#39;USA_RK7&#39;, &#39;RC0_SIGMA&#39;, &#39;RC0_XOIL2&#39;, &#39;RES_USA_PRODFOOD_R&#39;, &#39;RC0_PARTH1&#39;, &#39;RC0_W2&#39;, &#39;FILTER_USA_ROYALTY&#39;, &#39;RES_RPMETAL_CYC&#39;, &#39;RC0_TSPILLM1&#39;, &#39;USA_COIL4&#39;, &#39;RPMETAL2&#39;, &#39;RC0_GREAL_SS&#39;, &#39;RC0_NSPILLM1&#39;, &#39;FILTER_USA_XMETAL_R&#39;, &#39;RES_RC0_INTRF&#39;, &#39;ISR_WEDGEFOOD_P&#39;, &#39;USA_KGTFPRATROOT&#39;, &#39;RES_USA_INTGB&#39;, &#39;CONSTANT_RC0_XOIL_R&#39;, &#39;ISR_XFOOD3&#39;, &#39;CONSTANT_RC0_K_R&#39;, &#39;RC0_INVEST_MPROP&#39;, &#39;ISR_IM3&#39;, &#39;RC0_PCOILBASE&#39;, &#39;RES_RC0_INTC&#39;, &#39;CONSTANT_WTRADE_FOOD_N&#39;, &#39;RC0_GCDAMP&#39;, &#39;RC0_PRODMETAL_R_EXOG&#39;, &#39;RC0_CPI12&#39;, &#39;CONSTANT_WTRADE_METAL_R&#39;, &#39;RC0_PIM2&#39;, &#39;CONSTANT_ISR_PARTH&#39;, &#39;FILTER_ISR_PXMF_P&#39;, &#39;RC0_CPI6&#39;, &#39;RC0_TRANSFERDAMP&#39;, &#39;RC0_COEFTFP&#39;, &#39;ISR_TAU_L_EXOG&#39;, &#39;RC0_CGBFX&#39;, &#39;ISR_TAU_C_EXOG&#39;, &#39;RC0_CPI11&#39;, &#39;RC0_TAU_C_EXOG&#39;, &#39;RES_RC0_INT&#39;, &#39;ISR_RC0_SMETAL&#39;, &#39;ISR_T&#39;, &#39;ISR_INTLAG&#39;, &#39;CONSTANT_RC0_ROYALTY&#39;, &#39;RES_ISR_INFWEXP&#39;, &#39;RPFOOD1&#39;, &#39;USA_NFANSHK&#39;, &#39;RC0_PCFOOD_P_BAR&#39;, &#39;RES_USA_GDEF_N&#39;, &#39;USA_PI1&#39;, &#39;USA_GI_RAT_BAR&#39;, &#39;RC0_KTAXDAMP&#39;, &#39;RES_RC0_INTCORP&#39;, &#39;ISR_POIL_P_SUB_BAR&#39;, &#39;FILTER_RC0_PI_P&#39;, &#39;CONSTANT_RC0_COIL_R&#39;, &#39;ISR_XM_SPILL_BAR&#39;, &#39;RC0_LTAXLRSW&#39;, &#39;FILTER_ISR_TFP_FE_R&#39;, &#39;ISR_TFOOD&#39;, &#39;FILTER_USA_K_R&#39;, &#39;RC0_TAU_L_EXOG&#39;, &#39;USA_TAXK_RAT_BAR&#39;, &#39;FILTER_USA_UNRH_FE&#39;, &#39;ISR_COIL4&#39;, &#39;PERM&#39;, &#39;RC0_INTGB1&#39;, &#39;FILTER_ISR_MPC&#39;, &#39;ISR_GDP_R_BAR&#39;, &#39;ISR_IMETAL2&#39;, &#39;USA_CHI&#39;, &#39;RC0_TAU_L_BAR&#39;, &#39;USA_MTFACTOR&#39;, &#39;ISR_KGTFPRATROOT&#39;, &#39;USA_IOIL3&#39;, &#39;FILTER_RC0_IOIL_R&#39;, &#39;RES_USA_UNRH&#39;, &#39;ISR_COIL1&#39;, &#39;USA_PRODOIL1&#39;, &#39;ISR_TFPRATROOT&#39;, &#39;RES_RC0_PCFOOD_P&#39;, &#39;ISR_USA_SMETAL&#39;, &#39;FILTER_ISR_GDEF_TAR&#39;, &#39;FILTER_RC0_ROYALTY&#39;, &#39;RC0_XOIL_R_BAR&#39;, &#39;USA_TRANSFER_RAT_EXOG&#39;, &#39;RC0_UOIL_R_BAR&#39;, &#39;CONSTANT_ISR_PRIMSUR_TAR&#39;, &#39;PERSIST_E_ISR_RPOIL_CYC&#39;, &#39;FILTER_RC0_COIL_R&#39;, &#39;FILTER_USA_OILSHARF&#39;, &#39;RC0_BGG3&#39;, &#39;RC0_XFOOD1&#39;, &#39;ISR_GREAL_SS&#39;, &#39;RC0_INTINFL&#39;, &#39;FILTER_USA_MROYALTY&#39;, &#39;RC0_COIL4&#39;, &#39;ISR_KTAXDAMP&#39;, &#39;ISR_BNSHK&#39;, &#39;FILTER_USA_IM_R&#39;, &#39;FILTER_USA_OILPAY_N&#39;, &#39;RES_USA_OILRECEIPT_N&#39;, &#39;RC0_GNP_R_BAR&#39;, &#39;TEMP_E_USA_TAXK_RAT&#39;, &#39;RES_RC0_UNRH&#39;, &#39;RC0_INTLAG&#39;, &#39;ISR_IM2&#39;, &#39;ISR_CPI6&#39;, &#39;ISR_IFOOD1&#39;, &#39;RES_ISR_W_R_AVG&#39;, &#39;USA_CPI5&#39;, &#39;ISR_RC0_L&#39;, &#39;RES_RC0_PRODOIL_R&#39;, &#39;USA_BGG2&#39;, &#39;RC0_XOIL4&#39;, &#39;USA_XX_TAU_C&#39;, &#39;CONSTANT_USA_CFOOD_R&#39;, &#39;USA_GCDAMP&#39;, &#39;ISR_TOIL&#39;, &#39;ISR_W1&#39;, &#39;ISR_SUB_XM&#39;, &#39;USA_IOIL1&#39;, &#39;CONSTANT_RC0_DELTA&#39;, &#39;CONSTANT_USA_TAU_OIL&#39;, &#39;ISR_IM4&#39;, &#39;USA_INTCOST_RAT_BAR&#39;, &#39;ISR_INTCORP1&#39;, &#39;USA_TAXCBASE_N_BAR&#39;, &#39;ISR_IOIL5&#39;, &#39;RC0_IFOOD5&#39;, &#39;ISR_C_OLG_R_BAR&#39;, &#39;ISR_RK7&#39;, &#39;CONSTANT_ISR_PI_P&#39;, &#39;RES_ISR_OILSUB_N&#39;, &#39;USA_IM1&#39;, &#39;RPMETAL3&#39;, &#39;CONSTANT_ISR_PCW_P&#39;, &#39;RES_RC0_TFP_FE_R_AVG&#39;, &#39;ISR_IFOOD5&#39;, &#39;RES_RC0_PRODMETAL_R&#39;, &#39;RC0_IM3&#39;, &#39;RES_RC0_PGDP_P_AVG&#39;, &#39;ISR_XX_LB&#39;, &#39;ISR_KTAXLRSW&#39;, &#39;RC0_GC_RAT_BAR&#39;, &#39;CONSTANT_RC0_MKTPREM&#39;, &#39;USA_PARTH5&#39;, &#39;FILTER_ISR_PC_P&#39;, &#39;CONSTANT_RC0_MROYALTY&#39;, &#39;ISR_GI_RAT_BAR&#39;, &#39;RC0_TRANSFER_TARG_RAT_BAR&#39;, &#39;ISR_DELTAG&#39;, &#39;RC0_IMETAL4&#39;, &#39;ISR_COM4&#39;, &#39;ISR_COEFZ&#39;, &#39;USA_T&#39;, &#39;RC0_XMETAL2&#39;, &#39;ISR_NSPILLM1&#39;, &#39;RC0_COIL3&#39;, &#39;ISR_GCLRSW&#39;, &#39;CONSTANT_RC0_INTNFA&#39;, &#39;FILTER_USA_CPI_P&#39;, &#39;ISR_IOIL3&#39;, &#39;ISR_TRANSFER_TARG_RAT_BAR&#39;, &#39;USA_W2&#39;, &#39;RC0_USA_SFOOD&#39;, &#39;RES_USA_RCORP&#39;, &#39;ISR_KREVAL&#39;, &#39;USA_IFOOD5&#39;, &#39;ISR_NSPILLX1&#39;, &#39;CONSTANT_USA_IMETAL_R&#39;, &#39;ISR_CFOOD2&#39;, &#39;FILTER_USA_NPOPB_R&#39;, &#39;USA_VMETAL&#39;, &#39;ISR_DAMP_DEBT&#39;, &#39;RC0_FLOOR&#39;, &#39;RC0_KGTFPRAT&#39;, &#39;USA_KGSPILLM1&#39;, &#39;CONSTANT_ISR_XM_R&#39;, &#39;ISR_GI_N_EXOG&#39;, &#39;RC0_MTFACTOR&#39;, &#39;RES_ISR_PCFOOD_P&#39;, &#39;USA_XX_TRANSFER_N&#39;, &#39;USA_XFOOD2&#39;, &#39;ISR_INFCPIX_TAR&#39;, &#39;RC0_INTCORP1&#39;, &#39;CONSTANT_USA_XOIL_R&#39;, &#39;CONSTANT_USA_COIL_R&#39;, &#39;USA_IFOOD3&#39;, &#39;USA_DELTAG&#39;, &#39;RC0_COM1&#39;, &#39;CONSTANT_ISR_DELTA&#39;, &#39;RES_RC0_INFWAGEEFF&#39;, &#39;ISR_CPI9&#39;, &#39;USA_COEFZ&#39;, &#39;CONSTANT_RC0_OILSHARF&#39;, &#39;CONSTANT_ISR_PC_P&#39;, &#39;USA_INTEPS&#39;, &#39;ISR_SPILLX1&#39;, &#39;RES_ISR_NFA_D&#39;, &#39;RC0_OILRECEIPT_N_BAR&#39;, &#39;RES_USA_RC&#39;, &#39;TRDEFOOD_R&#39;, &#39;RC0_INTNFA1&#39;, &#39;USA_FLOOR&#39;, &#39;CONSTANT_USA_IFOOD_R&#39;, &#39;FILTER_ISR_MKTPREM&#39;, &#39;ISR_RK6&#39;, &#39;USA_TSPILLM1&#39;, &#39;ISR_PARTH1&#39;, &#39;USA_KTAXLRSW&#39;, &#39;CONSTANT_USA_CPINCOM_P&#39;, &#39;RES_RC0_PRODFOOD_R&#39;, &#39;USA_GAMMA&#39;, &#39;ISR_XFOOD4&#39;, &#39;ISR_LSTAX_N&#39;, &#39;ISR_BGG2&#39;, &#39;USA_INVEST_MPROP&#39;, &#39;RPMETAL5&#39;, &#39;FILTER_RPOIL_PERM&#39;, &#39;CONSTANT_RC0_TAU_OIL&#39;, &#39;FILTER_USA_MKTPREM&#39;, &#39;USA_ISR_SFOOD&#39;, &#39;RC0_XX_TAU_C&#39;, &#39;ISR_CPI8&#39;, &#39;ISR_COM5&#39;, &#39;USA_IFOOD4&#39;, &#39;USA_VOIL&#39;, &#39;RC0_TAXC_RAT_BAR&#39;, &#39;USA_Q1&#39;, &#39;RC0_CPI5&#39;, &#39;RC0_VOIL&#39;, &#39;RC0_TFOOD&#39;, &#39;FILTER_RC0_SOVPREM&#39;, &#39;USA_TAU_L_BAR&#39;, &#39;RES_ISR_OILRECEIPT_N&#39;, &#39;CONSTANT_ISR_FXPREM&#39;, &#39;ISR_INTGAP&#39;, &#39;ISR_C_LIQ_R_BAR&#39;, &#39;RC0_BGG1&#39;, &#39;RC0_BREVAL1&#39;, &#39;CONSTANT_ISR_INTNFA&#39;, &#39;ISR_IFOOD2&#39;, &#39;PERSISTCOM_RC0&#39;, &#39;RC0_BGG2&#39;, &#39;USA_BGG1&#39;, &#39;RC0_USA_S&#39;, &#39;USA_TSPILLX1&#39;, &#39;RC0_ISR_L&#39;, &#39;USA_WEDGEOIL_P&#39;, &#39;USA_W1&#39;, &#39;RC0_MNFACTOR&#39;, &#39;RES_RPOIL_CYC_AVG&#39;, &#39;FILTER_RC0_DELTA&#39;, &#39;CONSTANT_RC0_IOIL_R&#39;, &#39;RC0_Q1&#39;, &#39;RES_RC0_C_LIQ_R&#39;, &#39;USA_NPOPH_R_BAR&#39;, &#39;RC0_ALPHA_KG&#39;, &#39;ISR_BREVAL1&#39;, &#39;USA_SOV2&#39;, &#39;ISR_TFPRAT&#39;, &#39;PERM_E_MPC&#39;, &#39;USA_KGTFPRAT&#39;, &#39;USA_INTC1&#39;, &#39;FILTER_RC0_CPI_P&#39;, &#39;RES_USA_PRODOIL_CYC_R&#39;, &#39;USA_IMETAL2&#39;, &#39;WRL_PRODOIL_R_BAR&#39;, &#39;RES_USA_INT&#39;, &#39;USA_PIM2&#39;, &#39;RC0_Q2&#39;, &#39;RES_RC0_GDEF_N&#39;, &#39;TEMP_E_RPFOOD_CYC&#39;, &#39;USA_IFOOD2&#39;, &#39;USA_LTAXLRSW&#39;, &#39;ISR_GC_N_EXOG&#39;, &#39;ISR_LTAXDAMP&#39;, &#39;ISR_INTINFL&#39;, &#39;RC0_PRODOIL2&#39;, &#39;ISR_PI1&#39;, &#39;USA_OILRECEIPT_N_BAR&#39;, &#39;USA_PIM1&#39;, &#39;PERSIST_E_USA_RPMETAL_CYC&#39;, &#39;FILTER_RC0_XMETAL_R&#39;, &#39;CONSTANT_ISR_SOVPREM&#39;, &#39;ISR_GAMMA&#39;, &#39;ISR_POIL_P_BAR&#39;, &#39;CONSTANT_RC0_MPC&#39;, &#39;ISR_NPOPH_R_BAR&#39;, &#39;ISR_IOIL2&#39;, &#39;FILTER_USA_MPC&#39;, &#39;RES_RC0_OILRECEIPT_N&#39;, &#39;RES_ISR_INFCPIX&#39;, &#39;USA_XX_LB&#39;, &#39;ISR_Z_BAR&#39;, &#39;RC0_GI_R_BAR&#39;, &#39;ISR_PRODFOODSHARE&#39;, &#39;RES_ISR_INFWAGEEFF&#39;, &#39;FILTER_USA_FXPREM&#39;, &#39;RES_USA_PRODMETAL_CYC_R&#39;, &#39;RC0_IFOOD3&#39;, &#39;USA_XM2&#39;, &#39;RPOIL2&#39;, &#39;RC0_CPI3&#39;, &#39;RES_RPMETAL_PERM_AVG&#39;, &#39;RC0_IOIL4&#39;, &#39;FILTER_RC0_INTNFA&#39;, &#39;FILTER_RC0_UNRH_FE&#39;, &#39;RC0_GDP_N_BAR&#39;, &#39;RC0_CFOOD4&#39;, &#39;RES_ISR_TFP_FE_R_AVG&#39;, &#39;RC0_PRODFOODSHARE&#39;, &#39;FILTER_RC0_OILSHARF&#39;, &#39;USA_XM_MPROP&#39;, &#39;ISR_FLOOR&#39;, &#39;RES_ISR_EPS&#39;, &#39;RC0_KGSPILLM1&#39;, &#39;USA_COIL3&#39;, &#39;CONSTANT_RC0_XFOOD_R&#39;, &#39;RC0_COEFPGDP&#39;, &#39;TEMP_E_RC0_RPFOOD_CYC&#39;, &#39;ISR_CFOOD3&#39;, &#39;RES_USA_EPS&#39;, &#39;RES_USA_PRODFOOD_PERM_R&#39;, &#39;TEMP_E_RC0_TAXK_RAT&#39;, &#39;FILTER_ISR_IFOOD_R&#39;, &#39;RES_USA_PCFOOD_P&#39;, &#39;USA_PRODMETAL2&#39;, &#39;FILTER_ISR_DELTA&#39;, &#39;RES_ISR_PCOIL_P&#39;, &#39;RC0_GPROD_SS&#39;, &#39;RC0_BETA&#39;, &#39;ISR_PCFOOD_P_BAR&#39;, &#39;RC0_RK4&#39;, &#39;USA_PCOILBASE&#39;, &#39;FILTER_ISR_RPREM&#39;, &#39;RES_RPFOOD_CYC&#39;, &#39;RC0_TRANSFERSHARE&#39;, &#39;RC0_QUOTA_IM&#39;, &#39;WRL_PRODMETAL_R_BAR&#39;, &#39;RC0_TRANSFERLRSW&#39;, &#39;CONSTANT_ISR_CPI_P&#39;, &#39;CONSTANT_RC0_PI_P&#39;, &#39;USA_GC_N_EXOG&#39;, &#39;ISR_IFOOD3&#39;, &#39;CONSTANT_RC0_UNRH_FE&#39;, &#39;ISR_TAXKBASE_N_BAR&#39;, &#39;RES_RC0_WH_R&#39;, &#39;RC0_TAXL_RAT_BAR&#39;, &#39;ISR_XM1&#39;, &#39;ISR_XX_GDEF_N&#39;, &#39;FILTER_RC0_IMETAL_R&#39;, &#39;CONSTANT_RC0_IM_R&#39;, &#39;RC0_XM_SPILL_BAR&#39;, &#39;ISR_CPI12&#39;, &#39;RC0_XX_GDEF_N&#39;, &#39;CONSTANT_USA_GDEF_TAR&#39;, &#39;FILTER_USA_TFP_FE_R&#39;, &#39;ISR_XX_TAU_L&#39;, &#39;USA_QUOTA_IM&#39;, &#39;ISR_PXM1&#39;, &#39;TEMP_RC0&#39;, &#39;USA_TAXKBASE_N_BAR&#39;, &#39;USA_C_OLG_R_BAR&#39;, &#39;FILTER_USA_PXMF_P&#39;, &#39;USA_COEFPARTH&#39;, &#39;ISR_UNR1&#39;, &#39;ISR_GC_RAT_BAR&#39;, &#39;ISR_COEFW&#39;, &#39;RES_ISR_UNRH&#39;, &#39;USA_RK6&#39;, &#39;TRDEOIL_N&#39;, &#39;CONSTANT_RC0_XM_R&#39;, &#39;RC0_TFPRAT&#39;, &#39;ISR_WEXP1&#39;, &#39;USA_GREAL_SS&#39;, &#39;CONSTANT_RC0_PG_P&#39;, &#39;PERSIST_E_ISR_RPMETAL_CYC&#39;, &#39;USA_POIL_P_BAR&#39;, &#39;CONSTANT_USA_IOIL_R&#39;, &#39;TRDEM_N&#39;, &#39;USA_RK1&#39;, &#39;USA_R_NEUT_BAR&#39;, &#39;CONSTANT_RC0_FXPREM&#39;, &#39;USA_IOIL5&#39;, &#39;ISR_RK2&#39;, &#39;USA_MFACTOR&#39;, &#39;USA_PROB&#39;, &#39;ISR_SOV1&#39;, &#39;RES_ISR_INTGB&#39;, &#39;USA_UNR1&#39;, &#39;RES_RC0_PARTH_DES&#39;, &#39;FILTER_USA_XOIL_R&#39;, &#39;FILTER_ISR_NPOPB_R&#39;, &#39;CONSTANT_RC0_IFOOD_R&#39;, &#39;RC0_SUB_XM&#39;, &#39;RPOIL_ROOT&#39;, &#39;USA_INTGAP&#39;, &#39;RC0_TRANSFER_TARG_RAT_EXOG&#39;, &#39;RES_ISR_INTC&#39;, &#39;RES_USA_PIM_P&#39;, &#39;CONSTANT_ISR_PXMF_P&#39;, &#39;RC0_GCLRSW&#39;, &#39;RES_RC0_INFEXP&#39;, &#39;ISR_RC0_SOIL&#39;, &#39;ISR_CPI11&#39;, &#39;CONSTANT_WTRADE_M_R&#39;, &#39;RC0_CFOOD2&#39;, &#39;ISR_MTFACTOR&#39;, &#39;ISR_BGG3&#39;, &#39;RC0_COSTOIL_P&#39;, &#39;ISR_TRANSFER_RAT_BAR&#39;, &#39;USA_XX_PRIMSUR_N&#39;, &#39;RC0_PI1&#39;, &#39;ISR_CHI&#39;, &#39;ISR_GILRSW&#39;, &#39;USA_ALPHA_FE&#39;, &#39;RC0_TRANSFER_RAT_EXOG&#39;, &#39;RC0_CPI8&#39;, &#39;RES_ISR_WO_R&#39;, &#39;USA_IFOOD1&#39;, &#39;RC0_XX_TAU_K&#39;, &#39;USA_IM_SPILL_BAR&#39;, &#39;USA_EBASE&#39;, &#39;CONSTANT_USA_TFP_FE_R&#39;, &#39;ISR_INTGB1&#39;, &#39;USA_XM4&#39;, &#39;RES_RC0_WO_R&#39;, &#39;FILTER_WTRADE_M_R&#39;, &#39;FILTER_RC0_IM_R&#39;, &#39;FILTER_RC0_MKTPREM&#39;, &#39;RC0_ISR_SFOOD&#39;, &#39;RC0_SPILLM1&#39;, &#39;RC0_RK6&#39;, &#39;RC0_INTEPS&#39;, &#39;ISR_CPI1&#39;, &#39;FILTER_WTRADE_OIL_R&#39;, &#39;CONSTANT_ISR_IMETAL_R&#39;, &#39;USA_GC_MPROP&#39;, &#39;FILTER_WTRADE_OIL_N&#39;, &#39;RES_RC0_INTGB&#39;, &#39;RC0_PARTH4&#39;, &#39;CONSTANT_USA_PC_P&#39;, &#39;USA_TARGDAMP&#39;, &#39;ISR_IM_SPILL_BAR&#39;, &#39;FILTER_ISR_SOVPREM&#39;, &#39;RES_USA_Q_P&#39;, &#39;USA_TFPRATROOT&#39;, &#39;RC0_IOIL5&#39;, &#39;CONSTANT_RC0_CFOOD_R&#39;, &#39;CONSTANT_RC0_NPOPB_R&#39;, &#39;FILTER_USA_CFOOD_R&#39;, &#39;RC0_COIL2&#39;, &#39;RES_ISR_GDEF_N&#39;, &#39;RES_ISR_RC&#39;, &#39;RPOIL5&#39;, &#39;ISR_Q2&#39;, &#39;ISR_MKT1&#39;, &#39;ISR_TRANSFERLRSW&#39;, &#39;RC0_UNR1&#39;, &#39;RC0_CPI10&#39;, &#39;FILTER_WTRADE_METAL_N&#39;, &#39;ISR_PARTH2&#39;, &#39;ISR_CPI5&#39;, &#39;CONSTANT_WTRADE_METAL_N&#39;, &#39;USA_WT&#39;, &#39;RES_USA_INFWAGEEFF&#39;, &#39;USA_TRANSFERSHARE&#39;, &#39;ISR_VOIL&#39;, &#39;USA_KREVAL&#39;, &#39;ISR_LTAXLRSW&#39;, &#39;CONSTANT_ISR_TPREM&#39;, &#39;RC0_MFACTOR&#39;, &#39;RC0_PCFOODBASE&#39;, &#39;ISR_XX_OILSUB_N&#39;, &#39;USA_XX_OILSUB_N&#39;, &#39;ISR_PIM1&#39;, &#39;RC0_PSUB_XM&#39;, &#39;USA_ABSRATROOT&#39;, &#39;RC0_XX_GC_N&#39;, &#39;RC0_USA_L&#39;, &#39;USA_XFOOD4&#39;, &#39;FILTER_USA_PC_P&#39;, &#39;RES_RC0_PRODOIL_CYC_R&#39;, &#39;RES_RC0_R_NEUT&#39;, &#39;RC0_TAXLBASE_N_BAR&#39;, &#39;RC0_KGTFPRATROOT&#39;, &#39;CONSTANT_USA_MROYALTY&#39;, &#39;RC0_C_LAMBDA&#39;, &#39;ISR_ALPHA_KG&#39;, &#39;RC0_NPOPH_R_BAR&#39;, &#39;TEMP_E_ISR_RPFOOD_CYC&#39;, &#39;USA_XX_GDEF_N&#39;, &#39;RES_RC0_INFCPIX&#39;, &#39;ISR_TARGDAMP&#39;, &#39;CONSTANT_USA_PRIMSUR_TAR&#39;, &#39;ISR_UNR2&#39;, &#39;FILTER_USA_COIL_R&#39;, &#39;RPOIL_CYC_BAR&#39;, &#39;RC0_WEXP1&#39;, &#39;RC0_PARTH_ADJ_STAR&#39;, &#39;RC0_ALPHA_FE&#39;, &#39;ISR_NFANSHK&#39;, &#39;ISR_IOIL4&#39;, &#39;USA_KTAXDAMP&#39;, &#39;ISR_RC0_S&#39;, &#39;RES_USA_R_NEUT&#39;, &#39;RC0_IOIL1&#39;, &#39;RC0_TFP_FE_R_BAR&#39;, &#39;ISR_RC0_SFOOD&#39;, &#39;CONSTANT_USA_RPREM&#39;, &#39;TRDEM_R&#39;, &#39;RC0_DAMP_DEBT&#39;, &#39;RES_RC0_NFA_D&#39;, &#39;USA_GCLRSW&#39;, &#39;FILTER_USA_C_OLG_R&#39;, &#39;CONSTANT_RC0_XMETAL_R&#39;, &#39;CONSTANT_WTRADE_OIL_R&#39;, &#39;CONSTANT_USA_XM_R&#39;, &#39;USA_TAU_K_EXOG&#39;, &#39;RC0_LAPH&#39;, &#39;ISR_PROB&#39;, &#39;RC0_KREVAL&#39;, &#39;RES_USA_INT10&#39;, &#39;FILTER_USA_PG_P&#39;, &#39;RES_USA_TAXOIL_N&#39;, &#39;RC0_TAU_K_EXOG&#39;, &#39;FILTER_RC0_CPINCOM_P&#39;, &#39;CONSTANT_ISR_COIL_R&#39;, &#39;CONSTANT_ISR_TAU_OIL&#39;, &#39;RC0_XOIL5&#39;, &#39;USA_INTWT&#39;, &#39;RC0_IOIL3&#39;, &#39;CONSTANT_ISR_MPC&#39;, &#39;USA_PARTH3&#39;, &#39;ISR_CTAXDAMP&#39;, &#39;FILTER_RC0_PXMF_P&#39;, &#39;RES_ISR_Z_AVG&#39;, &#39;USA_ABSRAT&#39;, &#39;RC0_XX_LB&#39;, &#39;RC0_POIL_P_BAR&#39;, &#39;CONSTANT_RC0_TFP_FE_R&#39;, &#39;RES_RC0_Q_P&#39;, &#39;ISR_GIDAMP&#39;, &#39;USA_INFCPIX_TAR&#39;, &#39;RC0_ABSRAT&#39;, &#39;ISR_TARIFF_IM&#39;, &#39;USA_CPI12&#39;, &#39;RC0_TAXCBASE_N_BAR&#39;, &#39;USA_RC0_L&#39;, &#39;RC0_RK7&#39;, &#39;RC0_IFOOD2&#39;, &#39;CONSTANT_USA_C_OLG_R&#39;, &#39;RPFOOD3&#39;, &#39;ISR_XX_TAU_K&#39;, &#39;FILTER_USA_PI_P&#39;, &#39;ISR_DAMP_GDP_GAP&#39;, &#39;RC0_RK2&#39;, &#39;USA_TMETAL&#39;, &#39;RC0_NPOP_R_EXOG&#39;, &#39;USA_WEXP1&#39;, &#39;FILTER_ISR_TAU_OIL&#39;, &#39;ISR_COIL3&#39;, &#39;USA_CPI3&#39;, &#39;RC0_GI_MPROP&#39;, &#39;RES_ISR_INT&#39;, &#39;USA_PCFOOD_P_BAR&#39;, &#39;USA_IMETAL3&#39;, &#39;USA_TFPRAT&#39;, &#39;RES_RC0_MROYALTIES_N&#39;, &#39;USA_CPI2&#39;, &#39;CONSTANT_RC0_C_OLG_R&#39;, &#39;RES_ISR_RCORP&#39;, &#39;USA_PARTH_ADJ_STAR&#39;, &#39;RC0_PXM2&#39;, &#39;USA_TRANSFER_RAT_BAR&#39;, &#39;ISR_CPI10&#39;, &#39;FILTER_RC0_TAU_OIL&#39;, &#39;RC0_GILRSW&#39;, &#39;ISR_TRANSFER_TARG_RAT_EXOG&#39;, &#39;RES_RPOIL_CYC&#39;, &#39;USA_CPI10&#39;, &#39;RES_USA_PRODMETAL_R&#39;, &#39;USA_GI_N_EXOG&#39;, &#39;RC0_TAXOILBASE_N_BAR&#39;, &#39;CONSTANT_RC0_PRIMSUR_TAR&#39;, &#39;USA_XFOOD1&#39;, &#39;USA_XFOOD3&#39;, &#39;RC0_TOIL&#39;, &#39;FILTER_RPMETAL_PERM&#39;, &#39;ISR_IMETAL4&#39;, &#39;RPOIL1&#39;, &#39;RES_USA_INTMP&#39;, &#39;ISR_NPOP_R_EXOG&#39;, &#39;RES_ISR_Z_NFA&#39;, &#39;USA_PARTH1&#39;, &#39;RC0_PRODOIL_R_BAR&#39;, &#39;USA_INTMP_BAR&#39;, &#39;USA_LSTAX_N&#39;, &#39;ISR_MFACTOR&#39;, &#39;CONSTANT_RC0_PXMF_P&#39;, &#39;USA_TRANSFERLRSW&#39;, &#39;FILTER_RC0_PARTH&#39;, &#39;RC0_XOIL1&#39;, &#39;RC0_GIDAMP&#39;, &#39;CONSTANT_USA_PARTH&#39;, &#39;ISR_COM1&#39;, &#39;ISR_ABSRAT&#39;, &#39;USA_XMETAL3&#39;, &#39;USA_CPI8&#39;, &#39;RC0_ABSRATROOT&#39;, &#39;RC0_C_LIQ_R_BAR&#39;, &#39;ISR_USA_S&#39;, &#39;RC0_IM2&#39;, &#39;USA_B_STAR&#39;, &#39;USA_MKT1&#39;, &#39;RPOIL4&#39;, &#39;RC0_MKT1&#39;, &#39;TRDEMETAL_R&#39;, &#39;CONSTANT_ISR_PG_P&#39;, &#39;USA_NSPILLX1&#39;, &#39;RES_USA_GNP_R&#39;, &#39;RES_ISR_INTMP&#39;, &#39;FILTER_ISR_PI_P&#39;, &#39;CONSTANT_ISR_UNRH_FE&#39;, &#39;RES_USA_INTCORP&#39;, &#39;RES_RC0_W_R_AVG&#39;, &#39;USA_PRODOIL_R_BAR&#39;, &#39;RC0_INTWT&#39;, &#39;RC0_PRODOIL_R_EXOG&#39;, &#39;RES_USA_Z_AVG&#39;, &#39;USA_IMETAL5&#39;, &#39;CONSTANT_USA_PCW_P&#39;, &#39;RC0_PROB&#39;, &#39;RC0_EPS_TAR&#39;, &#39;CONSTANT_WTRADE_OIL_N&#39;, &#39;RC0_PARTH2&#39;, &#39;RES_RC0_EPS&#39;, &#39;ISR_INTGR&#39;, &#39;RC0_RK1&#39;, &#39;RES_USA_INFWEXP&#39;, &#39;USA_TFOOD&#39;, &#39;USA_COSTMETAL_P&#39;, &#39;RC0_PARTH3&#39;, &#39;USA_TAXLBASE_N_BAR&#39;, &#39;FILTER_USA_XM_R&#39;, &#39;ISR_GDP_N_BAR&#39;, &#39;FILTER_USA_CPINCOM_P&#39;, &#39;USA_XOIL5&#39;, &#39;USA_XX_TAU_K&#39;, &#39;RES_RC0_BREVAL_N&#39;, &#39;ISR_PARTH3&#39;, &#39;RC0_XOIL3&#39;, &#39;RC0_COIL1&#39;, &#39;USA_TRANSFER_TARG_RAT_EXOG&#39;, &#39;USA_IM2&#39;, &#39;RES_USA_WH_R&#39;, &#39;RC0_GC_MPROP&#39;, &#39;RC0_GDP_R_BAR&#39;, &#39;FILTER_USA_IOIL_R&#39;, &#39;CONSTANT_USA_TPREM&#39;, &#39;USA_GI_R_BAR&#39;, &#39;RC0_TRANSFER_RAT_BAR&#39;, &#39;RES_USA_PGDP_P_AVG&#39;, &#39;USA_MNFACTOR&#39;, &#39;RES_ISR_TAXOIL_N&#39;, &#39;CONSTANT_USA_UNRH_FE&#39;, &#39;ISR_PXM2&#39;, &#39;USA_CPI6&#39;, &#39;ISR_USA_SFOOD&#39;, &#39;USA_COIL1&#39;, &#39;RC0_TFPRATROOT&#39;, &#39;RES_ISR_PRODFOOD_PERM_R&#39;, &#39;RES_USA_TFP_FE_R_AVG&#39;, &#39;ISR_PCFOODBASE&#39;, &#39;RES_PMETAL_PERM_P&#39;]</span>
    
    <span class="c1"># mod_eqs, new_endog, map_new_endog, leads, lags = fixEquations(eqs=[eq],endog=endog,params=params)</span>
    <span class="c1"># print(mod_eqs)</span>
    
    <span class="c1"># eq = &#39;x**2+a*x**4 + c + y&#39;</span>
    <span class="c1"># x = &#39;x&#39;</span>
    <span class="c1"># eqs = [&#39;E8_dot4_cpi_ber=u1*(dot_cpi(-1) +dot_cpi(-2) +dot_cpi(-3) +dot_cpi(-4))/4 +u2*ss_target +(1-u1-u2)*E8_dot4_cpi_ber(-1) +e_E8_dot4_cpi_ber&#39;, &#39;lcpi_ber=lcpi_ber(-4)+E8_dot4_cpi_ber&#39;, &#39;lgdp_gap=a1*lgdp_gap(+1)+a2*lgdp_gap(-1)- a3*(lrr_gap+0*term40_gap)+a4*lz_gap+a5*lx_gdp_gap+ a6*(lqforcmd_gap-0.15*lqoil_gap)+e_lgdp_gap&#39;, &#39;gg=j1*gg(-1)+(1-j1)*ss_g+e_g&#39;, &#39;lgdp_eq=lgdp_eq(-1)+gg/4- theta*((lgdp_eq(-1)-lgdp_eq(-2))-gg(1)/4)+e_lgdp_eq&#39;, &#39;dot_gdp=4*(lgdp-lgdp(-1))&#39;, &#39;dot4_gdp=lgdp-lgdp(-4)&#39;, &#39;dot_gdp_eq=4*(lgdp_eq-lgdp_eq(-1))&#39;, &#39;lgdp_gap=lgdp-lgdp_eq&#39;, &#39;lcpi=w_food*lcpi_food +w_elec*lcpi_elec +w_petr*lcpi_petr +w_goodsx*lcpi_goodsx +w_serv*lcpi_serv +e_lcpi&#39;, &#39;lcpi_core*(w_goodsx+w_serv)=w_goodsx*lcpi_goodsx +w_serv*lcpi_serv +e_lcpi_core&#39;, &#39;dot_cpi_serv=(1-b11-b12)*((1-b16)*dot_cpi(+1)+b16*E8_dot4_cpi_ber)+ b11*dot_cpi_serv(-1)+b12*dot_pm_serv+ rmc_serv+e_dot_cpi_serv&#39;, &#39;dot_cpi_goodsx=(1-b21-b22)*((1-b26)*dot_cpi(+1)+b26*E8_dot4_cpi_ber)+ b21*dot_cpi_goodsx(-1)+b22*dot_pm_goodsx+ rmc_goodsx+e_dot_cpi_goodsx&#39;, &#39;rmc_serv=b13*lgdp_gap+b14*lrulc_gap+b15*lz_gap&#39;, &#39;rmc_goodsx=b23*lgdp_gap+b24*lrulc_gap+b25*lz_gap&#39;, &#39;dot_pm_serv=c1*dot_pm_serv(-1)+ (1-c1)*(dot_s+dot_x_cpi-dot_z_eq)+e_dot_pm_serv&#39;, &#39;dot_pm_goodsx=c1*dot_pm_goodsx(-1)+ (1-c1)*(dot_s+dot_x_cpi-dot_z_eq)+e_dot_pm_goodsx&#39;, &#39;dot_cpi_food=(1-b31-b32-b36)*((1-b37)*dot_cpi(+1)+b37*E8_dot4_cpi_ber)+ b31*dot_cpi_food(-1)+b32*(dot_food+dot_s)+rmc_food+ b36*dot4_cpi_petr+e_dot_cpi_food&#39;, &#39;rmc_food=b33*lgdp_gap+b34*lrulc_gap+b35*(lqfood_gap+lz_gap)&#39;, &#39;dot_cpi_elec=b41*dot_cpi_elec(-1)+(1-b41)*dot_cpi(+1) +b42*rmc_elec+e_dot_cpi_elec&#39;, &#39;rmc_elec=b43*lgdp_gap+(1-b43)*lrulc_gap&#39;, &#39;dot_cpi_petr=dot_petrol+e_dot_cpi_petr&#39;, &#39;lpetrol=w_bfp*lbfp+(1-w_bfp)*lpettax+e_lpetrol&#39;, &#39;dot_bfp=dot_oil+dot_s+e_dot_bfp&#39;, &#39;dot_pettax=h6*dot_pettax(-1)+(1-h6)*ss_dot_pettax+e_dot_pettax&#39;, &#39;target=t1*target(-1)+(1-t1)*ss_target+e_target&#39;, &#39;lcpi=lcpi(-1)+dot_cpi/4&#39;, &#39;lcpi_core=lcpi_core(-1)+dot_cpi_core/4&#39;, &#39;lcpi_serv=lcpi_serv(-1)+dot_cpi_serv/4&#39;, &#39;lcpi_goodsx=lcpi_goodsx(-1)+dot_cpi_goodsx/4&#39;, &#39;lcpi_food=lcpi_food(-1)+dot_cpi_food/4&#39;, &#39;lcpi_elec=lcpi_elec(-1)+dot_cpi_elec/4&#39;, &#39;lcpi_petr=lcpi_petr(-1)+dot_cpi_petr/4&#39;, &#39;dot4_cpi=lcpi-lcpi(-4)&#39;, &#39;dot4_cpi_core=lcpi_core-lcpi_core(-4)&#39;, &#39;dot4_cpi_serv=lcpi_serv-lcpi_serv(-4)&#39;, &#39;dot4_cpi_goodsx=lcpi_goodsx-lcpi_goodsx(-4)&#39;, &#39;dot4_cpi_food=lcpi_food-lcpi_food(-4)&#39;, &#39;dot4_cpi_elec=lcpi_elec-lcpi_elec(-4)&#39;, &#39;dot4_cpi_petr=lcpi_petr-lcpi_petr(-4)&#39;, &#39;dot4_pm_goodsx=(dot_pm_goodsx+dot_pm_goodsx(-1)+ dot_pm_goodsx(-2)+dot_pm_goodsx(-3))/4&#39;, &#39;dot4_pm_serv=(dot_pm_serv+dot_pm_serv(-1)+ dot_pm_serv(-2)+dot_pm_serv(-3))/4&#39;, &#39;dot_petrol=(lpetrol-lpetrol(-1))*4&#39;, &#39;dot4_petrol=(lpetrol-lpetrol(-4))&#39;, &#39;lbfp=lbfp(-1)+dot_bfp/4&#39;, &#39;dot4_bfp=(lbfp-lbfp(-4))&#39;, &#39;lpettax=lpettax(-1)+dot_pettax/4&#39;, &#39;dot4_pettax=(lpettax-lpettax(-4))&#39;, &#39;edot4_cpi=(dot4_cpi(+1)+dot4_cpi(+2)+dot4_cpi(+3)+dot4_cpi(+4))/4&#39;, &#39;edot40_cpi=(edot4_cpi+edot4_cpi(+4)+edot4_cpi(+8)+ edot4_cpi(+12)+edot4_cpi(+16)+edot4_cpi(+20)+ edot4_cpi(+24)+edot4_cpi(+28)+edot4_cpi(+32)+ edot4_cpi(+36))/10&#39;, &#39;w_bfp=w_bfp(-1)+e_w_bfp&#39;, &#39;w_food=w_food(-1)+e_w_food&#39;, &#39;w_petr=w_petr(-1)+e_w_petr&#39;, &#39;w_elec=w_elec(-1)+e_w_elec&#39;, &#39;w_goodsx=w_goodsx(-1)+e_w_goodsx&#39;, &#39;w_serv=w_serv(-1)+e_w_serv&#39;, &#39;dot_w=(1-w1-w2)*dot_w(+1)+w1*dot_w(-1)+ w2*(dot_cpi(-1)+dot_rw_eq)-w3*lrulc_gap+ e_dot_w&#39;, &#39;lrulc_gap=lrw_gap-(lgdp_gap-lemp_gap)&#39;, &#39;lemp_gap=k1*lemp_gap(-1)+k2*lgdp_gap(-1)+e_lemp_gap&#39;, &#39;gg_dot_rw_eq=h8*gg_dot_rw_eq(-1)+(1-h8)*(gg-gg_dot_emp_eq)+e_dot_rw_eq&#39;, &#39;lrw_eq=lrw_eq(-1)+gg_dot_rw_eq/4- theta1*((lrw_eq(-1)-lrw_eq(-2))-gg_dot_rw_eq(1)/4)+e_lrw_eq&#39;, &#39;gg_dot_emp_eq=h1*gg_dot_emp_eq(-1)+(1-h1)*ss_dot_emp_eq+e_dot_emp_eq&#39;, &#39;lemp_eq=lemp_eq(-1)+gg_dot_emp_eq/4- theta2*((lemp_eq(-1)-lemp_eq(-2))-gg_dot_emp_eq(1)/4)+e_lemp_eq&#39;, &#39;lw=lw(-1)+dot_w/4&#39;, &#39;dot4_w=(dot_w+dot_w(-1)+dot_w(-2)+dot_w(-3))/4&#39;, &#39;lrw=lrw(-1)+dot_rw/4&#39;, &#39;dot_rw=dot_w-dot_cpi&#39;, &#39;dot4_rw=(dot_rw+dot_rw(-1)+dot_rw(-2)+dot_rw(-3))/4&#39;, &#39;dot_rw_eq=4*(lrw_eq-lrw_eq(-1))&#39;, &#39;lrw_gap=lrw-lrw_eq&#39;, &#39;dot_emp=4*(lemp-lemp(-1))&#39;, &#39;dot4_emp=lemp-lemp(-4)&#39;, &#39;dot_emp_eq=4*(lemp_eq-lemp_eq(-1))&#39;, &#39;lemp_gap=lemp-lemp_eq&#39;, &#39;lulc=lulc(-1)+dot_ulc/4&#39;, &#39;dot_ulc=dot_w+dot_emp-dot_gdp&#39;, &#39;dot4_ulc=(dot_ulc+dot_ulc(-1)+dot_ulc(-2)+dot_ulc(-3))/4&#39;, &#39;ls=e1*ls(+1)+(1-e1)*(ls(-1)+ 2/4*(target-ss_dot_x_cpi+dot_z_eq))+ (-rn+x_rn+prem)/4+e_ls&#39;, &#39;prem=h0*prem(-1)+(1-h0)*prem_eq+e_prem&#39;, &#39;gg_dot_z_eq=h5*gg_dot_z_eq(-1)+(1-h5)*(ss_dot_z_eq-g2*dot_qforcmd_eq)+e_dot_z_eq&#39;, &#39;lz_eq=lz_eq(-1)+gg_dot_z_eq/4- theta3*((lz_eq(-1)-lz_eq(-2))-gg_dot_z_eq(1)/4)+e_lz_eq&#39;, &#39;dot_z_eq(+1)=rr_eq-x_rr_eq-prem_eq+shock_prem&#39;, &#39;prem_eq=hh0*prem_eq(-1)+(1-hh0)*ss_prem_eq+e_prem_eq&#39;, &#39;rr_eq=h4*rr_eq(-1)+(1-h4)*(ss_rr_eq)+e_rr_eq&#39;, &#39;rr40=((rr)+(rr(1))+(rr(2))+(rr(3))+(rr(4))+(rr(5))+(rr(6))+(rr(7))+(rr(8))+(rr(9))+(rr(10))+(rr(11))+(rr(12))+(rr(13))+(rr(14))+(rr(15))+(rr(16))+(rr(17))+(rr(18))+(rr(19))+(rr(20))+(rr(21))+(rr(22))+(rr(23))+(rr(24))+(rr(25))+(rr(26))+(rr(27))+(rr(28))+(rr(29))+(rr(30))+(rr(31))+(rr(32))+(rr(33))+(rr(34))+(rr(35))+(rr(36))+(rr(37))+(rr(38))+(rr(39))) / 40&#39;, &#39;rr40_eq=((rr_eq)+(rr_eq(1))+(rr_eq(2))+(rr_eq(3))+(rr_eq(4))+(rr_eq(5))+(rr_eq(6))+(rr_eq(7))+(rr_eq(8))+(rr_eq(9))+(rr_eq(10))+(rr_eq(11))+(rr_eq(12))+(rr_eq(13))+(rr_eq(14))+(rr_eq(15))+(rr_eq(16))+(rr_eq(17))+(rr_eq(18))+(rr_eq(19))+(rr_eq(20))+(rr_eq(21))+(rr_eq(22))+(rr_eq(23))+(rr_eq(24))+(rr_eq(25))+(rr_eq(26))+(rr_eq(27))+(rr_eq(28))+(rr_eq(29))+(rr_eq(30))+(rr_eq(31))+(rr_eq(32))+(rr_eq(33))+(rr_eq(34))+(rr_eq(35))+(rr_eq(36))+(rr_eq(37))+(rr_eq(38))+(rr_eq(39))) / 40&#39;, &#39;lrr=lrrw01*rr+lrrw40*rr40&#39;, &#39;lrr_eq=lrrw01*rr_eq+lrrw40*rr40_eq&#39;, &#39;lrr_gap=lrr-lrr_eq&#39;, &#39;term40=h4*term40(-1)+(1-h4)*ss_term40+ h7*(prem-ss_prem_eq)+e_term40&#39;, &#39;term40_gap=term40-ss_term40&#39;, &#39;rn40=rr40+edot40_cpi+term40&#39;, &#39;rn=f1*rn(-1)+ (1-f1)*(rn_neutral+ f2*((dot4_cpi(+3)+dot4_cpi(+4)+dot4_cpi(+5))/3-ss_target)+ f3*lgdp_gap)+e_rn&#39;, &#39;ls=ls(-1)+dot_s/4&#39;, &#39;dot4_s=(dot_s+dot_s(-1)+dot_s(-2)+dot_s(-3))/4&#39;, &#39;lz=ls+lx_cpi-lcpi&#39;, &#39;dot_z=4*(lz-lz(-1))&#39;, &#39;dot_z_eq=4*(lz_eq-lz_eq(-1))&#39;, &#39;lz_gap=lz-lz_eq&#39;, &#39;rn_neutral=rr_eq+target&#39;, &#39;rr=rn-dot4_cpi(+1)&#39;, &#39;rr_gap=rr-rr_eq&#39;, &#39;rr_core=rn-dot4_cpi_core(+1)&#39;, &#39;rr_core_gap=rr_core-rr_eq&#39;, &#39;dot_forcmd=4*(lforcmd-lforcmd(-1))&#39;, &#39;lqforcmd=lforcmd-lx_cpi&#39;, &#39;lqforcmd=lqforcmd_eq+lqforcmd_gap&#39;, &#39;dot_qforcmd_eq=4*(lqforcmd_eq-lqforcmd_eq(-1))&#39;, &#39;lqforcmd_gap=g4*lqforcmd_gap(-1)+e_lqforcmd_gap&#39;, &#39;dot_qforcmd_eq=g4*dot_qforcmd_eq(-1)+(1-g4)*(ss_dot_qforcmd_eq)+e_dot_qforcmd_eq&#39;, &#39;dot_food=4*(lfood-lfood(-1))&#39;, &#39;dot4_food=(dot_food+dot_food(-1)+dot_food(-2)+dot_food(-3))/4&#39;, &#39;lqfood=lfood-lx_cpi&#39;, &#39;lqfood=lqfood_eq+lqfood_gap&#39;, &#39;dot_qfood_eq=h2*dot_qfood_eq(-1)+(1-h2)*(ss_dot_qfood_eq)+e_dot_qfood_eq&#39;, &#39;dot_qfood_eq=4*(lqfood_eq-lqfood_eq(-1))&#39;, &#39;lqfood_gap=h2*lqfood_gap(-1)+e_lqfood_gap&#39;, &#39;dot_oil=4*(loil-loil(-1))&#39;, &#39;dot4_oil=(loil-loil(-4))&#39;, &#39;lqoil=loil-lx_cpi&#39;, &#39;lqoil=lqoil_eq+lqoil_gap&#39;, &#39;dot_qoil_eq=h2*dot_qoil_eq(-1)+(1-h2)*(ss_dot_qoil_eq)+e_dot_qoil_eq&#39;, &#39;dot_qoil_eq=4*(lqoil_eq-lqoil_eq(-1))&#39;, &#39;lqoil_gap=h2*lqoil_gap(-1)+e_lqoil_gap&#39;, &#39;x_rn=h3*x_rn(-1)+(1-h3)*(x_rr_eq+dot_x_cpi)+e_x_rn&#39;, &#39;x_rr=x_rn-dot4_x_cpi(+1)&#39;, &#39;x_rr_eq=h3*x_rr_eq(-1)+(1-h3)*ss_x_rr_eq+e_x_rr_eq&#39;, &#39;x_rr_gap=x_rr-x_rr_eq&#39;, &#39;dot_x_cpi=h3*dot_x_cpi(-1)+(1-h3)*ss_dot_x_cpi+e_dot_x_cpi&#39;, &#39;lx_cpi=lx_cpi(-1)+dot_x_cpi/4&#39;, &#39;lx_gdp=lx_gdp(-1)+dot_x_gdp/4&#39;, &#39;dot4_x_gdp=(dot_x_gdp+dot_x_gdp(-1)+dot_x_gdp(-2)+dot_x_gdp(-3))/4&#39;, &#39;dot4_x_cpi=(dot_x_cpi+dot_x_cpi(-1)+dot_x_cpi(-2)+dot_x_cpi(-3))/4&#39;, &#39;lx_gdp_eq=lx_gdp_eq(-1)+g_x/4+e_lx_gdp_eq&#39;, &#39;g_x=jx1*g_x(-1)+(1-jx1)*ss_g_x+e_g_x&#39;, &#39;dot_x_gdp_eq=4*(lx_gdp_eq-lx_gdp_eq(-1))&#39;, &#39;lx_gdp_gap=lx_gdp-lx_gdp_eq&#39;, &#39;lx_gdp_gap=h3*lx_gdp_gap(-1)+e_lx_gdp_gap&#39;, &#39;E0_dot4_cpi=dot4_cpi&#39;, &#39;E1_dot_cpi=dot_cpi(+1)&#39;, &#39;E1_dot4_cpi=dot4_cpi(+1)&#39;, &#39;E3_dot4_cpi=dot4_cpi(+3)&#39;, &#39;E4_dot4_cpi=dot4_cpi(+4)&#39;, &#39;E5_dot4_cpi=dot4_cpi(+5)&#39;, &#39;E1_lgdp_gap=lgdp_gap(+1)&#39;, &#39;E1_dot4_x_cpi=dot4_x_cpi(+1)&#39;, &#39;E1_dot_z_eq=dot_z_eq(+1)&#39;, &#39;E1_ls=ls(+1)&#39;]</span>
    <span class="c1"># variables = [&#39;E8_dot4_cpi_ber&#39;, &#39;lcpi_ber&#39;, &#39;lgdp&#39;, &#39;lgdp_eq&#39;, &#39;lgdp_gap&#39;, &#39;dot_gdp&#39;, &#39;dot4_gdp&#39;, &#39;dot_gdp_eq&#39;, &#39;gg&#39;, &#39;lcpi&#39;, &#39;dot_cpi&#39;, &#39;dot4_cpi&#39;, &#39;lcpi_core&#39;, &#39;dot_cpi_core&#39;, &#39;dot4_cpi_core&#39;, &#39;lcpi_serv&#39;, &#39;dot_cpi_serv&#39;, &#39;dot4_cpi_serv&#39;, &#39;rmc_serv&#39;, &#39;dot_pm_serv&#39;, &#39;dot4_pm_serv&#39;, &#39;lcpi_goodsx&#39;, &#39;dot_cpi_goodsx&#39;, &#39;dot4_cpi_goodsx&#39;, &#39;rmc_goodsx&#39;, &#39;dot_pm_goodsx&#39;, &#39;dot4_pm_goodsx&#39;, &#39;lcpi_food&#39;, &#39;dot_cpi_food&#39;, &#39;dot4_cpi_food&#39;, &#39;rmc_food&#39;, &#39;lcpi_elec&#39;, &#39;dot_cpi_elec&#39;, &#39;dot4_cpi_elec&#39;, &#39;rmc_elec&#39;, &#39;lcpi_petr&#39;, &#39;dot_cpi_petr&#39;, &#39;dot4_cpi_petr&#39;, &#39;lpetrol&#39;, &#39;dot_petrol&#39;, &#39;dot4_petrol&#39;, &#39;lpettax&#39;, &#39;dot_pettax&#39;, &#39;dot4_pettax&#39;, &#39;lbfp&#39;, &#39;dot_bfp&#39;, &#39;dot4_bfp&#39;, &#39;w_bfp&#39;, &#39;target&#39;, &#39;edot4_cpi&#39;, &#39;edot40_cpi&#39;, &#39;w_serv&#39;, &#39;w_goodsx&#39;, &#39;w_food&#39;, &#39;w_elec&#39;, &#39;w_petr&#39;, &#39;lw&#39;, &#39;dot_w&#39;, &#39;dot4_w&#39;, &#39;lrw_gap&#39;, &#39;dot_rw_eq&#39;, &#39;gg_dot_rw_eq&#39;, &#39;dot_rw&#39;, &#39;dot4_rw&#39;, &#39;lrw&#39;, &#39;lrw_eq&#39;, &#39;lemp&#39;, &#39;lemp_eq&#39;, &#39;lemp_gap&#39;, &#39;dot_emp&#39;, &#39;dot4_emp&#39;, &#39;dot_emp_eq&#39;, &#39;gg_dot_emp_eq&#39;, &#39;lrulc_gap&#39;, &#39;lulc&#39;, &#39;dot_ulc&#39;, &#39;dot4_ulc&#39;, &#39;ls&#39;, &#39;dot_s&#39;, &#39;dot4_s&#39;, &#39;prem&#39;, &#39;prem_eq&#39;, &#39;shock_prem&#39;, &#39;rn&#39;, &#39;rr&#39;, &#39;rr_eq&#39;, &#39;rr_gap&#39;, &#39;rn_neutral&#39;, &#39;rn40&#39;, &#39;rr40&#39;, &#39;rr40_eq&#39;, &#39;lrr&#39;, &#39;lrr_eq&#39;, &#39;lrr_gap&#39;, &#39;term40&#39;, &#39;term40_gap&#39;, &#39;rr_core&#39;, &#39;rr_core_gap&#39;, &#39;lz&#39;, &#39;lz_eq&#39;, &#39;lz_gap&#39;, &#39;dot_z&#39;, &#39;dot_z_eq&#39;, &#39;gg_dot_z_eq&#39;, &#39;lfood&#39;, &#39;dot_food&#39;, &#39;dot4_food&#39;, &#39;lqfood&#39;, &#39;lqfood_eq&#39;, &#39;lqfood_gap&#39;, &#39;dot_qfood_eq&#39;, &#39;lforcmd&#39;, &#39;dot_forcmd&#39;, &#39;lqforcmd&#39;, &#39;lqforcmd_eq&#39;, &#39;lqforcmd_gap&#39;, &#39;dot_qforcmd_eq&#39;, &#39;loil&#39;, &#39;dot_oil&#39;, &#39;dot4_oil&#39;, &#39;lqoil&#39;, &#39;lqoil_eq&#39;, &#39;lqoil_gap&#39;, &#39;dot_qoil_eq&#39;, &#39;lx_gdp&#39;, &#39;lx_gdp_eq&#39;, &#39;lx_gdp_gap&#39;, &#39;dot_x_gdp&#39;, &#39;dot4_x_gdp&#39;, &#39;dot_x_gdp_eq&#39;, &#39;g_x&#39;, &#39;x_rn&#39;, &#39;x_rr&#39;, &#39;x_rr_eq&#39;, &#39;x_rr_gap&#39;, &#39;lx_cpi&#39;, &#39;dot_x_cpi&#39;, &#39;dot4_x_cpi&#39;, &#39;E1_dot_cpi&#39;, &#39;E1_dot4_cpi&#39;, &#39;E3_dot4_cpi&#39;, &#39;E4_dot4_cpi&#39;, &#39;E5_dot4_cpi&#39;, &#39;E1_lgdp_gap&#39;, &#39;E1_dot4_x_cpi&#39;, &#39;E1_dot_z_eq&#39;, &#39;E0_dot4_cpi&#39;, &#39;E1_ls&#39;]</span>
    <span class="c1"># parameters = [&#39;u1&#39;, &#39;u2&#39;, &#39;a1&#39;, &#39;a2&#39;, &#39;a3&#39;, &#39;a4&#39;, &#39;a5&#39;, &#39;a6&#39;, &#39;a7&#39;, &#39;j1&#39;, &#39;theta&#39;, &#39;b11&#39;, &#39;b12&#39;, &#39;b13&#39;, &#39;b14&#39;, &#39;b15&#39;, &#39;b16&#39;, &#39;b21&#39;, &#39;b22&#39;, &#39;b23&#39;, &#39;b24&#39;, &#39;b25&#39;, &#39;b26&#39;, &#39;b31&#39;, &#39;b32&#39;, &#39;b33&#39;, &#39;b34&#39;, &#39;b35&#39;, &#39;b36&#39;, &#39;b37&#39;, &#39;b41&#39;, &#39;b42&#39;, &#39;b43&#39;, &#39;c1&#39;, &#39;t1&#39;, &#39;h6&#39;, &#39;ss_target&#39;, &#39;ss_dot_pettax&#39;, &#39;w1&#39;, &#39;w2&#39;, &#39;w3&#39;, &#39;k1&#39;, &#39;k2&#39;, &#39;h1&#39;, &#39;h8&#39;, &#39;ss_dot_emp_eq&#39;, &#39;ss_prem_eq&#39;, &#39;theta1&#39;, &#39;theta2&#39;, &#39;ss_rr_eq&#39;, &#39;ss_dot_z_eq&#39;, &#39;ss_g&#39;, &#39;ss_term40&#39;, &#39;lrrw01&#39;, &#39;lrrw40&#39;, &#39;e1&#39;, &#39;f1&#39;, &#39;f2&#39;, &#39;f3&#39;, &#39;g2&#39;, &#39;h0&#39;, &#39;h4&#39;, &#39;h5&#39;, &#39;h7&#39;, &#39;hh0&#39;, &#39;h9&#39;, &#39;theta3&#39;, &#39;ss_dot_qfood_eq&#39;, &#39;ss_dot_qforcmd_eq&#39;, &#39;ss_dot_qoil_eq&#39;, &#39;g4&#39;, &#39;h2&#39;, &#39;ss_dot_x_cpi&#39;, &#39;ss_x_rr_eq&#39;, &#39;ss_g_x&#39;, &#39;jx1&#39;, &#39;h3&#39;]</span>
    <span class="c1">#ss_eqs = get_steady_state_equations(eqs,variables,parameters)</span>
    
    <span class="n">eqs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GGR_ST=GGR*(NPGDP_OVER_HEADLINE^ELAS_C_ST)*(NPGDP_OVER_HEADLINE(-1)^ELAS_L_ST)&#39;</span><span class="p">]</span>
    <span class="n">variables</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GGR&#39;</span><span class="p">,</span><span class="s1">&#39;NPGDP_OVER_HEADLINE&#39;</span><span class="p">,</span><span class="s1">&#39;ELAS_C_ST&#39;</span><span class="p">,</span><span class="s1">&#39;ELAS_L_ST&#39;</span><span class="p">]</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">eqs</span><span class="p">)</span>
    <span class="n">ss_eqs</span> <span class="o">=</span> <span class="n">get_steady_state_equations</span><span class="p">(</span><span class="n">eqs</span><span class="p">,</span><span class="n">variables</span><span class="p">,</span><span class="n">parameters</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ss_eqs</span><span class="p">)</span>
    
    
    
    <span class="c1"># eq = &#39;ISR_INTCORP__ - (((ISR_RPREM__ + 1)*(ISR_RPREM__p1_ + 1)*(ISR_RPREM_plus_1__p1_ + 1)*(ISR_RPREM_plus_2__p1_ + 1)*(ISR_RPREM_plus_3__p1_ + 1)*(ISR_RPREM_plus_4__p1_ + 1)*(ISR_RPREM_plus_5__p1_ + 1)*(ISR_RPREM_plus_6__p1_ + 1)*(ISR_RPREM_plus_7__p1_ + 1)*(ISR_RPREM_plus_8__p1_ + 1))**0.1*(ISR_INT10__ + 1))**ISR_INTCORP1*((ISR_INT__ + 1)*(ISR_RPREM__ + 1))**(1 - ISR_INTCORP1)*(E_ISR_INTCORP + 1)*(RES_ISR_INTCORP + 1) + 1&#39;</span>
    <span class="c1"># x = &#39;ISR_INTCORP__&#39;</span>
    <span class="c1"># s   = sy.symbols(x)</span>
    <span class="c1"># sol = sy.solve(eq,s)</span>
               
    <span class="c1"># rhs = str(sol[0])</span>
    <span class="c1"># print(rhs)</span>
    
    <span class="c1"># eq = &#39;(10000000*NFIP)=(10000000*NFI)-(10000000*NFIG)&#39;</span>
    <span class="c1"># var = [&#39;NFI&#39;,&#39;NFIG&#39;]</span>
    <span class="c1"># print(replaceEquation(eq,var))</span>
    
    
    
    <span class="c1"># from snowdrop.src.utils.util import findVariableLead</span>
    <span class="c1"># from snowdrop.src.utils.util import findVariableLag</span>
    
    <span class="c1"># i = -1; T = 10</span>
    <span class="c1"># var = [&quot;x&quot;]; me = {&quot;x&quot;:[0]*(1+T)} </span>
    <span class="c1"># params = [&quot;a&quot;]; mp = {&quot;a&quot;:1.5}</span>
    <span class="c1"># eqs = [&quot;x = a*x__m1_+2&quot;]</span>
    <span class="c1"># lfunc,lnames,largs,leqs = build_func(var,params,eqs)</span>
    
    <span class="c1"># m = dict()</span>
    <span class="c1"># for x in lnames:</span>
    <span class="c1">#     m[x] = np.zeros(T)</span>
        
    <span class="c1"># for func,arg in zip(lfunc,largs):</span>
    <span class="c1">#     i += 1</span>
    <span class="c1">#     for t in range(1,T):</span>
    <span class="c1">#         lst = list()</span>
    <span class="c1">#         for j in range(len(arg)):</span>
    <span class="c1">#             a = arg[j]</span>
    <span class="c1">#             lead = findVariableLead(a)</span>
    <span class="c1">#             lag  = findVariableLag(a)</span>
    <span class="c1">#             tt = t + lead + lag</span>
    <span class="c1">#             if &quot;__&quot; in a:</span>
    <span class="c1">#                 a = a[:a.index(&quot;__&quot;)] </span>
    <span class="c1">#             y = eval(a,m,mp)</span>
    <span class="c1">#             if a in var:</span>
    <span class="c1">#                 y = y[tt]</span>
    <span class="c1">#             lst.append(y)</span>
    <span class="c1">#         if len(lst) &gt; 0:</span>
    <span class="c1">#             u = func(*lst)</span>
    <span class="c1">#         else:</span>
    <span class="c1">#             u = func()</span>
    <span class="c1">#         m[x][t] = u</span>
            
    <span class="c1"># print(m[x])</span>
    
        
        
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../index.html">Python Platform</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../source/modules.html">snowdrop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../info.html">Python Platform</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Alexei Goumilevski.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
    </div>

    

    
  </body>
</html>